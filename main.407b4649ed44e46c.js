"use strict";(self.webpackChunkAngTradeClient=self.webpackChunkAngTradeClient||[]).push([[179],{865:()=>{function Se(n){return"function"==typeof n}function ts(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const tc=ts(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ns(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class tn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Se(r))try{r()}catch(i){e=i instanceof tc?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{Hy(i)}catch(s){e=e??[],s instanceof tc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hy(e);else{if(e instanceof tn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ns(t,e)}remove(e){const{_finalizers:t}=this;t&&ns(t,e),e instanceof tn&&e._removeParent(this)}}tn.EMPTY=(()=>{const n=new tn;return n.closed=!0,n})();const Ly=tn.EMPTY;function Uy(n){return n instanceof tn||n&&"closed"in n&&Se(n.remove)&&Se(n.add)&&Se(n.unsubscribe)}function Hy(n){Se(n)?n():n.unsubscribe()}const to={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},nc={setTimeout(n,e,...t){const{delegate:r}=nc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=nc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Vy(n){nc.setTimeout(()=>{const{onUnhandledError:e}=to;if(!e)throw n;e(n)})}function zd(){}const KD=Kd("C",void 0,void 0);function Kd(n,e,t){return{kind:n,value:e,error:t}}let no=null;function rc(n){if(to.useDeprecatedSynchronousErrorHandling){const e=!no;if(e&&(no={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=no;if(no=null,t)throw r}}else n()}class qd extends tn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uy(e)&&e.add(this)):this.destination=ZD}static create(e,t,r){return new rs(e,t,r)}next(e){this.isStopped?Qd(function WD(n){return Kd("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Qd(function qD(n){return Kd("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qd(KD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const YD=Function.prototype.bind;function Wd(n,e){return YD.call(n,e)}class JD{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){oc(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){oc(r)}else oc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){oc(t)}}}class rs extends qd{constructor(e,t,r){let o;if(super(),Se(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&to.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Wd(e.next,i),error:e.error&&Wd(e.error,i),complete:e.complete&&Wd(e.complete,i)}):o=e}this.destination=new JD(o)}}function oc(n){to.useDeprecatedSynchronousErrorHandling?function QD(n){to.useDeprecatedSynchronousErrorHandling&&no&&(no.errorThrown=!0,no.error=n)}(n):Vy(n)}function Qd(n,e){const{onStoppedNotification:t}=to;t&&nc.setTimeout(()=>t(n,e))}const ZD={closed:!0,next:zd,error:function XD(n){throw n},complete:zd},Yd="function"==typeof Symbol&&Symbol.observable||"@@observable";function ro(n){return n}function By(n){return 0===n.length?ro:1===n.length?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}let Ve=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){const i=function nR(n){return n&&n instanceof qd||function tR(n){return n&&Se(n.next)&&Se(n.error)&&Se(n.complete)}(n)&&Uy(n)}(t)?t:new rs(t,r,o);return rc(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=$y(r))((o,i)=>{const s=new rs({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Yd](){return this}pipe(...t){return By(t)(this)}toPromise(t){return new(t=$y(t))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function $y(n){var e;return null!==(e=n??to.Promise)&&void 0!==e?e:Promise}const rR=ts(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let nn=(()=>{class n extends Ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new jy(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new rR}next(t){rc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){rc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){rc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:i}=this;return r||o?Ly:(this.currentObservers=null,i.push(t),new tn(()=>{this.currentObservers=null,ns(i,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){const t=new Ve;return t.source=this,t}}return n.create=(e,t)=>new jy(e,t),n})();class jy extends nn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Ly}}function Gy(n){return Se(n?.lift)}function tt(n){return e=>{if(Gy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qe(n,e,t,r,o){return new oR(n,e,t,r,o)}class oR extends qd{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ee(n,e){return tt((t,r)=>{let o=0;t.subscribe(Qe(r,i=>{r.next(n.call(e,i,o++))}))})}function kr(n){return this instanceof kr?(this.v=n,this):new kr(n)}function Wy(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function eh(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){!function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}(a,c,(s=n[i](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Qy=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Yy(n){return Se(n?.then)}function Jy(n){return Se(n[Yd])}function Xy(n){return Symbol.asyncIterator&&Se(n?.[Symbol.asyncIterator])}function Zy(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ev=function kR(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tv(n){return Se(n?.[ev])}function nv(n){return function qy(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(n,e||[]),i=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(f){return function(g){return Promise.resolve(g).then(f,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function a(f,g){r[f]&&(o[f]=function(m){return new Promise(function(v,E){i.push([f,m,v,E])>1||c(f,m)})},g&&(o[f]=g(o[f])))}function c(f,g){try{!function l(f){f.value instanceof kr?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}(r[f](g))}catch(m){h(i[0][3],m)}}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,g){f(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:o}=yield kr(t.read());if(o)return yield kr(void 0);yield yield kr(r)}}finally{t.releaseLock()}})}function rv(n){return Se(n?.getReader)}function Bt(n){if(n instanceof Ve)return n;if(null!=n){if(Jy(n))return function NR(n){return new Ve(e=>{const t=n[Yd]();if(Se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Qy(n))return function OR(n){return new Ve(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Yy(n))return function PR(n){return new Ve(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Vy)})}(n);if(Xy(n))return ov(n);if(tv(n))return function xR(n){return new Ve(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(rv(n))return function FR(n){return ov(nv(n))}(n)}throw Zy(n)}function ov(n){return new Ve(e=>{(function LR(n,e){var t,r,o,i;return function zy(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):function o(i){return i instanceof t?i:new t(function(s){s(i)})}(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Wy(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function sr(n,e,t,r=0,o=!1){const i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function lt(n,e,t=1/0){return Se(e)?lt((r,o)=>ee((i,s)=>e(r,i,o,s))(Bt(n(r,o))),t):("number"==typeof e&&(t=e),tt((r,o)=>function UR(n,e,t,r,o,i,s,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<r?g(m):c.push(m),g=m=>{i&&e.next(m),l++;let v=!1;Bt(t(m,u++)).subscribe(Qe(e,E=>{o?.(E),i?f(E):e.next(E)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<r;){const E=c.shift();s?sr(e,s,()=>g(E)):g(E)}h()}catch(E){e.error(E)}}))};return n.subscribe(Qe(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,t)))}function Oo(n=1/0){return lt(ro,n)}const vn=new Ve(n=>n.complete());function nh(n){return n[n.length-1]}function iv(n){return Se(nh(n))?n.pop():void 0}function os(n){return function VR(n){return n&&Se(n.schedule)}(nh(n))?n.pop():void 0}function sv(n,e=0){return tt((t,r)=>{t.subscribe(Qe(r,o=>sr(r,n,()=>r.next(o),e),()=>sr(r,n,()=>r.complete(),e),o=>sr(r,n,()=>r.error(o),e)))})}function av(n,e=0){return tt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function cv(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ve(t=>{sr(t,e,()=>{const r=n[Symbol.asyncIterator]();sr(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function fe(n,e){return e?function qR(n,e){if(null!=n){if(Jy(n))return function $R(n,e){return Bt(n).pipe(av(e),sv(e))}(n,e);if(Qy(n))return function GR(n,e){return new Ve(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Yy(n))return function jR(n,e){return Bt(n).pipe(av(e),sv(e))}(n,e);if(Xy(n))return cv(n,e);if(tv(n))return function zR(n,e){return new Ve(t=>{let r;return sr(t,e,()=>{r=n[ev](),sr(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void t.error(s)}i?t.complete():t.next(o)},0,!0)}),()=>Se(r?.return)&&r.return()})}(n,e);if(rv(n))return function KR(n,e){return cv(nv(n),e)}(n,e)}throw Zy(n)}(n,e):Bt(n)}function rh(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new rs({next:()=>{r.unsubscribe(),n()}});return Bt(e(...t)).subscribe(r)}function Ie(n){for(let e in n)if(n[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function oh(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Te(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Te).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ih(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const YR=Ie({__forward_ref__:Ie});function Ae(n){return n.__forward_ref__=Ae,n.toString=function(){return Te(this())},n}function j(n){return sh(n)?n():n}function sh(n){return"function"==typeof n&&n.hasOwnProperty(YR)&&n.__forward_ref__===Ae}function ah(n){return n&&!!n.\u0275providers}const lv="https://g.co/ng/security#xss";class T extends Error{constructor(e,t){super(ic(e,t)),this.code=e}}function ic(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function Y(n){return"string"==typeof n?n:null==n?"":String(n)}function sc(n,e){throw new T(-201,!1)}function rn(n,e){null==n&&function me(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function jt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ac(n){return uv(n,cc)||uv(n,hv)}function uv(n,e){return n.hasOwnProperty(e)?n[e]:null}function dv(n){return n&&(n.hasOwnProperty(ch)||n.hasOwnProperty(oM))?n[ch]:null}const cc=Ie({\u0275prov:Ie}),ch=Ie({\u0275inj:Ie}),hv=Ie({ngInjectableDef:Ie}),oM=Ie({ngInjectorDef:Ie});var G=(()=>((G=G||{})[G.Default=0]="Default",G[G.Host=1]="Host",G[G.Self=2]="Self",G[G.SkipSelf=4]="SkipSelf",G[G.Optional=8]="Optional",G))();let lh;function on(n){const e=lh;return lh=n,e}function fv(n,e,t){const r=ac(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&G.Optional?null:void 0!==e?e:void sc(Te(n))}const De=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),is={},uh="__NG_DI_FLAG__",lc="ngTempTokenPath",sM="ngTokenPath",aM=/\n/gm,cM="\u0275",pv="__source";let ss;function Po(n){const e=ss;return ss=n,e}function lM(n,e=G.Default){if(void 0===ss)throw new T(-203,!1);return null===ss?fv(n,void 0,e):ss.get(n,e&G.Optional?null:void 0,e)}function M(n,e=G.Default){return(function iM(){return lh}()||lM)(j(n),e)}function re(n,e=G.Default){return M(n,uc(e))}function uc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function dh(n){const e=[];for(let t=0;t<n.length;t++){const r=j(n[t]);if(Array.isArray(r)){if(0===r.length)throw new T(900,!1);let o,i=G.Default;for(let s=0;s<r.length;s++){const a=r[s],c=uM(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}e.push(M(o,i))}else e.push(M(r))}return e}function as(n,e){return n[uh]=e,n.prototype[uh]=e,n}function uM(n){return n[uh]}function ar(n){return{toString:n}.toString()}var xn=(()=>((xn=xn||{})[xn.OnPush=0]="OnPush",xn[xn.Default=1]="Default",xn))(),Fn=(()=>{return(n=Fn||(Fn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Fn;var n})();const cr={},pe=[],dc=Ie({\u0275cmp:Ie}),hh=Ie({\u0275dir:Ie}),fh=Ie({\u0275pipe:Ie}),mv=Ie({\u0275mod:Ie}),lr=Ie({\u0275fac:Ie}),cs=Ie({__NG_ELEMENT_ID__:Ie});let fM=0;function oo(n){return ar(()=>{const e=vv(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Fn.Emulated,id:"c"+fM++,styles:n.styles||pe,_:null,schemas:n.schemas||null,tView:null};Cv(t);const r=n.dependencies;return t.directiveDefs=hc(r,!1),t.pipeDefs=hc(r,!0),t})}function gM(n){return ye(n)||gt(n)}function mM(n){return null!==n}function sn(n){return ar(()=>({type:n.type,bootstrap:n.bootstrap||pe,declarations:n.declarations||pe,imports:n.imports||pe,exports:n.exports||pe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function yv(n,e){if(null==n)return cr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),t[o]=r,e&&(e[o]=i)}return t}function K(n){return ar(()=>{const e=vv(n);return Cv(e),e})}function ye(n){return n[dc]||null}function gt(n){return n[hh]||null}function Ft(n){return n[fh]||null}function Gt(n,e){const t=n[mv]||null;if(!t&&!0===e)throw new Error(`Type ${Te(n)} does not have '\u0275mod' property.`);return t}function vv(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||pe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yv(n.inputs,e),outputs:yv(n.outputs)}}function Cv(n){n.features?.forEach(e=>e(n))}function hc(n,e){if(!n)return null;const t=e?Ft:gM;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(mM)}const ur=0,N=1,te=2,Le=3,Cn=4,io=5,mt=6,Fo=7,Be=8,fc=9,pc=10,oe=11,ph=12,ls=13,_v=14,Lo=15,yt=16,us=17,Uo=18,Ln=19,ds=20,Ev=21,Re=22,gh=1,Iv=2,gc=7,mc=8,Ho=9,Tt=10;function zt(n){return Array.isArray(n)&&"object"==typeof n[gh]}function _n(n){return Array.isArray(n)&&!0===n[gh]}function mh(n){return 0!=(4&n.flags)}function hs(n){return n.componentOffset>-1}function yc(n){return 1==(1&n.flags)}function En(n){return!!n.template}function vM(n){return 0!=(256&n[te])}function so(n,e){return n.hasOwnProperty(lr)?n[lr]:null}class EM{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function an(){return Tv}function Tv(n){return n.type.prototype.ngOnChanges&&(n.setInput=wM),IM}function IM(){const n=bv(this),e=n?.current;if(e){const t=n.previous;if(t===cr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function wM(n,e,t,r){const o=this.declaredInputs[t],i=bv(n)||function SM(n,e){return n[Av]=e}(n,{previous:cr,current:null}),s=i.current||(i.current={}),a=i.previous,c=a[o];s[o]=new EM(c&&c.currentValue,e,a===cr),n[r]=e}an.ngInherit=!0;const Av="__ngSimpleChanges__";function bv(n){return n[Av]||null}const cn=function(n,e,t){};function ut(n){for(;Array.isArray(n);)n=n[ur];return n}function vc(n,e){return ut(e[n])}function Kt(n,e){return ut(e[n.index])}function Mv(n,e){return n.data[e]}function Lt(n,e){const t=e[n];return zt(t)?t:t[ur]}function Cc(n){return 64==(64&n[te])}function Or(n,e){return null==e?null:n[e]}function kv(n){n[Uo]=0}function vh(n,e){n[io]+=e;let t=n,r=n[Le];for(;null!==r&&(1===e&&1===t[io]||-1===e&&0===t[io]);)r[io]+=e,t=r,r=r[Le]}const J={lFrame:Bv(null),bindingsEnabled:!0};function Ov(){return J.bindingsEnabled}function I(){return J.lFrame.lView}function de(){return J.lFrame.tView}function Pr(n){return J.lFrame.contextLView=n,n[Be]}function xr(n){return J.lFrame.contextLView=null,n}function dt(){let n=Pv();for(;null!==n&&64===n.type;)n=n.parent;return n}function Pv(){return J.lFrame.currentTNode}function Un(n,e){const t=J.lFrame;t.currentTNode=n,t.isParent=e}function Ch(){return J.lFrame.isParent}function Bo(){return J.lFrame.bindingIndex++}function hr(n){const e=J.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function LM(n,e){const t=J.lFrame;t.bindingIndex=t.bindingRootIndex=n,Eh(e)}function Eh(n){J.lFrame.currentDirectiveIndex=n}function Uv(){return J.lFrame.currentQueryIndex}function wh(n){J.lFrame.currentQueryIndex=n}function HM(n){const e=n[N];return 2===e.type?e.declTNode:1===e.type?n[mt]:null}function Hv(n,e,t){if(t&G.SkipSelf){let o=e,i=n;for(;!(o=o.parent,null!==o||t&G.Host||(o=HM(i),null===o||(i=i[Lo],10&o.type))););if(null===o)return!1;e=o,n=i}const r=J.lFrame=Vv();return r.currentTNode=e,r.lView=n,!0}function Sh(n){const e=Vv(),t=n[N];J.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Vv(){const n=J.lFrame,e=null===n?null:n.child;return null===e?Bv(n):e}function Bv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function $v(){const n=J.lFrame;return J.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jv=$v;function Th(){const n=$v();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bt(){return J.lFrame.selectedIndex}function ao(n){J.lFrame.selectedIndex=n}function Pe(){const n=J.lFrame;return Mv(n.tView,n.selectedIndex)}function _c(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks??(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks??(n.viewHooks=[])).push(t,l),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(t,u)}}function Ec(n,e,t){Gv(n,e,3,t)}function Ic(n,e,t,r){(3&n[te])===t&&Gv(n,e,t,r)}function Ah(n,e){let t=n[te];(3&t)===e&&(t&=2047,t+=1,n[te]=t)}function Gv(n,e,t,r){const i=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Uo]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Uo]+=65536),(a<i||-1==i)&&(WM(n,t,e,c),n[Uo]=(4294901760&n[Uo])+c+2),c++}function WM(n,e,t,r){const o=t[r]<0,i=t[r+1],a=n[o?-t[r]:t[r]];if(o){if(n[te]>>11<n[Uo]>>16&&(3&n[te])===e){n[te]+=2048,cn(4,a,i);try{i.call(a)}finally{cn(5,a,i)}}}else{cn(4,a,i);try{i.call(a)}finally{cn(5,a,i)}}}const $o=-1;class ps{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Dh(n,e,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{const i=o,s=t[++r];Kv(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function zv(n){return 3===n||4===n||6===n}function Kv(n){return 64===n.charCodeAt(0)}function gs(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?t=o:0===t||qv(n,t,o,null,-1===t||2===t?e[++r]:null)}}return n}function qv(n,e,t,r,o){let i=0,s=n.length;if(-1===e)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}function Wv(n){return n!==$o}function wc(n){return 32767&n}function Sc(n,e){let t=function XM(n){return n>>16}(n),r=e;for(;t>0;)r=r[Lo],t--;return r}let Rh=!0;function Tc(n){const e=Rh;return Rh=n,e}const Qv=255,Yv=5;let ZM=0;const Hn={};function Ac(n,e){const t=Jv(n,e);if(-1!==t)return t;const r=e[N];r.firstCreatePass&&(n.injectorIndex=e.length,Mh(r.data,n),Mh(e,null),Mh(r.blueprint,null));const o=kh(n,e),i=n.injectorIndex;if(Wv(o)){const s=wc(o),a=Sc(o,e),c=a[N].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function Mh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Jv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function kh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;null!==o;){if(r=oC(o),null===r)return $o;if(t++,o=o[Lo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return $o}function Nh(n,e,t){!function ek(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(cs)&&(r=t[cs]),null==r&&(r=t[cs]=ZM++);const o=r&Qv;e.data[n+(o>>Yv)]|=1<<o}(n,e,t)}function Xv(n,e,t){if(t&G.Optional||void 0!==n)return n;sc()}function Zv(n,e,t,r){if(t&G.Optional&&void 0===r&&(r=null),!(t&(G.Self|G.Host))){const o=n[fc],i=on(void 0);try{return o?o.get(e,r,t&G.Optional):fv(e,r,t&G.Optional)}finally{on(i)}}return Xv(r,0,t)}function eC(n,e,t,r=G.Default,o){if(null!==n){if(1024&e[te]){const s=function ik(n,e,t,r,o){let i=n,s=e;for(;null!==i&&null!==s&&1024&s[te]&&!(256&s[te]);){const a=tC(i,s,t,r|G.Self,Hn);if(a!==Hn)return a;let c=i.parent;if(!c){const l=s[Ev];if(l){const u=l.get(t,Hn,r);if(u!==Hn)return u}c=oC(s),s=s[Lo]}i=c}return o}(n,e,t,r,Hn);if(s!==Hn)return s}const i=tC(n,e,t,r,Hn);if(i!==Hn)return i}return Zv(e,t,r,o)}function tC(n,e,t,r,o){const i=function rk(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(cs)?n[cs]:void 0;return"number"==typeof e?e>=0?e&Qv:ok:e}(t);if("function"==typeof i){if(!Hv(e,n,r))return r&G.Host?Xv(o,0,r):Zv(e,t,r,o);try{const s=i(r);if(null!=s||r&G.Optional)return s;sc()}finally{jv()}}else if("number"==typeof i){let s=null,a=Jv(n,e),c=$o,l=r&G.Host?e[yt][mt]:null;for((-1===a||r&G.SkipSelf)&&(c=-1===a?kh(n,e):e[a+8],c!==$o&&rC(r,!1)?(s=e[N],a=wc(c),e=Sc(c,e)):a=-1);-1!==a;){const u=e[N];if(nC(i,a,u.data)){const d=nk(a,e,t,s,r,l);if(d!==Hn)return d}c=e[a+8],c!==$o&&rC(r,e[N].data[a+8]===l)&&nC(i,a,e)?(s=u,a=wc(c),e=Sc(c,e)):a=-1}}return o}function nk(n,e,t,r,o,i){const s=e[N],a=s.data[n+8],u=bc(a,s,t,null==r?hs(a)&&Rh:r!=s&&0!=(3&a.type),o&G.Host&&i===a);return null!==u?co(e,s,u,a):Hn}function bc(n,e,t,r,o){const i=n.providerIndexes,s=e.data,a=1048575&i,c=n.directiveStart,u=i>>20,h=o?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const g=s[f];if(f<c&&t===g||f>=c&&g.type===t)return f}if(o){const f=s[c];if(f&&En(f)&&f.type===t)return c}return null}function co(n,e,t,r){let o=n[t];const i=e.data;if(function QM(n){return n instanceof ps}(o)){const s=o;s.resolving&&function JR(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new T(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ge(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Y(n)}(i[t]));const a=Tc(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?on(s.injectImpl):null;Hv(n,r,G.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&function qM(n,e,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=Tv(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s)}o&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,o),i&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,i),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,i))}(t,i[t],e)}finally{null!==c&&on(c),Tc(a),s.resolving=!1,jv()}}return o}function nC(n,e,t){return!!(t[e+(n>>Yv)]&1<<n)}function rC(n,e){return!(n&G.Self||n&G.Host&&e)}class jo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return eC(this._tNode,this._lView,e,uc(r),t)}}function ok(){return new jo(dt(),I())}function ht(n){return ar(()=>{const e=n.prototype.constructor,t=e[lr]||Oh(e),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[lr]||Oh(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Oh(n){return sh(n)?()=>{const e=Oh(j(n));return e&&e()}:so(n)}function oC(n){const e=n[N],t=e.type;return 2===t?e.declTNode:1===t?n[mt]:null}const zo="__parameters__";function qo(n,e,t){return ar(()=>{const r=function Ph(n){return function(...t){if(n){const r=n(...t);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(c,l,u){const d=c.hasOwnProperty(zo)?c[zo]:Object.defineProperty(c,zo,{value:[]})[zo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}class x{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function lo(n,e){n.forEach(t=>Array.isArray(t)?lo(t,e):e(t))}function sC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qt(n,e,t){let r=Wo(n,e);return r>=0?n[1|r]=t:(r=~r,function lk(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(1===o)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;)n[o]=n[o-2],o--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Fh(n,e){const t=Wo(n,e);if(t>=0)return n[1|t]}function Wo(n,e){return function aC(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){const i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}(n,e,1)}const Cs=as(qo("Optional"),8),_s=as(qo("SkipSelf"),4);var Ut=(()=>((Ut=Ut||{})[Ut.Important=1]="Important",Ut[Ut.DashCase=2]="DashCase",Ut))();const $h=new Map;let kk=0;const Gh="__ngContext__";function vt(n,e){zt(e)?(n[Gh]=e[ds],function Ok(n){$h.set(n[ds],n)}(e)):n[Gh]=e}let zh;function Kh(n,e){return zh(n,e)}function Ss(n){const e=n[Le];return _n(e)?e[Le]:e}function qh(n){return bC(n[ls])}function Wh(n){return bC(n[Cn])}function bC(n){for(;null!==n&&!_n(n);)n=n[Cn];return n}function Yo(n,e,t,r,o){if(null!=r){let i,s=!1;_n(r)?i=r:zt(r)&&(s=!0,r=r[ur]);const a=ut(r);0===n&&null!==t?null==o?OC(e,t,a):uo(e,t,a,o||null,!0):1===n&&null!==t?uo(e,t,a,o||null,!0):2===n?function tf(n,e,t){const r=Oc(n,e);r&&function Zk(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=i&&function nN(n,e,t,r,o){const i=t[gc];i!==ut(t)&&Yo(e,n,r,i,o);for(let a=Tt;a<t.length;a++){const c=t[a];Ts(c[N],c,n,e,r,i)}}(e,n,i,t,o)}}function Yh(n,e,t){return n.createElement(e,t)}function RC(n,e){const t=n[Ho],r=t.indexOf(e),o=e[Le];512&e[te]&&(e[te]&=-513,vh(o,-1)),t.splice(r,1)}function Jh(n,e){if(n.length<=Tt)return;const t=Tt+e,r=n[t];if(r){const o=r[us];null!==o&&o!==n&&RC(o,r),e>0&&(n[t-1][Cn]=r[Cn]);const i=Rc(n,Tt+e);!function zk(n,e){Ts(n,e,e[oe],2,null,null),e[ur]=null,e[mt]=null}(r[N],r);const s=i[Ln];null!==s&&s.detachView(i[N]),r[Le]=null,r[Cn]=null,r[te]&=-65}return r}function MC(n,e){if(!(128&e[te])){const t=e[oe];t.destroyNode&&Ts(n,e,t,3,null,null),function Wk(n){let e=n[ls];if(!e)return Xh(n[N],n);for(;e;){let t=null;if(zt(e))t=e[ls];else{const r=e[Tt];r&&(t=r)}if(!t){for(;e&&!e[Cn]&&e!==n;)zt(e)&&Xh(e[N],e),e=e[Le];null===e&&(e=n),zt(e)&&Xh(e[N],e),t=e&&e[Cn]}e=t}}(e)}}function Xh(n,e){if(!(128&e[te])){e[te]&=-65,e[te]|=128,function Xk(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const o=e[t[r]];if(!(o instanceof ps)){const i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];cn(4,a,c);try{c.call(a)}finally{cn(5,a,c)}}else{cn(4,o,i);try{i.call(o)}finally{cn(5,o,i)}}}}}(n,e),function Jk(n,e){const t=n.cleanup,r=e[Fo];let o=-1;if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const s=t[i+3];s>=0?r[o=s]():r[o=-s].unsubscribe(),i+=2}else{const s=r[o=t[i+1]];t[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)(0,r[i])();e[Fo]=null}}(n,e),1===e[N].type&&e[oe].destroy();const t=e[us];if(null!==t&&_n(e[Le])){t!==e[Le]&&RC(t,e);const r=e[Ln];null!==r&&r.detachView(n)}!function Pk(n){$h.delete(n[ds])}(e)}}function kC(n,e,t){return function NC(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[ur];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===Fn.None||i===Fn.Emulated)return null}return Kt(r,t)}}(n,e.parent,t)}function uo(n,e,t,r,o){n.insertBefore(e,t,r,o)}function OC(n,e,t){n.appendChild(e,t)}function PC(n,e,t,r,o){null!==r?uo(n,e,t,r,o):OC(n,e,t)}function Oc(n,e){return n.parentNode(e)}let Zh,sf,Lc,LC=function FC(n,e,t){return 40&n.type?Kt(n,t):null};function Pc(n,e,t,r){const o=kC(n,r,e),i=e[oe],a=function xC(n,e,t){return LC(n,e,t)}(r.parent||e[mt],r,e);if(null!=o)if(Array.isArray(t))for(let c=0;c<t.length;c++)PC(i,o,t[c],a,!1);else PC(i,o,t,a,!1);void 0!==Zh&&Zh(i,r,e,t,o)}function xc(n,e){if(null!==e){const t=e.type;if(3&t)return Kt(e,n);if(4&t)return ef(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return xc(n,r);{const o=n[e.index];return _n(o)?ef(-1,o):ut(o)}}if(32&t)return Kh(e,n)()||ut(n[e.index]);{const r=HC(n,e);return null!==r?Array.isArray(r)?r[0]:xc(Ss(n[yt]),r):xc(n,e.next)}}return null}function HC(n,e){return null!==e?n[yt][mt].projection[e.projection]:null}function ef(n,e){const t=Tt+n+1;if(t<e.length){const r=e[t],o=r[N].firstChild;if(null!==o)return xc(r,o)}return e[gc]}function nf(n,e,t,r,o,i,s){for(;null!=t;){const a=r[t.index],c=t.type;if(s&&0===e&&(a&&vt(ut(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)nf(n,e,t.child,r,o,i,!1),Yo(e,n,o,a,i);else if(32&c){const l=Kh(t,r);let u;for(;u=l();)Yo(e,n,o,u,i);Yo(e,n,o,a,i)}else 16&c?VC(n,e,r,t,o,i):Yo(e,n,o,a,i);t=s?t.projectionNext:t.next}}function Ts(n,e,t,r,o,i){nf(t,r,n.firstChild,e,o,i,!1)}function VC(n,e,t,r,o,i){const s=t[yt],c=s[mt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Yo(e,n,o,c[l],i);else nf(n,e,c,s[Le],o,i,!0)}function BC(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $C(n,e,t){const{mergedAttrs:r,classes:o,styles:i}=t;null!==r&&Dh(n,e,r),null!==o&&BC(n,e,o),null!==i&&function oN(n,e,t){n.setAttribute(e,"style",t)}(n,e,i)}function KC(n){return function af(){if(void 0===Lc&&(Lc=null,De.trustedTypes))try{Lc=De.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lc}()?.createScriptURL(n)||n}class qC{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lv})`}}function Fr(n){return n instanceof qC?n.changingThisBreaksApplicationSecurity:n}function As(n,e){const t=function pN(n){return n instanceof qC&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${lv})`)}return t===e}const vN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ye=(()=>((Ye=Ye||{})[Ye.NONE=0]="NONE",Ye[Ye.HTML=1]="HTML",Ye[Ye.STYLE=2]="STYLE",Ye[Ye.SCRIPT=3]="SCRIPT",Ye[Ye.URL=4]="URL",Ye[Ye.RESOURCE_URL=5]="RESOURCE_URL",Ye))();function e_(n){const e=Ds();return e?e.sanitize(Ye.URL,n)||"":As(n,"URL")?Fr(n):function cf(n){return(n=String(n)).match(vN)?n:"unsafe:"+n}(Y(n))}function t_(n){const e=Ds();if(e)return KC(e.sanitize(Ye.RESOURCE_URL,n)||"");if(As(n,"ResourceURL"))return KC(Fr(n));throw new T(904,!1)}function Ds(){const n=I();return n&&n[ph]}const Hc=new x("ENVIRONMENT_INITIALIZER"),r_=new x("INJECTOR",-1),o_=new x("INJECTOR_DEF_TYPES");class i_{get(e,t=is){if(t===is){const r=new Error(`NullInjectorError: No provider for ${Te(e)}!`);throw r.name="NullInjectorError",r}return t}}function NN(...n){return{\u0275providers:s_(0,n),\u0275fromNgModule:!0}}function s_(n,...e){const t=[],r=new Set;let o;return lo(e,i=>{const s=i;hf(s,t,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&a_(o,t),t}function a_(n,e){for(let t=0;t<n.length;t++){const{providers:o}=n[t];ff(o,i=>{e.push(i)})}}function hf(n,e,t,r){if(!(n=j(n)))return!1;let o=null,i=dv(n);const s=!i&&ye(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const c=n.ngModule;if(i=dv(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)hf(l,e,t,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let l;r.add(o);try{lo(i.imports,u=>{hf(u,e,t,r)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&a_(l,e)}if(!a){const l=so(o)||(()=>new o);e.push({provide:o,useFactory:l,deps:pe},{provide:o_,useValue:o,multi:!0},{provide:Hc,useValue:()=>M(o),multi:!0})}const c=i.providers;null==c||a||ff(c,u=>{e.push(u)})}}return o!==n&&void 0!==n.providers}function ff(n,e){for(let t of n)ah(t)&&(t=t.\u0275providers),Array.isArray(t)?ff(t,e):e(t)}const ON=Ie({provide:String,useValue:Ie});function pf(n){return null!==n&&"object"==typeof n&&ON in n}function ho(n){return"function"==typeof n}const gf=new x("Set Injector scope."),Vc={},xN={};let mf;function Bc(){return void 0===mf&&(mf=new i_),mf}class Vn{}class u_ extends Vn{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vf(e,s=>this.processProvider(s)),this.records.set(r_,Xo(void 0,this)),o.has("environment")&&this.records.set(Vn,Xo(void 0,this));const i=this.records.get(gf);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(o_.multi,pe,G.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Po(this),r=on(void 0);try{return e()}finally{Po(t),on(r)}}get(e,t=is,r=G.Default){this.assertNotDestroyed(),r=uc(r);const o=Po(this),i=on(void 0);try{if(!(r&G.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function VN(n){return"function"==typeof n||"object"==typeof n&&n instanceof x}(e)&&ac(e);a=c&&this.injectableDefInScope(c)?Xo(yf(e),Vc):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&G.Self?Bc():this.parent).get(e,t=r&G.Optional&&t===is?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[lc]=s[lc]||[]).unshift(Te(e)),o)throw s;return function dM(n,e,t,r){const o=n[lc];throw e[pv]&&o.unshift(e[pv]),n.message=function hM(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==cM?n.slice(2):n;let o=Te(e);if(Array.isArray(e))o=e.map(Te).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Te(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(aM,"\n  ")}`}("\n"+n.message,o,t,r),n[sM]=o,n[lc]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{on(i),Po(o)}}resolveInjectorInitializers(){const e=Po(this),t=on(void 0);try{const r=this.get(Hc.multi,pe,G.Self);for(const o of r)o()}finally{Po(e),on(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Te(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new T(205,!1)}processProvider(e){let t=ho(e=j(e))?e:j(e&&e.provide);const r=function LN(n){return pf(n)?Xo(void 0,n.useValue):Xo(d_(n),Vc)}(e);if(ho(e)||!0!==e.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=Xo(void 0,Vc,!0),o.factory=()=>dh(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Vc&&(t.value=xN,t.value=t.factory()),"object"==typeof t.value&&t.value&&function HN(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=j(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function yf(n){const e=ac(n),t=null!==e?e.factory:so(n);if(null!==t)return t;if(n instanceof x)throw new T(204,!1);if(n instanceof Function)return function FN(n){const e=n.length;if(e>0)throw function vs(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new T(204,!1);const t=function rM(n){return n&&(n[cc]||n[hv])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new T(204,!1)}function d_(n,e,t){let r;if(ho(n)){const o=j(n);return so(o)||yf(o)}if(pf(n))r=()=>j(n.useValue);else if(function l_(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...dh(n.deps||[]));else if(function c_(n){return!(!n||!n.useExisting)}(n))r=()=>M(j(n.useExisting));else{const o=j(n&&(n.useClass||n.provide));if(!function UN(n){return!!n.deps}(n))return so(o)||yf(o);r=()=>new o(...dh(n.deps))}return r}function Xo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function vf(n,e){for(const t of n)Array.isArray(t)?vf(t,e):t&&ah(t)?vf(t.\u0275providers,e):e(t)}class BN{}class h_{}class jN{resolveComponentFactory(e){throw function $N(n){const e=Error(`No component factory found for ${Te(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Rs=(()=>{class n{}return n.NULL=new jN,n})();function GN(){return Zo(dt(),I())}function Zo(n,e){return new Wt(Kt(n,e))}let Wt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=GN,n})();function zN(n){return n instanceof Wt?n.nativeElement:n}class p_{}let pr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function KN(){const n=I(),t=Lt(dt().index,n);return(zt(t)?t:n)[oe]}(),n})(),qN=(()=>{class n{}return n.\u0275prov=V({token:n,providedIn:"root",factory:()=>null}),n})();class Ms{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const WN=new Ms("15.2.10"),Cf={},_f="ngOriginalError";function Ef(n){return n[_f]}class ei{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ef(e);for(;t&&Ef(t);)t=Ef(t);return t||null}}function gr(n){return n instanceof Function?n():n}function m_(n,e,t){let r=n.length;for(;;){const o=n.indexOf(e,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}const y_="ng-template";function iO(n,e,t){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(t&&"class"===i&&-1!==m_(s.toLowerCase(),e,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function v_(n){return 4===n.type&&n.value!==y_}function sO(n,e,t){return e===(4!==n.type||t?n.value:y_)}function aO(n,e,t){let r=4;const o=n.attrs||[],i=function uO(n){for(let e=0;e<n.length;e++)if(zv(n[e]))return e;return n.length}(o);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!sO(n,c,t)||""===c&&1===e.length){if(In(r))return!1;s=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!iO(n.attrs,l,t)){if(In(r))return!1;s=!0}continue}const d=cO(8&r?"class":c,o,v_(n),t);if(-1===d){if(In(r))return!1;s=!0;continue}if(""!==l){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==m_(f,l,0)||2&r&&l!==h){if(In(r))return!1;s=!0}}}}else{if(!s&&!In(r)&&!In(c))return!1;if(s&&In(c))continue;s=!1,r=c|1&r}}return In(r)||s}function In(n){return 0==(1&n)}function cO(n,e,t,r){if(null===e)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){const s=e[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function dO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function C_(n,e,t=!1){for(let r=0;r<e.length;r++)if(aO(n,e[r],t))return!0;return!1}function __(n,e){return n?":not("+e.trim()+")":e}function fO(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!In(s)&&(e+=__(i,o),o=""),r=s,i=i||!In(r);t++}return""!==o&&(e+=__(i,o)),e}const X={};function B(n){E_(de(),I(),bt()+n,!1)}function E_(n,e,t,r){if(!r)if(3==(3&e[te])){const i=n.preOrderCheckHooks;null!==i&&Ec(e,i,t)}else{const i=n.preOrderHooks;null!==i&&Ic(e,i,0,t)}ao(t)}function T_(n,e=null,t=null,r){const o=A_(n,e,t,r);return o.resolveInjectorInitializers(),o}function A_(n,e=null,t=null,r,o=new Set){const i=[t||pe,NN(n)];return r=r||("object"==typeof n?void 0:Te(n)),new u_(i,e||Bc(),r||null,o)}let Bn=(()=>{class n{static create(t,r){if(Array.isArray(t))return T_({name:""},r,t,"");{const o=t.name??"";return T_({name:o},t.parent,t.providers,o)}}}return n.THROW_IF_NOT_FOUND=is,n.NULL=new i_,n.\u0275prov=V({token:n,providedIn:"any",factory:()=>M(r_)}),n.__NG_ELEMENT_ID__=-1,n})();function w(n,e=G.Default){const t=I();return null===t?M(n,e):eC(dt(),t,j(n),e)}function P_(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r+1];if(-1!==i){const s=n.data[i];wh(t[r]),s.contentQueries(2,e[i],i)}}}function jc(n,e,t,r,o,i,s,a,c,l,u){const d=e.blueprint.slice();return d[ur]=o,d[te]=76|r,(null!==u||n&&1024&n[te])&&(d[te]|=1024),kv(d),d[Le]=d[Lo]=n,d[Be]=t,d[pc]=s||n&&n[pc],d[oe]=a||n&&n[oe],d[ph]=c||n&&n[ph]||null,d[fc]=l||n&&n[fc]||null,d[mt]=i,d[ds]=function Nk(){return kk++}(),d[Ev]=u,d[yt]=2==e.type?n[yt]:d,d}function ri(n,e,t,r,o){let i=n.data[e];if(null===i)i=function Af(n,e,t,r,o){const i=Pv(),s=Ch(),c=n.data[e]=function HO(n,e,t,r,o,i){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,t,e,r,o);return null===n.firstChild&&(n.firstChild=c),null!==i&&(s?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c,c.prev=i)),c}(n,e,t,r,o),function FM(){return J.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=t,i.value=r,i.attrs=o;const s=function fs(){const n=J.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return Un(i,!0),i}function ks(n,e,t,r){if(0===t)return-1;const o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function bf(n,e,t){Sh(e);try{const r=n.viewQuery;null!==r&&Ff(1,r,t);const o=n.template;null!==o&&x_(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&P_(n,e),n.staticViewQueries&&Ff(2,n.viewQuery,t);const i=n.components;null!==i&&function FO(n,e){for(let t=0;t<e.length;t++)iP(n,e[t])}(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[te]&=-5,Th()}}function Gc(n,e,t,r){const o=e[te];if(128!=(128&o)){Sh(e);try{kv(e),function Fv(n){return J.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&x_(n,e,t,2,r);const s=3==(3&o);if(s){const l=n.preOrderCheckHooks;null!==l&&Ec(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Ic(e,l,0,null),Ah(e,0)}if(function rP(n){for(let e=qh(n);null!==e;e=Wh(e)){if(!e[Iv])continue;const t=e[Ho];for(let r=0;r<t.length;r++){const o=t[r];512&o[te]||vh(o[Le],1),o[te]|=512}}}(e),function nP(n){for(let e=qh(n);null!==e;e=Wh(e))for(let t=Tt;t<e.length;t++){const r=e[t],o=r[N];Cc(r)&&Gc(o,r,o.template,r[Be])}}(e),null!==n.contentQueries&&P_(n,e),s){const l=n.contentCheckHooks;null!==l&&Ec(e,l)}else{const l=n.contentHooks;null!==l&&Ic(e,l,1),Ah(e,1)}!function PO(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)ao(~o);else{const i=o,s=t[++r],a=t[++r];LM(s,i),a(2,e[i])}}}finally{ao(-1)}}(n,e);const a=n.components;null!==a&&function xO(n,e){for(let t=0;t<e.length;t++)oP(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&Ff(2,c,r),s){const l=n.viewCheckHooks;null!==l&&Ec(e,l)}else{const l=n.viewHooks;null!==l&&Ic(e,l,2),Ah(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[te]&=-41,512&e[te]&&(e[te]&=-513,vh(e[Le],-1))}finally{Th()}}}function x_(n,e,t,r,o){const i=bt(),s=2&r;try{ao(-1),s&&e.length>Re&&E_(n,e,Re,!1),cn(s?2:0,o),t(r,o)}finally{ao(i),cn(s?3:1,o)}}function Df(n,e,t){if(mh(e)){const o=e.directiveEnd;for(let i=e.directiveStart;i<o;i++){const s=n.data[i];s.contentQueries&&s.contentQueries(1,t[i],i)}}}function Rf(n,e,t){Ov()&&(function KO(n,e,t,r){const o=t.directiveStart,i=t.directiveEnd;hs(t)&&function ZO(n,e,t){const r=Kt(e,n),o=F_(t),i=n[pc],s=zc(n,jc(n,o,null,t.onPush?32:16,r,e,i,i.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Ac(t,e),vt(r,e);const s=t.initialInputs;for(let a=o;a<i;a++){const c=n.data[a],l=co(e,n,a,t);vt(l,e),null!==s&&eP(0,a-o,l,c,0,s),En(c)&&(Lt(t.index,e)[Be]=co(e,n,a,t))}}(n,e,t,Kt(t,e)),64==(64&t.flags)&&B_(n,e,t))}function Mf(n,e,t=Kt){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?t(e,n):n[s];n[o++]=a}}}function F_(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=kf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function kf(n,e,t,r,o,i,s,a,c,l){const u=Re+r,d=u+o,h=function LO(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:X);return t}(u,d),f="function"==typeof l?l():l;return h[N]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function L_(n,e,t,r){const o=j_(e);null===t?o.push(r):(o.push(t),n.firstCreatePass&&G_(n).push(r,o.length-1))}function U_(n,e,t,r){for(let o in n)if(n.hasOwnProperty(o)){t=null===t?{}:t;const i=n[o];null===r?H_(t,e,o,i):r.hasOwnProperty(o)&&H_(t,e,r[o],i)}return t}function H_(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Nf(n,e,t,r){if(Ov()){const o=null===r?null:{"":-1},i=function WO(n,e){const t=n.directiveRegistry;let r=null,o=null;if(t)for(let i=0;i<t.length;i++){const s=t[i];if(C_(e,s.selectors,!1))if(r||(r=[]),En(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Of(n,e,a.length)}else r.unshift(s),Of(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,t);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&V_(n,e,t,s,o,a),o&&function QO(n,e,t){if(e){const r=n.localNames=[];for(let o=0;o<e.length;o+=2){const i=t[e[o+1]];if(null==i)throw new T(-301,!1);r.push(e[o],i)}}}(t,r,o)}t.mergedAttrs=gs(t.mergedAttrs,t.attrs)}function V_(n,e,t,r,o,i){for(let l=0;l<r.length;l++)Nh(Ac(t,e),n,r[l].type);!function JO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=ks(n,e,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];t.mergedAttrs=gs(t.mergedAttrs,u.hostAttrs),XO(n,t,e,c,u),YO(c,u,o),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),a=!0),c++}!function VO(n,e,t){const o=e.directiveEnd,i=n.data,s=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<o;u++){const d=i[u],h=t?t.get(d):null,g=h?h.outputs:null;c=U_(d.inputs,u,c,h?h.inputs:null),l=U_(d.outputs,u,l,g);const m=null===c||null===s||v_(e)?null:tP(c,u,s);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,i)}function B_(n,e,t){const r=t.directiveStart,o=t.directiveEnd,i=t.index,s=function UM(){return J.lFrame.currentDirectiveIndex}();try{ao(i);for(let a=r;a<o;a++){const c=n.data[a],l=e[a];Eh(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&qO(c,l)}}finally{ao(-1),Eh(s)}}function qO(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Of(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function YO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;En(e)&&(t[""]=n)}}function XO(n,e,t,r,o){n.data[r]=o;const i=o.factory||(o.factory=so(o.type)),s=new ps(i,En(o),w);n.blueprint[r]=s,t[r]=s,function GO(n,e,t,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function zO(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,i)}}(n,e,r,ks(n,t,o.hostVars,X),o)}function $n(n,e,t,r,o,i){const s=Kt(n,e);!function Pf(n,e,t,r,o,i,s){if(null==i)n.removeAttribute(e,o,t);else{const a=null==s?Y(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}(e[oe],s,i,n.value,t,r,o)}function eP(n,e,t,r,o,i){const s=i[e];if(null!==s){const a=r.setInput;for(let c=0;c<s.length;){const l=s[c++],u=s[c++],d=s[c++];null!==a?r.setInput(t,d,l,u):t[u]=d}}}function tP(n,e,t){let r=null,o=0;for(;o<t.length;){const i=t[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function $_(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function oP(n,e){const t=Lt(e,n);if(Cc(t)){const r=t[N];48&t[te]?Gc(r,t,r.template,t[Be]):t[io]>0&&xf(t)}}function xf(n){for(let r=qh(n);null!==r;r=Wh(r))for(let o=Tt;o<r.length;o++){const i=r[o];if(Cc(i))if(512&i[te]){const s=i[N];Gc(s,i,s.template,i[Be])}else i[io]>0&&xf(i)}const t=n[N].components;if(null!==t)for(let r=0;r<t.length;r++){const o=Lt(t[r],n);Cc(o)&&o[io]>0&&xf(o)}}function iP(n,e){const t=Lt(e,n),r=t[N];(function sP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),bf(r,t,t[Be])}function zc(n,e){return n[ls]?n[_v][Cn]=e:n[ls]=e,n[_v]=e,e}function Kc(n){for(;n;){n[te]|=32;const e=Ss(n);if(vM(n)&&!e)return n;n=e}return null}function qc(n,e,t,r=!0){const o=e[pc];o.begin&&o.begin();try{Gc(n,e,n.template,t)}catch(s){throw r&&K_(e,s),s}finally{o.end&&o.end()}}function Ff(n,e,t){wh(0),e(n,t)}function j_(n){return n[Fo]||(n[Fo]=[])}function G_(n){return n.cleanup||(n.cleanup=[])}function K_(n,e){const t=n[fc],r=t?t.get(ei,null):null;r&&r.handleError(e)}function Lf(n,e,t,r,o){for(let i=0;i<t.length;){const s=t[i++],a=t[i++],c=e[s],l=n.data[s];null!==l.setInput?l.setInput(c,o,r,a):c[a]=o}}function Wc(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=ih(o,a):2==i&&(r=ih(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function Qc(n,e,t,r,o=!1){for(;null!==t;){const i=e[t.index];if(null!==i&&r.push(ut(i)),_n(i))for(let a=Tt;a<i.length;a++){const c=i[a],l=c[N].firstChild;null!==l&&Qc(c[N],c,l,r)}const s=t.type;if(8&s)Qc(n,e,t.child,r);else if(32&s){const a=Kh(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=HC(e,t);if(Array.isArray(a))r.push(...a);else{const c=Ss(e[yt]);Qc(c[N],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}class Ns{get rootNodes(){const e=this._lView,t=e[N];return Qc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Be]}set context(e){this._lView[Be]=e}get destroyed(){return 128==(128&this._lView[te])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Le];if(_n(e)){const t=e[mc],r=t?t.indexOf(this):-1;r>-1&&(Jh(e,r),Rc(t,r))}this._attachedToViewContainer=!1}MC(this._lView[N],this._lView)}onDestroy(e){L_(this._lView[N],this._lView,null,e)}markForCheck(){Kc(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-65}reattach(){this._lView[te]|=64}detectChanges(){qc(this._lView[N],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new T(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qk(n,e){Ts(n,e,e[oe],2,null,null)}(this._lView[N],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new T(902,!1);this._appRef=e}}class aP extends Ns{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;qc(e[N],e,e[Be],!1)}checkNoChanges(){}get context(){return null}}class q_ extends Rs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ye(e);return new Os(t,this.ngModule)}}function W_(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class lP{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=uc(r);const o=this.injector.get(e,Cf,r);return o!==Cf||t===Cf?o:this.parentInjector.get(e,t,r)}}class Os extends h_{get inputs(){return W_(this.componentDef.inputs)}get outputs(){return W_(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function pO(n){return n.map(fO).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=(o=o||this.ngModule)instanceof Vn?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new lP(e,i):e,a=s.get(p_,null);if(null===a)throw new T(407,!1);const c=s.get(qN,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function UO(n,e,t){return n.selectRootElement(e,t===Fn.ShadowDom)}(l,r,this.componentDef.encapsulation):Yh(l,u,function cP(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=kf(0,null,null,1,0,null,null,null,null,null),g=jc(null,f,null,h,null,null,a,l,c,s,null);let m,v;Sh(g);try{const E=this.componentDef;let A,_=null;E.findHostDirectiveDefs?(A=[],_=new Map,E.findHostDirectiveDefs(E,A,_),A.push(E)):A=[E];const H=function dP(n,e){const t=n[N],r=Re;return n[r]=e,ri(t,r,2,"#host",null)}(g,d),le=function hP(n,e,t,r,o,i,s,a){const c=o[N];!function fP(n,e,t,r){for(const o of n)e.mergedAttrs=gs(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(Wc(e,e.mergedAttrs,!0),null!==t&&$C(r,t,e))}(r,n,e,s);const l=i.createRenderer(e,t),u=jc(o,F_(t),null,t.onPush?32:16,o[n.index],n,i,l,a||null,null,null);return c.firstCreatePass&&Of(c,n,r.length-1),zc(o,u),o[n.index]=u}(H,d,E,A,g,a,l);v=Mv(f,Re),d&&function gP(n,e,t,r){if(r)Dh(n,t,["ng-version",WN.full]);else{const{attrs:o,classes:i}=function gO(n){const e=[],t=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&e.push(i,n[++r]):8===o&&t.push(i);else{if(!In(o))break;o=i}r++}return{attrs:e,classes:t}}(e.selectors[0]);o&&Dh(n,t,o),i&&i.length>0&&BC(n,t,i.join(" "))}}(l,E,d,r),void 0!==t&&function mP(n,e,t){const r=n.projection=[];for(let o=0;o<e.length;o++){const i=t[o];r.push(null!=i?Array.from(i):null)}}(v,this.ngContentSelectors,t),m=function pP(n,e,t,r,o,i){const s=dt(),a=o[N],c=Kt(s,o);V_(a,o,s,t,null,r);for(let u=0;u<t.length;u++)vt(co(o,a,s.directiveStart+u,s),o);B_(a,o,s),c&&vt(c,o);const l=co(o,a,s.directiveStart+s.componentOffset,s);if(n[Be]=o[Be]=l,null!==i)for(const u of i)u(l,e);return Df(a,s,n),l}(le,E,A,_,g,[yP]),bf(f,g,null)}finally{Th()}return new uP(this.componentType,m,Zo(v,g),g,v)}}class uP extends BN{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new aP(o),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){const i=this._rootLView;Lf(i[N],i,o,e,t),Kc(Lt(this._tNode.index,i))}}get injector(){return new jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function yP(){const n=dt();_c(I()[N],n)}function ve(n){let e=function Q_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let o;if(En(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new T(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);const s=n;s.inputs=Uf(n.inputs),s.declaredInputs=Uf(n.declaredInputs),s.outputs=Uf(n.outputs);const a=o.hostBindings;a&&EP(n,a);const c=o.viewQuery,l=o.contentQueries;if(c&&CP(n,c),l&&_P(n,l),oh(n.inputs,o.inputs),oh(n.declaredInputs,o.declaredInputs),oh(n.outputs,o.outputs),En(o)&&o.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(n),a===ve&&(t=!1)}}e=Object.getPrototypeOf(e)}!function vP(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=gs(o.hostAttrs,t=gs(t,o.hostAttrs))}}(r)}function Uf(n){return n===cr?{}:n===pe?[]:n}function CP(n,e){const t=n.viewQuery;n.viewQuery=t?(r,o)=>{e(r,o),t(r,o)}:e}function _P(n,e){const t=n.contentQueries;n.contentQueries=t?(r,o,i)=>{e(r,o,i),t(r,o,i)}:e}function EP(n,e){const t=n.hostBindings;n.hostBindings=t?(r,o)=>{e(r,o),t(r,o)}:e}function Yc(n){return!!function Hf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ct(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Gn(n,e,t,r){const o=I();return Ct(o,Bo(),e)&&(de(),$n(Pe(),o,n,e,t,r)),Gn}function ii(n,e,t,r){return Ct(n,Bo(),t)?e+Y(t)+r:X}function Ce(n,e,t,r,o,i,s,a){const c=I(),l=de(),u=n+Re,d=l.firstCreatePass?function kP(n,e,t,r,o,i,s,a,c){const l=e.consts,u=ri(e,n,4,s||null,Or(l,a));Nf(e,t,u,Or(l,c)),_c(e,u);const d=u.tView=kf(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,o,i,s):l.data[u];Un(d,!1);const h=c[oe].createComment("");Pc(l,c,h,d),vt(h,c),zc(c,c[u]=$_(h,c,h,d)),yc(d)&&Rf(l,c,d),null!=s&&Mf(c,d,a)}function he(n,e,t){const r=I();return Ct(r,Bo(),e)&&function Qt(n,e,t,r,o,i,s,a){const c=Kt(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(Lf(n,t,u,r,o),hs(e)&&function $O(n,e){const t=Lt(e,n);16&t[te]||(t[te]|=32)}(t,e.index)):3&e.type&&(r=function BO(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=s?s(o,e.value||"",r):o,i.setProperty(c,r,o))}(de(),Pe(),r,n,e,r[oe],t,!1),he}function Vf(n,e,t,r,o){const s=o?"class":"style";Lf(n,t,e.inputs[s],s,r)}function b(n,e,t,r){const o=I(),i=de(),s=Re+n,a=o[oe],c=i.firstCreatePass?function PP(n,e,t,r,o,i){const s=e.consts,c=ri(e,n,2,r,Or(s,o));return Nf(e,t,c,Or(s,i)),null!==c.attrs&&Wc(c,c.attrs,!1),null!==c.mergedAttrs&&Wc(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,i,o,e,t,r):i.data[s],l=o[s]=Yh(a,e,function KM(){return J.lFrame.currentNamespace}()),u=yc(c);return Un(c,!0),$C(a,l,c),32!=(32&c.flags)&&Pc(i,o,l,c),0===function MM(){return J.lFrame.elementDepthCount}()&&vt(l,o),function kM(){J.lFrame.elementDepthCount++}(),u&&(Rf(i,o,c),Df(i,c,o)),null!==r&&Mf(o,c),b}function D(){let n=dt();Ch()?function _h(){J.lFrame.isParent=!1}():(n=n.parent,Un(n,!1));const e=n;!function NM(){J.lFrame.elementDepthCount--}();const t=de();return t.firstCreatePass&&(_c(t,n),mh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function YM(n){return 0!=(8&n.flags)}(e)&&Vf(t,e,I(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function JM(n){return 0!=(16&n.flags)}(e)&&Vf(t,e,I(),e.stylesWithoutHost,!1),D}function ie(n,e,t,r){return b(n,e,t,r),D(),ie}function po(){return I()}function xs(n){return!!n&&"function"==typeof n.then}const jf=function lE(n){return!!n&&"function"==typeof n.subscribe};function $e(n,e,t,r){const o=I(),i=de(),s=dt();return function dE(n,e,t,r,o,i,s){const a=yc(r),l=n.firstCreatePass&&G_(n),u=e[Be],d=j_(e);let h=!0;if(3&r.type||s){const m=Kt(r,e),v=s?s(m):m,E=d.length,A=s?H=>s(ut(H[r.index])):r.index;let _=null;if(!s&&a&&(_=function FP(n,e,t,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===t&&o[i+1]===r){const a=e[Fo],c=o[i+2];return a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(n,e,o,r.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=i,_.__ngLastListenerFn__=i,h=!1;else{i=fE(r,e,u,i,!1);const H=t.listen(v,o,i);d.push(i,H),l&&l.push(o,A,E,E+1)}}else i=fE(r,e,u,i,!1);const f=r.outputs;let g;if(h&&null!==f&&(g=f[o])){const m=g.length;if(m)for(let v=0;v<m;v+=2){const le=e[g[v]][g[v+1]].subscribe(i),We=d.length;d.push(i,le),l&&l.push(o,r.index,We,-(We+1))}}}(i,o,o[oe],s,n,e,r),$e}function hE(n,e,t,r){try{return cn(6,e,t),!1!==t(r)}catch(o){return K_(n,o),!1}finally{cn(7,e,t)}}function fE(n,e,t,r,o){return function i(s){if(s===Function)return r;Kc(n.componentOffset>-1?Lt(n.index,e):e);let c=hE(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)c=hE(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return o&&!1===c&&(s.preventDefault(),s.returnValue=!1),c}}function Je(n=1){return function VM(n){return(J.lFrame.contextLView=function BM(n,e){for(;n>0;)e=e[Lo],n--;return e}(n,J.lFrame.contextLView))[Be]}(n)}function Xc(n,e){return n<<17|e<<2}function Lr(n){return n>>17&32767}function zf(n){return 2|n}function go(n){return(131068&n)>>2}function Kf(n,e){return-131069&n|e<<2}function qf(n){return 1|n}function wE(n,e,t,r,o){const i=n[t+1],s=null===e;let a=r?Lr(i):go(i),c=!1;for(;0!==a&&(!1===c||s);){const u=n[a+1];zP(n[a],e)&&(c=!0,n[a+1]=r?qf(u):zf(u)),a=r?Lr(u):go(u)}c&&(n[t+1]=r?zf(i):qf(i))}function zP(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Wo(n,e)>=0}const rt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function SE(n){return n.substring(rt.key,rt.keyEnd)}function TE(n,e){const t=rt.textEnd;return t===e?-1:(e=rt.keyEnd=function QP(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,rt.key=e,t),fi(n,e,t))}function fi(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function yr(n,e){return function wn(n,e,t,r){const o=I(),i=de(),s=hr(2);i.firstUpdatePass&&OE(i,n,s,r),e!==X&&Ct(o,s,e)&&xE(i,i.data[bt()],o,o[oe],n,o[s+1]=function a0(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Te(Fr(n)))),n}(e,t),r,s)}(n,e,null,!0),yr}function Kn(n,e){for(let t=function qP(n){return function bE(n){rt.key=0,rt.keyEnd=0,rt.value=0,rt.valueEnd=0,rt.textEnd=n.length}(n),TE(n,fi(n,0,rt.textEnd))}(e);t>=0;t=TE(e,t))qt(n,SE(e),!0)}function Sn(n,e,t,r){const o=de(),i=hr(2);o.firstUpdatePass&&OE(o,null,i,r);const s=I();if(t!==X&&Ct(s,i,t)){const a=o.data[bt()];if(LE(a,r)&&!NE(o,i)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=ih(c,t||"")),Vf(o,a,s,t,r)}else!function s0(n,e,t,r,o,i,s,a){o===X&&(o=pe);let c=0,l=0,u=0<o.length?o[0]:null,d=0<i.length?i[0]:null;for(;null!==u||null!==d;){const h=c<o.length?o[c+1]:void 0,f=l<i.length?i[l+1]:void 0;let m,g=null;u===d?(c+=2,l+=2,h!==f&&(g=d,m=f)):null===d||null!==u&&u<d?(c+=2,g=u):(l+=2,g=d,m=f),null!==g&&xE(n,e,t,r,g,m,s,a),u=c<o.length?o[c]:null,d=l<i.length?i[l]:null}}(o,a,s,s[oe],s[i+1],s[i+1]=function r0(n,e,t){if(null==t||""===t)return pe;const r=[],o=Fr(t);if(Array.isArray(o))for(let i=0;i<o.length;i++)n(r,o[i],!0);else if("object"==typeof o)for(const i in o)o.hasOwnProperty(i)&&n(r,i,o[i]);else"string"==typeof o&&e(r,o);return r}(n,e,t),r,i)}}function NE(n,e){return e>=n.expandoStartIndex}function OE(n,e,t,r){const o=n.data;if(null===o[t+1]){const i=o[bt()],s=NE(n,t);LE(i,r)&&null===e&&!s&&(e=!1),e=function ZP(n,e,t,r){const o=function Ih(n){const e=J.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let i=r?e.residualClasses:e.residualStyles;if(null===o)0===(r?e.classBindings:e.styleBindings)&&(t=Fs(t=Wf(null,n,e,t,r),e.attrs,r),i=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==o)if(t=Wf(o,n,e,t,r),null===i){let c=function e0(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==go(r))return n[Lr(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=Wf(null,n,e,c[1],r),c=Fs(c,e.attrs,r),function t0(n,e,t,r){n[Lr(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else i=function n0(n,e,t){let r;const o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++)r=Fs(r,n[i].hostAttrs,t);return Fs(r,e.attrs,t)}(n,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),t}(o,i,e,r),function jP(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Lr(s),c=go(s);n[r]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||Wo(t,u)>0)&&(l=!0)):u=t,o)if(0!==c){const h=Lr(n[a+1]);n[r+1]=Xc(h,a),0!==h&&(n[h+1]=Kf(n[h+1],r)),n[a+1]=function BP(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Xc(a,0),0!==a&&(n[a+1]=Kf(n[a+1],r)),a=r;else n[r+1]=Xc(c,0),0===a?a=r:n[c+1]=Kf(n[c+1],r),c=r;l&&(n[r+1]=zf(n[r+1])),wE(n,u,r,!0),wE(n,u,r,!1),function GP(n,e,t,r,o){const i=o?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof e&&Wo(i,e)>=0&&(t[r+1]=qf(t[r+1]))}(e,u,n,r,i),s=Xc(a,c),i?e.classBindings=s:e.styleBindings=s}(o,i,e,t,s,r)}}function Wf(n,e,t,r,o){let i=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(i=e[a],r=Fs(r,i.hostAttrs,o),i!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Fs(n,e,t){const r=t?1:2;let o=-1;if(null!==e)for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?o=s:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qt(n,s,!!t||e[++i]))}return void 0===n?null:n}function o0(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&qt(n,r,t)}function xE(n,e,t,r,o,i,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function $P(n){return 1==(1&n)}(l)?FE(c,e,t,o,go(l),s):void 0;Zc(u)||(Zc(i)||function VP(n){return 2==(2&n)}(l)&&(i=FE(c,null,t,o,a,s)),function rN(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=-1===r.indexOf("-")?void 0:Ut.DashCase;null==o?n.removeStyle(t,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Ut.Important),n.setStyle(t,r,o,i))}}(r,s,vc(bt(),t),o,i))}function FE(n,e,t,r,o,i){const s=null===e;let a;for(;o>0;){const c=n[o],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=t[o+1];h===X&&(h=d?pe:void 0);let f=d?Fh(h,r):u===r?h:void 0;if(l&&!Zc(f)&&(f=Fh(c,r)),Zc(f)&&(a=f,s))return a;const g=n[o+1];o=s?Lr(g):go(g)}if(null!==e){let c=i?e.residualClasses:e.residualStyles;null!=c&&(a=Fh(c,r))}return a}function Zc(n){return void 0!==n}function LE(n,e){return 0!=(n.flags&(e?8:16))}function O(n,e=""){const t=I(),r=de(),o=n+Re,i=r.firstCreatePass?ri(r,o,1,e,null):r.data[o],s=t[o]=function Qh(n,e){return n.createText(e)}(t[oe],e);Pc(r,t,s,i),Un(i,!1)}function mo(n){return dn("",n,""),mo}function dn(n,e,t){const r=I(),o=ii(r,n,e,t);return o!==X&&function mr(n,e,t){const r=vc(e,n);!function DC(n,e,t){n.setValue(e,t)}(n[oe],r,t)}(r,bt(),o),dn}function Qf(n,e,t){Sn(qt,Kn,ii(I(),n,e,t),!0)}const gi="en-US";let iI=gi;function Xf(n,e,t,r,o){if(n=j(n),Array.isArray(n))for(let i=0;i<n.length;i++)Xf(n[i],e,t,r,o);else{const i=de(),s=I();let a=ho(n)?n:j(n.provide),c=d_(n);const l=dt(),u=1048575&l.providerIndexes,d=l.directiveStart,h=l.providerIndexes>>20;if(ho(n)||!n.multi){const f=new ps(c,o,w),g=ep(a,e,o?u:u+h,d);-1===g?(Nh(Ac(l,s),i,a),Zf(i,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,o&&(l.providerIndexes+=1048576),t.push(f),s.push(f)):(t[g]=f,s[g]=f)}else{const f=ep(a,e,u+h,d),g=ep(a,e,u,u+h),v=g>=0&&t[g];if(o&&!v||!o&&!(f>=0&&t[f])){Nh(Ac(l,s),i,a);const E=function Sx(n,e,t,r,o){const i=new ps(n,t,w);return i.multi=[],i.index=e,i.componentProviders=0,MI(i,o,r&&!t),i}(o?wx:Ix,t.length,o,r,c);!o&&v&&(t[g].providerFactory=E),Zf(i,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,o&&(l.providerIndexes+=1048576),t.push(E),s.push(E)}else Zf(i,n,f>-1?f:g,MI(t[o?g:f],c,!o&&r));!o&&r&&v&&t[g].componentProviders++}}}function Zf(n,e,t,r){const o=ho(e),i=function PN(n){return!!n.useClass}(e);if(o||i){const c=(i?j(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function MI(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ep(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function Ix(n,e,t,r){return tp(this.multi,[])}function wx(n,e,t,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=co(t,t[N],this.providerFactory.index,r);i=a.slice(0,s),tp(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],tp(o,i);return i}function tp(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Oe(n,e=[]){return t=>{t.providersResolver=(r,o)=>function Ex(n,e,t){const r=de();if(r.firstCreatePass){const o=En(n);Xf(t,r.data,r.blueprint,o,!0),Xf(e,r.data,r.blueprint,o,!1)}}(r,o?o(n):n,e)}}class mi{}class kI{}class NI extends mi{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new q_(this);const r=Gt(e);this._bootstrapComponents=gr(r.bootstrap),this._r3Injector=A_(e,t,[{provide:mi,useValue:this},{provide:Rs,useValue:this.componentFactoryResolver}],Te(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class np extends kI{constructor(e){super(),this.moduleType=e}create(e){return new NI(this.moduleType,e)}}class Ax extends mi{constructor(e,t,r){super(),this.componentFactoryResolver=new q_(this),this.instance=null;const o=new u_([...e,{provide:mi,useValue:this},{provide:Rs,useValue:this.componentFactoryResolver}],t||Bc(),r,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ol(n,e,t=null){return new Ax(n,e,t).injector}let bx=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=s_(0,t.type),o=r.length>0?ol([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,o)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(M(Vn))}),n})();function OI(n){n.getStandaloneInjector=e=>e.get(bx).getOrCreateStandaloneInjector(n)}function VI(n,e,t,r){return function BI(n,e,t,r,o,i){const s=e+t;return Ct(n,s,o)?function jn(n,e,t){return n[e]=t}(n,s+1,i?r.call(i,o):r(o)):function $s(n,e){const t=n[e];return t===X?void 0:t}(n,s+1)}(I(),function At(){const n=J.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r)}function op(n){return e=>{setTimeout(n,void 0,e)}}const He=class Xx extends nn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=op(i),o&&(o=op(o)),s&&(s=op(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof tn&&e.add(a),a}};function Zx(){return this._results[Symbol.iterator]()}class ip{get changes(){return this._changes||(this._changes=new He)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ip.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Zx)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const o=function ln(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function ak(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],i=e[r];if(t&&(o=t(o),i=t(i)),i!==o)return!1}return!0}(r._results,o,t))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let vr=(()=>{class n{}return n.__NG_ELEMENT_ID__=nF,n})();const eF=vr,tF=class extends eF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tView,o=jc(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);o[us]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[Ln];return null!==s&&(o[Ln]=s.createEmbeddedView(r)),bf(r,o,e),new Ns(o)}};function nF(){return il(dt(),I())}function il(n,e){return 4&n.type?new tF(e,n,Zo(n,e)):null}let Tn=(()=>{class n{}return n.__NG_ELEMENT_ID__=rF,n})();function rF(){return WI(dt(),I())}const oF=Tn,KI=class extends oF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Zo(this._hostTNode,this._hostLView)}get injector(){return new jo(this._hostTNode,this._hostLView)}get parentInjector(){const e=kh(this._hostTNode,this._hostLView);if(Wv(e)){const t=Sc(e,this._hostLView),r=wc(e);return new jo(t[N].data[r+8],t)}return new jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=qI(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Tt}createEmbeddedView(e,t,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=e.createEmbeddedView(t||{},i);return this.insert(s,o),s}createComponent(e,t,r,o,i){const s=e&&!function ys(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,o=d.projectableNodes,i=d.environmentInjector||d.ngModuleRef}const c=s?e:new Os(ye(e)),l=r||this.parentInjector;if(!i&&null==c.ngModule){const h=(s?l:this.parentInjector).get(Vn,null);h&&(i=h)}const u=c.create(l,o,void 0,i);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,o=r[N];if(function RM(n){return _n(n[Le])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[Le],h=new KI(d,d[mt],d[Le]);h.detach(h.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function Qk(n,e,t,r){const o=Tt+r,i=t.length;r>0&&(t[o-1][Cn]=e),r<i-Tt?(e[Cn]=t[o],sC(t,Tt+r,e)):(t.push(e),e[Cn]=null),e[Le]=t;const s=e[us];null!==s&&t!==s&&function Yk(n,e){const t=n[Ho];e[yt]!==e[Le][Le][yt]&&(n[Iv]=!0),null===t?n[Ho]=[e]:t.push(e)}(s,e);const a=e[Ln];null!==a&&a.insertView(n),e[te]|=64}(o,r,s,i);const a=ef(i,s),c=r[oe],l=Oc(c,s[gc]);return null!==l&&function Kk(n,e,t,r,o,i){r[ur]=o,r[mt]=e,Ts(n,r,t,1,o,i)}(o,s[mt],c,r,l,a),e.attachToViewContainerRef(),sC(sp(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=qI(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Jh(this._lContainer,t);r&&(Rc(sp(this._lContainer),t),MC(r[N],r))}detach(e){const t=this._adjustIndex(e,-1),r=Jh(this._lContainer,t);return r&&null!=Rc(sp(this._lContainer),t)?new Ns(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qI(n){return n[mc]}function sp(n){return n[mc]||(n[mc]=[])}function WI(n,e){let t;const r=e[n.index];if(_n(r))t=r;else{let o;if(8&n.type)o=ut(r);else{const i=e[oe];o=i.createComment("");const s=Kt(n,e);uo(i,Oc(i,s),o,function eN(n,e){return n.nextSibling(e)}(i,s),!1)}e[n.index]=t=$_(r,e,o,n),zc(e,t)}return new KI(t,n,e)}class ap{constructor(e){this.queryList=e,this.matches=null}clone(){return new ap(this.queryList)}setDirty(){this.queryList.setDirty()}}class cp{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,o=[];for(let i=0;i<r;i++){const s=t.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new cp(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==nw(e,t).matches&&this.queries[t].setDirty()}}class QI{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class lp{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const o=null!==t?t.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,null!==t?t.push(i):t=[i])}return null!==t?new lp(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class up{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new up(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(e,t,iF(t,i)),this.matchTNodeWithReadOption(e,t,bc(t,e,i,!1,!1))}else r===vr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,bc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===Wt||o===Tn||o===vr&&4&t.type)this.addMatch(t.index,-2);else{const i=bc(t,e,o,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function iF(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function aF(n,e,t,r){return-1===t?function sF(n,e){return 11&n.type?Zo(n,e):4&n.type?il(n,e):null}(e,n):-2===t?function cF(n,e,t){return t===Wt?Zo(e,n):t===vr?il(e,n):t===Tn?WI(e,n):void 0}(n,e,r):co(n,n[N],t,e)}function YI(n,e,t,r){const o=e[Ln].queries[r];if(null===o.matches){const i=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:aF(e,i[l],s[c+1],t.metadata.read))}o.matches=a}return o.matches}function dp(n,e,t,r){const o=n.queries.getByIndex(t),i=o.matches;if(null!==i){const s=YI(n,e,o,t);for(let a=0;a<i.length;a+=2){const c=i[a];if(c>0)r.push(s[a/2]);else{const l=i[a+1],u=e[-c];for(let d=Tt;d<u.length;d++){const h=u[d];h[us]===h[Le]&&dp(h[N],h,l,r)}if(null!==u[Ho]){const d=u[Ho];for(let h=0;h<d.length;h++){const f=d[h];dp(f[N],f,l,r)}}}}}return r}function JI(n){const e=I(),t=de(),r=Uv();wh(r+1);const o=nw(t,r);if(n.dirty&&function DM(n){return 4==(4&n[te])}(e)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const i=o.crossesNgTemplate?dp(t,e,r,[]):YI(t,e,o,r);n.reset(i,zN),n.notifyOnChanges()}return!0}return!1}function XI(n,e,t,r){const o=de();if(o.firstCreatePass){const i=dt();(function tw(n,e,t){null===n.queries&&(n.queries=new lp),n.queries.track(new up(e,t))})(o,new QI(e,t,r),i.index),function dF(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(o,n),2==(2&t)&&(o.staticContentQueries=!0)}!function ew(n,e,t){const r=new ip(4==(4&t));L_(n,e,r,r.destroy),null===e[Ln]&&(e[Ln]=new cp),e[Ln].queries.push(new ap(r))}(o,I(),t)}function nw(n,e){return n.queries.getByIndex(e)}function al(...n){}const cl=new x("Application Initializer");let ll=(()=>{class n{constructor(t){this.appInits=t,this.resolve=al,this.reject=al,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(xs(i))t.push(i);else if(jf(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(M(cl,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zs=new x("AppId",{providedIn:"root",factory:function _w(){return`${yp()}${yp()}${yp()}`}});function yp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ew=new x("Platform Initializer"),vp=new x("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let NF=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Cr=new x("LocaleId",{providedIn:"root",factory:()=>re(Cr,G.Optional|G.SkipSelf)||function OF(){return typeof $localize<"u"&&$localize.locale||gi}()});class xF{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Iw=(()=>{class n{compileModuleSync(t){return new np(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),i=gr(Gt(t).declarations).reduce((s,a)=>{const c=ye(a);return c&&s.push(new Os(c)),s},[]);return new xF(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UF=(()=>Promise.resolve(0))();function Cp(n){typeof Zone>"u"?UF.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class je{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1),typeof Zone>"u")throw new T(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function HF(){let n=De.requestAnimationFrame,e=De.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function $F(n){const e=()=>{!function BF(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(De,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Ep(n),n.isCheckStableRunning=!0,_p(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Ep(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,a)=>{try{return Tw(n),t.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),Aw(n)}},onInvoke:(t,r,o,i,s,a,c)=>{try{return Tw(n),t.invoke(o,i,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),Aw(n)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Ep(n),_p(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!je.isInAngularZone())throw new T(909,!1)}static assertNotInAngularZone(){if(je.isInAngularZone())throw new T(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,VF,al,al);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const VF={};function _p(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ep(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Tw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Aw(n){n._nesting--,_p(n)}class jF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new He,this.onMicrotaskEmpty=new He,this.onStable=new He,this.onError=new He}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}}const bw=new x(""),ul=new x("");let Sp,Ip=(()=>{class n{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sp||(function GF(n){Sp=n}(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{je.assertNotInAngularZone(),Cp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cp(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}}return n.\u0275fac=function(t){return new(t||n)(M(je),M(wp),M(ul))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),wp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Sp?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const _r=!1;let Ur=null;const Dw=new x("AllowMultipleToken"),Tp=new x("PlatformDestroyListeners"),Rw=new x("appBootstrapListener");class Mw{constructor(e,t){this.name=e,this.token=t}}function Nw(n,e,t=[]){const r=`Platform: ${e}`,o=new x(r);return(i=[])=>{let s=Ap();if(!s||s.injector.get(Dw,!1)){const a=[...t,...i,{provide:o,useValue:!0}];n?n(a):function qF(n){if(Ur&&!Ur.get(Dw,!1))throw new T(400,!1);Ur=n;const e=n.get(Pw);(function kw(n){const e=n.get(Ew,null);e&&e.forEach(t=>t())})(n)}(function Ow(n=[],e){return Bn.create({name:e,providers:[{provide:gf,useValue:"platform"},{provide:Tp,useValue:new Set([()=>Ur=null])},...n]})}(a,r))}return function QF(n){const e=Ap();if(!e)throw new T(401,!1);return e}()}}function Ap(){return Ur?.get(Pw)??null}let Pw=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const o=function Fw(n,e){let t;return t="noop"===n?new jF:("zone.js"===n?void 0:n)||new je(e),t}(r?.ngZone,function xw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:je,useValue:o}];return o.run(()=>{const s=Bn.create({providers:i,parent:this.injector,name:t.moduleType.name}),a=t.create(s),c=a.injector.get(ei,null);if(!c)throw new T(402,!1);return o.runOutsideAngular(()=>{const l=o.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{hl(this._modules,a),l.unsubscribe()})}),function Lw(n,e,t){try{const r=t();return xs(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(c,o,()=>{const l=a.injector.get(ll);return l.runInitializers(),l.donePromise.then(()=>(function sI(n){rn(n,"Expected localeId to be defined"),"string"==typeof n&&(iI=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Cr,gi)||gi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const o=Uw({},r);return function zF(n,e,t){const r=new np(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(t){const r=t.injector.get(dl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new T(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new T(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Tp,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(M(Bn))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Uw(n,e){return Array.isArray(e)?e.reduce(Uw,n):{...n,...e}}let dl=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,o){this._zone=t,this._injector=r,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new Ve(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new Ve(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{je.assertNotInAngularZone(),Cp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{je.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=function WR(...n){const e=os(n),t=function BR(n,e){return"number"==typeof nh(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Bt(r[0]):Oo(t)(fe(r,e)):vn}(i,s.pipe(function QR(n={}){const{connector:e=(()=>new nn),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=n;return i=>{let s,a,c,l=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,u=d=!1},g=()=>{const m=s;f(),m?.unsubscribe()};return tt((m,v)=>{l++,!d&&!u&&h();const E=c=c??e();v.add(()=>{l--,0===l&&!d&&!u&&(a=rh(g,o))}),E.subscribe(v),!s&&l>0&&(s=new rs({next:A=>E.next(A),error:A=>{d=!0,h(),a=rh(f,t,A),E.error(A)},complete:()=>{u=!0,h(),a=rh(f,r),E.complete()}}),Bt(m).subscribe(s))})(i)}}()))}bootstrap(t,r){const o=t instanceof h_;if(!this._injector.get(ll).done){!o&&function xo(n){const e=ye(n)||gt(n)||Ft(n);return null!==e&&e.standalone}(t);throw new T(405,_r)}let s;s=o?t:this._injector.get(Rs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function KF(n){return n.isBoundToModule}(s)?void 0:this._injector.get(mi),l=s.create(Bn.NULL,[],r||s.selector,a),u=l.location.nativeElement,d=l.injector.get(bw,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),hl(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new T(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;hl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(Rw,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new T(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(M(je),M(Vn),M(ei))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hl(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let fl=(()=>{class n{}return n.__NG_ELEMENT_ID__=JF,n})();function JF(n){return function XF(n,e,t){if(hs(n)&&!t){const r=Lt(n.index,e);return new Ns(r,r)}return 47&n.type?new Ns(e[yt],e):null}(dt(),I(),16==(16&n))}class jw{constructor(){}supports(e){return Yc(e)}create(e){return new oL(e)}}const rL=(n,e)=>e;class oL{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||rL}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){const s=!r||t&&t.currentIndex<zw(r,o,i)?t:r,a=zw(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)o++;else{i||(i=[]);const l=a-o,u=c-o;if(l!=u){for(let h=0;h<l;h++){const f=h<i.length?i[h]:i[h]=0,g=f+h;u<=g&&g<l&&(i[h]=f+1)}i[s.previousIndex]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Yc(e))throw new T(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,i,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)):(t=this._mismatch(t,i,s,a),r=!0),t=t._next}else o=0,function DP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(o,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,o),r=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new iL(t,r),i,o),e}_verifyReinsertion(e,t,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,i=e._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const o=null===t?this._itHead:t._next;return e._next=o,e._prev=t,null===o?this._itTail=e:o._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Gw),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class iL{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sL{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Gw{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new sL,this.map.set(t,r)),r.add(e)}get(e,t){const o=this.map.get(e);return o?o.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zw(n,e,t){const r=n.previousIndex;if(null===r)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}function qw(){return new ml([new jw])}let ml=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||qw()),deps:[[n,new _s,new Cs]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(null!=r)return r;throw new T(901,!1)}}return n.\u0275prov=V({token:n,providedIn:"root",factory:qw}),n})();const dL=Nw(null,"core",[]);let hL=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(M(dl))},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({}),n})();function Ci(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let kp=null;function Er(){return kp}class gL{}const _t=new x("DocumentToken");let Np=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(){return function mL(){return M(Qw)}()},providedIn:"platform"}),n})();const yL=new x("Location Initialized");let Qw=(()=>{class n extends Np{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Er().getBaseHref(this._doc)}onPopState(t){const r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){Yw()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){Yw()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(M(_t))},n.\u0275prov=V({token:n,factory:function(){return function vL(){return new Qw(M(_t))}()},providedIn:"platform"}),n})();function Yw(){return!!window.history.pushState}function Op(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Jw(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ir(n){return n&&"?"!==n[0]?"?"+n:n}let Co=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(){return re(Zw)},providedIn:"root"}),n})();const Xw=new x("appBaseHref");let Zw=(()=>{class n extends Co{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??re(_t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Op(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ir(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){const s=this.prepareExternalUrl(o+Ir(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){const s=this.prepareExternalUrl(o+Ir(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(M(Np),M(Xw,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CL=(()=>{class n extends Co{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Op(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+Ir(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+Ir(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(M(Np),M(Xw,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),_i=(()=>{class n{constructor(t){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function IL(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Jw(eS(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ir(r))}normalize(t){return n.stripTrailingSlash(function EL(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,eS(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ir,n.joinWithSlash=Op,n.stripTrailingSlash=Jw,n.\u0275fac=function(t){return new(t||n)(M(Co))},n.\u0275prov=V({token:n,factory:function(){return function _L(){return new _i(M(Co))}()},providedIn:"root"}),n})();function eS(n){return n.replace(/\/index.html$/,"")}function lS(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}class a1{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fS=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new a1(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),pS(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{pS(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(w(Tn),w(vr),w(ml))},n.\u0275dir=K({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function pS(n,e){n.context.$implicit=e.item}let Qs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new l1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(w(Tn),w(vr))},n.\u0275dir=K({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class l1{constructor(){this.$implicit=null,this.ngIf=null}}function gS(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Te(e)}'.`)}let vS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({}),n})();let L1=(()=>{class n{}return n.\u0275prov=V({token:n,providedIn:"root",factory:()=>new U1(M(_t),window)}),n})();class U1{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function H1(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_S(this.window.history)||_S(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function _S(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ES{}class hU extends gL{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Yp extends hU{static makeCurrent(){!function pL(n){kp||(kp=n)}(new Yp)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fU(){return Js=Js||document.querySelector("base"),Js?Js.getAttribute("href"):null}();return null==t?null:function pU(n){Dl=Dl||document.createElement("a"),Dl.setAttribute("href",n);const e=Dl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return lS(document.cookie,e)}}let Dl,Js=null;const AS=new x("TRANSITION_ID"),mU=[{provide:cl,useFactory:function gU(n,e,t){return()=>{t.get(ll).donePromise.then(()=>{const r=Er(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[AS,_t,Bn],multi:!0}];let vU=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const Rl=new x("EventManagerPlugins");let Ml=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(M(Rl),M(je))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class bS{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=Er().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let DS=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let i=o.get(t)??0;return i+=r,i>0?o.set(t,i):o.delete(t),i}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),Xs=(()=>{class n extends DS{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(i=>i.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const i=this.styleRef.get(r);i?i.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(M(_t))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const Jp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xp=/%COMP%/g,kS=new x("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function NS(n,e){return e.flat(100).map(t=>t.replace(Xp,n))}function OS(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Zp=(()=>{class n{constructor(t,r,o,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=i,this.rendererByCompId=new Map,this.defaultRenderer=new eg(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof FS?o.applyToHost(t):o instanceof tg&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.eventManager,a=this.sharedStylesHost,c=this.removeStylesOnCompDestory;switch(r.encapsulation){case Fn.Emulated:i=new FS(s,a,r,this.appId,c);break;case Fn.ShadowDom:return new TU(s,a,t,r);default:i=new tg(s,a,r,c)}i.onDestroy=()=>o.delete(r.id),o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(M(Ml),M(Xs),M(zs),M(kS))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class eg{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Jp[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const i=Jp[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Jp[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Ut.DashCase|Ut.Important)?e.style.setProperty(t,r,o&Ut.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ut.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,OS(r)):this.eventManager.addEventListener(e,t,OS(r))}}function xS(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class TU extends eg{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=NS(o.id,o.styles);for(const s of i){const a=document.createElement("style");a.textContent=s,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class tg extends eg{constructor(e,t,r,o,i=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=NS(i,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class FS extends tg{constructor(e,t,r,o,i){const s=o+"-"+r.id;super(e,t,r,i,s),this.contentAttr=function IU(n){return"_ngcontent-%COMP%".replace(Xp,n)}(s),this.hostAttr=function wU(n){return"_nghost-%COMP%".replace(Xp,n)}(s)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let AU=(()=>{class n extends bS{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(M(_t))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const LS=["alt","control","meta","shift"],bU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let RU=(()=>{class n extends bS{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Er().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),LS.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=bU[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),LS.forEach(s=>{s!==o&&(0,DU[s])(t)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(M(_t))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const OU=Nw(dL,"browser",[{provide:vp,useValue:"browser"},{provide:Ew,useValue:function MU(){Yp.makeCurrent()},multi:!0},{provide:_t,useFactory:function NU(){return function cN(n){sf=n}(document),document},deps:[]}]),VS=new x(""),BS=[{provide:ul,useClass:class yU{addToWindow(e){De.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},De.getAllAngularTestabilities=()=>e.getAllTestabilities(),De.getAllAngularRootElements=()=>e.getAllRootElements(),De.frameworkStabilizers||(De.frameworkStabilizers=[]),De.frameworkStabilizers.push(r=>{const o=De.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(c){s=s||c,i--,0==i&&r(s)};o.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Er().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:bw,useClass:Ip,deps:[je,wp,ul]},{provide:Ip,useClass:Ip,deps:[je,wp,ul]}],$S=[{provide:gf,useValue:"root"},{provide:ei,useFactory:function kU(){return new ei},deps:[]},{provide:Rl,useClass:AU,multi:!0,deps:[_t,je,vp]},{provide:Rl,useClass:RU,multi:!0,deps:[_t]},{provide:Zp,useClass:Zp,deps:[Ml,Xs,zs,kS]},{provide:p_,useExisting:Zp},{provide:DS,useExisting:Xs},{provide:Xs,useClass:Xs,deps:[_t]},{provide:Ml,useClass:Ml,deps:[Rl,je]},{provide:ES,useClass:vU,deps:[]},[]];let PU=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:zs,useValue:t.appId},{provide:AS,useExisting:zs},mU]}}}return n.\u0275fac=function(t){return new(t||n)(M(VS,12))},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({providers:[...$S,...BS],imports:[vS,hL]}),n})(),jS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(M(_t))},n.\u0275prov=V({token:n,factory:function(t){let r=null;return r=t?new t:function FU(){return new jS(M(_t))}(),r},providedIn:"root"}),n})();function U(...n){return fe(n,os(n))}function qn(n,e){return Se(e)?lt(n,e,1):lt(n,1)}function Rn(n,e){return tt((t,r)=>{let o=0;t.subscribe(Qe(r,i=>n.call(e,i,o++)&&r.next(i)))})}typeof window<"u"&&window;class kl{}class og{}class Sr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let o;if(o="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(i=>i.toString()),o.length>0){const i=t.toLowerCase();this.headers.set(i,o),this.maybeSetNormalizedName(t,i)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Sr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Sr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Sr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class $U{encodeKey(e){return KS(e)}encodeValue(e){return KS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const GU=/%(\d[a-f0-9])/gi,zU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function KS(n){return encodeURIComponent(n).replace(GU,(e,t)=>zU[t]??e)}function Nl(n){return`${n}`}class Vr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new $U,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function jU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(Nl):[Nl(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Vr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Nl(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Nl(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class KU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function qS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function WS(n){return typeof Blob<"u"&&n instanceof Blob}function QS(n){return typeof FormData<"u"&&n instanceof FormData}class Zs{constructor(e,t,r,o){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function qU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Sr),this.context||(this.context=new KU),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Vr,this.urlWithParams=t}serializeBody(){return null===this.body?null:qS(this.body)||WS(this.body)||QS(this.body)||function WU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||QS(this.body)?null:WS(this.body)?this.body.type||null:qS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new Zs(t,r,i,{params:l,headers:c,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var et=(()=>((et=et||{})[et.Sent=0]="Sent",et[et.UploadProgress=1]="UploadProgress",et[et.ResponseHeader=2]="ResponseHeader",et[et.DownloadProgress=3]="DownloadProgress",et[et.Response=4]="Response",et[et.User=5]="User",et))();class ig{constructor(e,t=200,r="OK"){this.headers=e.headers||new Sr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class sg extends ig{constructor(e={}){super(e),this.type=et.ResponseHeader}clone(e={}){return new sg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ol extends ig{constructor(e={}){super(e),this.type=et.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ol({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class YS extends ig{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ag(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let JS=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof Zs)i=t;else{let c,l;c=o.headers instanceof Sr?o.headers:new Sr(o.headers),o.params&&(l=o.params instanceof Vr?o.params:new Vr({fromObject:o.params})),i=new Zs(t,r,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=U(i).pipe(qn(c=>this.handler.handle(c)));if(t instanceof Zs||"events"===o.observe)return s;const a=s.pipe(Rn(c=>c instanceof Ol));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(ee(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ee(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ee(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(ee(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Vr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,ag(o,r))}post(t,r,o={}){return this.request("POST",t,ag(o,r))}put(t,r,o={}){return this.request("PUT",t,ag(o,r))}}return n.\u0275fac=function(t){return new(t||n)(M(kl))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();function XS(n,e){return e(n)}function QU(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}const ZS=new x("HTTP_INTERCEPTORS"),ea=new x("HTTP_INTERCEPTOR_FNS");function JU(){let n=null;return(e,t)=>(null===n&&(n=(re(ZS,{optional:!0})??[]).reduceRight(QU,XS)),n(e,t))}let eT=(()=>{class n extends kl{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(ea)));this.chain=r.reduceRight((o,i)=>function YU(n,e,t){return(r,o)=>t.runInContext(()=>e(r,i=>n(i,o)))}(o,i,this.injector),XS)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(M(og),M(Vn))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const tH=/^\)\]\}',?\n/;let nT=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ve(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((f,g)=>o.setRequestHeader(f,g.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&o.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();o.responseType="json"!==f?f:"text"}const i=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=o.statusText||"OK",g=new Sr(o.getAllResponseHeaders()),m=function nH(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return s=new sg({headers:g,status:o.status,statusText:f,url:m}),s},c=()=>{let{headers:f,status:g,statusText:m,url:v}=a(),E=null;204!==g&&(E=typeof o.response>"u"?o.responseText:o.response),0===g&&(g=E?200:0);let A=g>=200&&g<300;if("json"===t.responseType&&"string"==typeof E){const _=E;E=E.replace(tH,"");try{E=""!==E?JSON.parse(E):null}catch(H){E=_,A&&(A=!1,E={error:H,text:E})}}A?(r.next(new Ol({body:E,headers:f,status:g,statusText:m,url:v||void 0})),r.complete()):r.error(new YS({error:E,headers:f,status:g,statusText:m,url:v||void 0}))},l=f=>{const{url:g}=a(),m=new YS({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:g||void 0});r.error(m)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let g={type:et.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(g.total=f.total),"text"===t.responseType&&o.responseText&&(g.partialText=o.responseText),r.next(g)},h=f=>{let g={type:et.UploadProgress,loaded:f.loaded};f.lengthComputable&&(g.total=f.total),r.next(g)};return o.addEventListener("load",c),o.addEventListener("error",l),o.addEventListener("timeout",l),o.addEventListener("abort",l),t.reportProgress&&(o.addEventListener("progress",d),null!==i&&o.upload&&o.upload.addEventListener("progress",h)),o.send(i),r.next({type:et.Sent}),()=>{o.removeEventListener("error",l),o.removeEventListener("abort",l),o.removeEventListener("load",c),o.removeEventListener("timeout",l),t.reportProgress&&(o.removeEventListener("progress",d),null!==i&&o.upload&&o.upload.removeEventListener("progress",h)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(M(ES))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const cg=new x("XSRF_ENABLED"),rT=new x("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),oT=new x("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class iT{}let iH=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=lS(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(M(_t),M(vp),M(rT))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();function sH(n,e){const t=n.url.toLowerCase();if(!re(cg)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=re(iT).getToken(),o=re(oT);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var Ke=(()=>((Ke=Ke||{})[Ke.Interceptors=0]="Interceptors",Ke[Ke.LegacyInterceptors=1]="LegacyInterceptors",Ke[Ke.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ke[Ke.NoXsrfProtection=3]="NoXsrfProtection",Ke[Ke.JsonpSupport=4]="JsonpSupport",Ke[Ke.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ke))();function Ei(n,e){return{\u0275kind:n,\u0275providers:e}}function aH(...n){const e=[JS,nT,eT,{provide:kl,useExisting:eT},{provide:og,useExisting:nT},{provide:ea,useValue:sH,multi:!0},{provide:cg,useValue:!0},{provide:iT,useClass:iH}];for(const t of n)e.push(...t.\u0275providers);return function kN(n){return{\u0275providers:n}}(e)}const sT=new x("LEGACY_INTERCEPTOR_FN");let lH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({providers:[aH(Ei(Ke.LegacyInterceptors,[{provide:sT,useFactory:JU},{provide:ea,useExisting:sT,multi:!0}]))]}),n})();const{isArray:uH}=Array,{getPrototypeOf:dH,prototype:hH,keys:fH}=Object;function aT(n){if(1===n.length){const e=n[0];if(uH(e))return{args:e,keys:null};if(function pH(n){return n&&"object"==typeof n&&dH(n)===hH}(e)){const t=fH(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:gH}=Array;function cT(n){return ee(e=>function mH(n,e){return gH(e)?n(...e):n(e)}(n,e))}function lT(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let uT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(w(pr),w(Wt))},n.\u0275dir=K({type:n}),n})(),_o=(()=>{class n extends uT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ht(n)))(r||n)}}(),n.\u0275dir=K({type:n,features:[ve]}),n})();const Wn=new x("NgValueAccessor"),CH={provide:Wn,useExisting:Ae(()=>Pl),multi:!0},EH=new x("CompositionEventMode");let Pl=(()=>{class n extends uT{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _H(){const n=Er()?Er().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(w(pr),w(Wt),w(EH,8))},n.\u0275dir=K({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&$e("input",function(i){return r._handleInput(i.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(i){return r._compositionEnd(i.target.value)})},features:[Oe([CH]),ve]}),n})();const IH=!1;function Br(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function hT(n){return null!=n&&"number"==typeof n.length}const Et=new x("NgValidators"),$r=new x("NgAsyncValidators"),wH=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qn{static min(e){return fT(e)}static max(e){return function pT(n){return e=>{if(Br(e.value)||Br(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function gT(n){return Br(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function mT(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function yT(n){return Br(n.value)||wH.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function vT(n){return e=>Br(e.value)||!hT(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function CT(n){return e=>hT(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function _T(n){if(!n)return xl;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Br(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return AT(e)}static composeAsync(e){return bT(e)}}function fT(n){return e=>{if(Br(e.value)||Br(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function xl(n){return null}function ET(n){return null!=n}function IT(n){const e=xs(n)?fe(n):n;if(IH&&!jf(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new T(-1101,t)}return e}function wT(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ST(n,e){return e.map(t=>t(n))}function TT(n){return n.map(e=>function SH(n){return!n.validate}(e)?e:t=>e.validate(t))}function AT(n){if(!n)return null;const e=n.filter(ET);return 0==e.length?null:function(t){return wT(ST(t,e))}}function lg(n){return null!=n?AT(TT(n)):null}function bT(n){if(!n)return null;const e=n.filter(ET);return 0==e.length?null:function(t){return function yH(...n){const e=iv(n),{args:t,keys:r}=aT(n),o=new Ve(i=>{const{length:s}=t;if(!s)return void i.complete();const a=new Array(s);let c=s,l=s;for(let u=0;u<s;u++){let d=!1;Bt(t[u]).subscribe(Qe(i,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||i.next(r?lT(r,a):a),i.complete())}))}});return e?o.pipe(cT(e)):o}(ST(t,e).map(IT)).pipe(ee(wT))}}function ug(n){return null!=n?bT(TT(n)):null}function DT(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RT(n){return n._rawValidators}function MT(n){return n._rawAsyncValidators}function dg(n){return n?Array.isArray(n)?n:[n]:[]}function Fl(n,e){return Array.isArray(n)?n.includes(e):n===e}function kT(n,e){const t=dg(e);return dg(n).forEach(o=>{Fl(t,o)||t.push(o)}),t}function NT(n,e){return dg(e).filter(t=>!Fl(n,t))}class OT{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ug(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Mt extends OT{get formDirective(){return null}get path(){return null}}class jr extends OT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class PT{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let xT=(()=>{class n extends PT{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(w(jr,2))},n.\u0275dir=K({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&yr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ve]}),n})(),FT=(()=>{class n extends PT{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(w(Mt,10))},n.\u0275dir=K({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&yr("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ve]}),n})();function LT(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const pg=!1,ta="VALID",Ul="INVALID",Ii="PENDING",na="DISABLED";function gg(n){return(Hl(n)?n.validators:n)||null}function mg(n,e){return(Hl(e)?e.asyncValidators:n)||null}function Hl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function UT(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new T(1e3,pg?function DH(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new T(1001,pg?function RH(n,e){return`Cannot find form control ${LT(n,e)}`}(e,t):"")}function HT(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new T(1002,pg?function MH(n,e){return`Must supply a value for form control ${LT(n,e)}`}(e,o):"")})}class Vl{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ta}get invalid(){return this.status===Ul}get pending(){return this.status==Ii}get disabled(){return this.status===na}get enabled(){return this.status!==na}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(NT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(NT(e,this._rawAsyncValidators))}hasValidator(e){return Fl(this._rawValidators,e)}hasAsyncValidator(e){return Fl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ii,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=na,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ta,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ta||this.status===Ii)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?na:ta}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ii,this._hasOwnPendingAsyncValidator=!0;const t=IT(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?na:this.errors?Ul:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ii)?Ii:this._anyControlsHaveStatus(Ul)?Ul:ta}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Hl(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function kH(n){return Array.isArray(n)?lg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function NH(n){return Array.isArray(n)?ug(n):n||null}(this._rawAsyncValidators)}}class wi extends Vl{constructor(e,t,r){super(gg(t),mg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){HT(this,!0,e),Object.keys(e).forEach(r=>{UT(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,i)=>{r=t(r,o,i)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class VT extends wi{}const Si=new x("CallSetDisabledState",{providedIn:"root",factory:()=>Bl}),Bl="always";function ra(n,e,t=Bl){yg(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function PH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BT(n,e)})}(n,e),function FH(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BT(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function OH(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function jl(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),zl(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Gl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function yg(n,e){const t=RT(n);null!==e.validator?n.setValidators(DT(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=MT(n);null!==e.asyncValidator?n.setAsyncValidators(DT(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Gl(e._rawValidators,o),Gl(e._rawAsyncValidators,o)}function zl(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=RT(n);if(Array.isArray(o)&&o.length>0){const i=o.filter(s=>s!==e.validator);i.length!==o.length&&(t=!0,n.setValidators(i))}}if(null!==e.asyncValidator){const o=MT(n);if(Array.isArray(o)&&o.length>0){const i=o.filter(s=>s!==e.asyncValidator);i.length!==o.length&&(t=!0,n.setAsyncValidators(i))}}}const r=()=>{};return Gl(e._rawValidators,r),Gl(e._rawAsyncValidators,r),t}function BT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function GT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zT(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ia=class extends Vl{constructor(e=null,t,r){super(gg(t),mg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zT(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let YT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=K({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const zH={provide:Wn,useExisting:Ae(()=>Ig),multi:!0};let Ig=(()=>{class n extends _o{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ht(n)))(r||n)}}(),n.\u0275dir=K({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&$e("input",function(i){return r.onChange(i.target.value)})("blur",function(){return r.onTouched()})},features:[Oe([zH]),ve]}),n})(),JT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({}),n})();const wg=new x("NgModelWithFormControlWarning"),YH={provide:Mt,useExisting:Ae(()=>Kl)};let Kl=(()=>{class n extends Mt{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new He,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ra(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){jl(t.control||null,t,!1),function VH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function jT(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(jl(r||null,t),(n=>n instanceof ia)(o)&&(ra(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function $T(n,e){yg(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function LH(n,e){return zl(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yg(this.form,this),this._oldForm&&zl(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(w(Et,10),w($r,10),w(Si,8))},n.\u0275dir=K({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&$e("submit",function(i){return r.onSubmit(i)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Oe([YH]),ve,an]}),n})();const ZH={provide:jr,useExisting:Ae(()=>Ag)};let Ag=(()=>{class n extends jr{set isDisabled(t){}constructor(t,r,o,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new He,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function _g(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(i=>{i.constructor===Pl?t=i:function HH(n){return Object.getPrototypeOf(n.constructor)===_o}(i)?r=i:o=i}),o||r||t||null}(0,i)}ngOnChanges(t){this._added||this._setUpControl(),function Cg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function $l(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(w(Mt,13),w(Et,10),w($r,10),w(Wn,10),w(wg,8))},n.\u0275dir=K({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Oe([ZH]),ve,an]}),n})();let Eo=(()=>{class n{constructor(){this._validator=xl}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):xl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=K({type:n,features:[an]}),n})();const aV={provide:Et,useExisting:Ae(()=>Rg),multi:!0};let Rg=(()=>{class n extends Eo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function iA(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>fT(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ht(n)))(r||n)}}(),n.\u0275dir=K({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Gn("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Oe([aV]),ve]}),n})(),pV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({imports:[JT]}),n})();class hA extends Vl{constructor(e,t,r){super(gg(t),mg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){HT(this,!1,e),e.forEach((r,o)=>{UT(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function fA(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let gV=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let i={};return fA(r)?i=r:null!==r&&(i.validators=r.validator,i.asyncValidators=r.asyncValidator),new wi(o,i)}record(t,r=null){const o=this._reduceControls(t);return new VT(o,r)}control(t,r,o){let i={};return this.useNonNullable?(fA(r)?i=r:(i.validators=r,i.asyncValidators=o),new ia(t,{...i,nonNullable:!0})):new ia(t,r,o)}array(t,r,o){const i=t.map(s=>this._createControl(s));return new hA(i,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof ia||t instanceof Vl?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wg,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Si,useValue:t.callSetDisabledState??Bl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({imports:[pV]}),n})();class pn extends nn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ql=ts(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function pA(...n){const e=os(n),t=iv(n),{args:r,keys:o}=aT(n);if(0===r.length)return fe([],e);const i=new Ve(function yV(n,e,t=ro){return r=>{gA(e,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)gA(e,()=>{const l=fe(n[c],e);let u=!1;l.subscribe(Qe(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>lT(o,s):ro));return t?i.pipe(cT(t)):i}function gA(n,e,t){n?sr(t,n,e):e()}function kg(...n){return function vV(){return Oo(1)}()(fe(n,os(n)))}function mA(n){return new Ve(e=>{Bt(n()).subscribe(e)})}function sa(n,e){const t=Se(n)?n:()=>n,r=o=>o.error(t());return new Ve(e?o=>e.schedule(r,0,o):r)}function Ng(){return tt((n,e)=>{let t=null;n._refCount++;const r=Qe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class yA extends Ve{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Gy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tn;const t=this.getSubject();e.add(this.source.subscribe(Qe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tn.EMPTY)}return e}refCount(){return Ng()(this)}}function kt(n,e){return tt((t,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();t.subscribe(Qe(r,c=>{o?.unsubscribe();let l=0;const u=i++;Bt(n(c,u)).subscribe(o=Qe(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Tr(n){return n<=0?()=>vn:tt((e,t)=>{let r=0;e.subscribe(Qe(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Wl(n){return tt((e,t)=>{let r=!1;e.subscribe(Qe(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function vA(n=_V){return tt((e,t)=>{let r=!1;e.subscribe(Qe(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function _V(){return new ql}function Gr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rn((o,i)=>n(o,i,r)):ro,Tr(1),t?Wl(e):vA(()=>new ql))}function It(n,e,t){const r=Se(n)||e||t?{next:n,error:e,complete:t}:n;return r?tt((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(Qe(i,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),i.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):ro}function Yn(n){return tt((e,t)=>{let i,r=null,o=!1;r=e.subscribe(Qe(t,void 0,void 0,s=>{i=Bt(n(s,Yn(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function CA(n,e){return tt(function EV(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(Qe(s,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}function Og(n){return n<=0?()=>vn:tt((e,t)=>{let r=[];e.subscribe(Qe(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function _A(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rn((o,i)=>n(o,i,r)):ro,Og(1),t?Wl(e):vA(()=>new ql))}function Pg(n){return tt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Z="primary",aa=Symbol("RouteTitle");class SV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ti(n){return new SV(n)}function TV(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Jn(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!EA(n[o],e[o]))return!1;return!0}function EA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}return n===e}function IA(n){return Array.prototype.concat.apply([],n)}function wA(n){return n.length>0?n[n.length-1]:null}function ft(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function zr(n){return jf(n)?n:xs(n)?fe(Promise.resolve(n)):U(n)}const Ql=!1,bV={exact:function AA(n,e,t){if(!Io(n.segments,e.segments)||!Yl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!AA(n.children[r],e.children[r],t))return!1;return!0},subset:bA},SA={exact:function DV(n,e){return Jn(n,e)},subset:function RV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>EA(n[t],e[t]))},ignored:()=>!0};function TA(n,e,t){return bV[t.paths](n.root,e.root,t.matrixParams)&&SA[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function bA(n,e,t){return DA(n,e,e.segments,t)}function DA(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Io(o,t)||e.hasChildren()||!Yl(o,t,r))}if(n.segments.length===t.length){if(!Io(n.segments,t)||!Yl(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!bA(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(Io(n.segments,o)&&Yl(n.segments,o,r)&&n.children[Z])&&DA(n.children[Z],e,i,r)}}function Yl(n,e,t){return e.every((r,o)=>SA[t](n[o].parameters,r.parameters))}class Kr{constructor(e=new se([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return NV.serialize(this)}}class se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ft(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jl(this)}}class ca{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ti(this.parameters)),this._parameterMap}toString(){return kA(this)}}function Io(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let la=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(){return new xg},providedIn:"root"}),n})();class xg{parse(e){const t=new BV(e);return new Kr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ua(e.root,!0)}`,r=function xV(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Xl(t)}=${Xl(o)}`).join("&"):`${Xl(t)}=${Xl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function OV(n){return encodeURI(n)}(e.fragment)}`:""}`}}const NV=new xg;function Jl(n){return n.segments.map(e=>kA(e)).join("/")}function ua(n,e){if(!n.hasChildren())return Jl(n);if(e){const t=n.children[Z]?ua(n.children[Z],!1):"",r=[];return ft(n.children,(o,i)=>{i!==Z&&r.push(`${i}:${ua(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kV(n,e){let t=[];return ft(n.children,(r,o)=>{o===Z&&(t=t.concat(e(r,o)))}),ft(n.children,(r,o)=>{o!==Z&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Z?[ua(n.children[Z],!1)]:[`${o}:${ua(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Z]?`${Jl(n)}/${t[0]}`:`${Jl(n)}/(${t.join("//")})`}}function RA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xl(n){return RA(n).replace(/%3B/gi,";")}function Fg(n){return RA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zl(n){return decodeURIComponent(n)}function MA(n){return Zl(n.replace(/\+/g,"%20"))}function kA(n){return`${Fg(n.path)}${function PV(n){return Object.keys(n).map(e=>`;${Fg(e)}=${Fg(n[e])}`).join("")}(n.parameters)}`}const FV=/^[^\/()?;=#]+/;function eu(n){const e=n.match(FV);return e?e[0]:""}const LV=/^[^=?&#]+/,HV=/^[^&#]+/;class BV{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Z]=new se(e,t)),r}parseSegment(){const e=eu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new T(4009,Ql);return this.capture(e),new ca(Zl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=eu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=eu(this.remaining);o&&(r=o,this.capture(r))}e[Zl(t)]=Zl(r)}parseQueryParam(e){const t=function UV(n){const e=n.match(LV);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function VV(n){const e=n.match(HV);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=MA(t),i=MA(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=eu(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new T(4010,Ql);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Z);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[Z]:new se([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new T(4011,Ql)}}function Lg(n){return n.segments.length>0?new se([],{[Z]:n}):n}function tu(n){const e={};for(const r of Object.keys(n.children)){const i=tu(n.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function $V(n){if(1===n.numberOfChildren&&n.children[Z]){const e=n.children[Z];return new se(n.segments.concat(e.segments),e.children)}return n}(new se(n.segments,e))}function wo(n){return n instanceof Kr}const Ug=!1;function jV(n,e,t,r,o){if(0===t.length)return Ai(e.root,e.root,e.root,r,o);const i=function FA(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new xA(!0,0,n);let e=0,t=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return ft(i.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new xA(t,e,r)}(t);return i.toRoot()?Ai(e.root,e.root,new se([],{}),r,o):function s(c){const l=function zV(n,e,t,r){if(n.isAbsolute)return new bi(e.root,!0,0);if(-1===r)return new bi(t,t===e.root,0);return function LA(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new T(4005,Ug&&"Invalid number of '../'");o=r.segments.length}return new bi(r,!1,o-i)}(t,r+(da(n.commands[0])?0:1),n.numberOfDoubleDots)}(i,e,n.snapshot?._urlSegment,c),u=l.processChildren?Di(l.segmentGroup,l.index,i.commands):Hg(l.segmentGroup,l.index,i.commands);return Ai(e.root,l.segmentGroup,u,r,o)}(n.snapshot?._lastPathIndex)}function da(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ha(n){return"object"==typeof n&&null!=n&&n.outlets}function Ai(n,e,t,r,o){let s,i={};r&&ft(r,(c,l)=>{i[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),s=n===e?t:PA(n,e,t);const a=Lg(tu(s));return new Kr(a,i,o)}function PA(n,e,t){const r={};return ft(n.children,(o,i)=>{r[i]=o===e?t:PA(o,e,t)}),new se(n.segments,r)}class xA{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&da(r[0]))throw new T(4003,Ug&&"Root segment cannot have matrix parameters");const o=r.find(ha);if(o&&o!==wA(r))throw new T(4004,Ug&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bi{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Hg(n,e,t){if(n||(n=new se([],{})),0===n.segments.length&&n.hasChildren())return Di(n,e,t);const r=function qV(n,e,t){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;const s=n.segments[o],a=t[r];if(ha(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!HA(c,l,s))return i;r+=2}else{if(!HA(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new se(n.segments.slice(0,r.pathIndex),{});return i.children[Z]=new se(n.segments.slice(r.pathIndex),n.children),Di(i,0,o)}return r.match&&0===o.length?new se(n.segments,{}):r.match&&!n.hasChildren()?Vg(n,e,t):r.match?Di(n,0,o):Vg(n,e,t)}function Di(n,e,t){if(0===t.length)return new se(n.segments,{});{const r=function KV(n){return ha(n[0])?n[0].outlets:{[Z]:n}}(t),o={};if(!r[Z]&&n.children[Z]&&1===n.numberOfChildren&&0===n.children[Z].segments.length){const i=Di(n.children[Z],e,t);return new se(n.segments,i.children)}return ft(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=Hg(n.children[s],e,i))}),ft(n.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new se(n.segments,o)}}function Vg(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const i=t[o];if(ha(i)){const c=WV(i.outlets);return new se(r,c)}if(0===o&&da(t[0])){r.push(new ca(n.segments[e].path,UA(t[0]))),o++;continue}const s=ha(i)?i.outlets[Z]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&da(a)?(r.push(new ca(s,UA(a))),o+=2):(r.push(new ca(s,{})),o++)}return new se(r,{})}function WV(n){const e={};return ft(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Vg(new se([],{}),0,t))}),e}function UA(n){const e={};return ft(n,(t,r)=>e[r]=`${t}`),e}function HA(n,e,t){return n==t.path&&Jn(e,t.parameters)}const fa="imperative";class Xn{constructor(e,t){this.id=e,this.url=t}}class Bg extends Xn{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class So extends Xn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nu extends Xn{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ru extends Xn{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class $g extends Xn{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class QV extends Xn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YV extends Xn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JV extends Xn{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class XV extends Xn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZV extends Xn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eB{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tB{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nB{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rB{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oB{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iB{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VA{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let cB=(()=>{class n{createUrlTree(t,r,o,i,s,a){return jV(t||r.root,o,i,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),uB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(e){return cB.\u0275fac(e)},providedIn:"root"}),n})();class BA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Gg(e,this._root).map(t=>t.value)}}function jg(n,e){if(n===e.value)return e;for(const t of e.children){const r=jg(n,t);if(r)return r}return null}function Gg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gg(n,t);if(r.length)return r.unshift(e),r}return[]}class Ar{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ri(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class $A extends BA{constructor(e,t){super(e),this.snapshot=t,zg(this,e)}toString(){return this.snapshot.toString()}}function jA(n,e){const t=function dB(n,e){const s=new ou([],{},{},"",{},Z,e,null,n.root,-1,{});return new zA("",new Ar(s,[]))}(n,e),r=new pn([new ca("",{})]),o=new pn({}),i=new pn({}),s=new pn({}),a=new pn(""),c=new To(r,o,s,a,i,Z,e,t.root);return c.snapshot=t.root,new $A(new Ar(c,[]),t)}class To{constructor(e,t,r,o,i,s,a,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.title=this.data?.pipe(ee(l=>l[aa]))??U(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ee(e=>Ti(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ee(e=>Ti(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function GA(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],i=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function hB(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ou{get title(){return this.data?.[aa]}constructor(e,t,r,o,i,s,a,c,l,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zA extends BA{constructor(e,t){super(t),this.url=e,zg(this,t)}toString(){return KA(this._root)}}function zg(n,e){e.value._routerState=n,e.children.forEach(t=>zg(n,t))}function KA(n){const e=n.children.length>0?` { ${n.children.map(KA).join(", ")} } `:"";return`${n.value}${e}`}function Kg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jn(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Jn(e.params,t.params)||n.params.next(t.params),function AV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jn(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Jn(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function qg(n,e){const t=Jn(n.params,e.params)&&function MV(n,e){return Io(n,e)&&n.every((t,r)=>Jn(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||qg(n.parent,e.parent))}function pa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function pB(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return pa(n,r,o);return pa(n,r)})}(n,e,t);return new Ar(r,o)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pa(n,a)),s}}const r=function gB(n){return new To(new pn(n.url),new pn(n.params),new pn(n.queryParams),new pn(n.fragment),new pn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(i=>pa(n,i));return new Ar(r,o)}}const Wg="ngNavigationCancelingError";function qA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=wo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=WA(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function WA(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Wg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function QA(n){return YA(n)&&wo(n.url)}function YA(n){return n&&n[Wg]}class mB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ga,this.attachRef=null}}let ga=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new mB,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iu=!1;let Qg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Z,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=re(ga),this.location=re(Tn),this.changeDetector=re(fl),this.environmentInjector=re(Vn)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T(4012,iu);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T(4012,iu);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T(4012,iu);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new T(4013,iu);this._activatedRoute=t;const o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new yB(t,a,o.injector);if(r&&function vB(n){return!!n.resolveComponentFactory}(r)){const l=r.resolveComponentFactory(s);this.activated=o.createComponent(l,o.length,c)}else this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=K({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[an]}),n})();class yB{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===To?this.route:e===ga?this.childContexts:this.parent.get(e,t)}}let Yg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=oo({type:n,selectors:[["ng-component"]],standalone:!0,features:[OI],decls:1,vars:0,template:function(t,r){1&t&&ie(0,"router-outlet")},dependencies:[Qg],encapsulation:2}),n})();function JA(n,e){return n.providers&&!n._injector&&(n._injector=ol(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xg(n){const e=n.children&&n.children.map(Xg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Z&&(t.component=Yg),t}function gn(n){return n.outlet||Z}function XA(n,e){const t=n.filter(r=>gn(r)===e);return t.push(...n.filter(r=>gn(r)!==e)),t}function ma(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wB{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Kg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Ri(t);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),ft(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Ri(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Ri(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Ri(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new iB(i.value.snapshot))}),e.children.length&&this.forwardEvent(new rB(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(Kg(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Kg(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ma(o.snapshot),c=a?.get(Rs)??null;s.attachRef=null,s.route=o,s.resolver=c,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class ZA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class su{constructor(e,t){this.component=e,this.route=t}}function SB(n,e,t){const r=n._root;return ya(r,e?e._root:null,t,[r.value])}function Mi(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function nM(n){return null!==ac(n)}(n)?e.get(n):n:r}function ya(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ri(e);return n.children.forEach(s=>{(function AB(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function bB(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,e.url)||!Jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qg(n,e)||!Jn(n.queryParams,e.queryParams);default:return!qg(n,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new ZA(r)):(i.data=s.data,i._resolvedData=s._resolvedData),ya(n,e,i.component?a?a.children:null:t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new su(a.outlet.component,s))}else s&&va(e,a,o),o.canActivateChecks.push(new ZA(r)),ya(n,null,i.component?a?a.children:null:t,r,o)})(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),ft(i,(s,a)=>va(s,t.getContext(a),o)),o}function va(n,e,t){const r=Ri(n),o=n.value;ft(r,(i,s)=>{va(i,o.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new su(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Ca(n){return"function"==typeof n}function Zg(n){return n instanceof ql||"EmptyError"===n?.name}const au=Symbol("INITIAL_VALUE");function ki(){return kt(n=>pA(n.map(e=>e.pipe(Tr(1),function CV(...n){const e=os(n);return tt((t,r)=>{(e?kg(n,t,e):kg(n,t)).subscribe(r)})}(au)))).pipe(ee(e=>{for(const t of e)if(!0!==t){if(t===au)return au;if(!1===t||t instanceof Kr)return t}return!0}),Rn(e=>e!==au),Tr(1)))}function eb(n){return function eR(...n){return By(n)}(It(e=>{if(wo(e))throw qA(0,e)}),ee(e=>!0===e))}const em={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tb(n,e,t,r,o){const i=tm(n,e,t);return i.matched?function GB(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?U(o.map(s=>{const a=Mi(s,n);return zr(function OB(n){return n&&Ca(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ki(),eb()):U(!0)}(r=JA(e,r),e,t).pipe(ee(s=>!0===s?i:{...em})):U(i)}function tm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...em}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||TV)(t,n,e);if(!o)return{...em};const i={};ft(o.posParams,(a,c)=>{i[c]=a.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function cu(n,e,t,r){if(t.length>0&&function qB(n,e,t){return t.some(r=>lu(n,e,r)&&gn(r)!==Z)}(n,t,r)){const i=new se(e,function KB(n,e,t,r){const o={};o[Z]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const i of t)if(""===i.path&&gn(i)!==Z){const s=new se([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,o[gn(i)]=s}return o}(n,e,r,new se(t,n.children)));return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===t.length&&function WB(n,e,t){return t.some(r=>lu(n,e,r))}(n,t,r)){const i=new se(n.segments,function zB(n,e,t,r,o){const i={};for(const s of r)if(lu(n,t,s)&&!o[gn(s)]){const a=new se([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,i[gn(s)]=a}return{...o,...i}}(n,e,t,r,n.children));return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}const o=new se(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function lu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function nb(n,e,t,r){return!!(gn(n)===r||r!==Z&&lu(e,t,n))&&("**"===n.path||tm(e,n,t).matched)}function rb(n,e,t){return 0===e.length&&!n.children[t]}const uu=!1;class du{constructor(e){this.segmentGroup=e||null}}class ob{constructor(e){this.urlTree=e}}function _a(n){return sa(new du(n))}function ib(n){return sa(new ob(n))}class XB{constructor(e,t,r,o,i){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0}apply(){const e=cu(this.urlTree.root,[],[],this.config).segmentGroup,t=new se(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Z).pipe(ee(i=>this.createUrlTree(tu(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yn(i=>{if(i instanceof ob)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof du?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Z).pipe(ee(o=>this.createUrlTree(tu(o),e.queryParams,e.fragment))).pipe(Yn(o=>{throw o instanceof du?this.noMatchError(o):o}))}noMatchError(e){return new T(4002,uu)}createUrlTree(e,t,r){const o=Lg(e);return new Kr(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ee(i=>new se([],i))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return fe(o).pipe(qn(i=>{const s=r.children[i],a=XA(t,i);return this.expandSegmentGroup(e,a,s,i).pipe(ee(c=>({segment:c,outlet:i})))}),CA((i,s)=>(i[s.outlet]=s.segment,i),{}),_A())}expandSegment(e,t,r,o,i,s){return fe(r).pipe(qn(a=>this.expandSegmentAgainstRoute(e,t,r,a,o,i,s).pipe(Yn(l=>{if(l instanceof du)return U(null);throw l}))),Gr(a=>!!a),Yn((a,c)=>{if(Zg(a))return rb(t,o,i)?U(new se([],{})):_a(t);throw a}))}expandSegmentAgainstRoute(e,t,r,o,i,s,a){return nb(o,t,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s):_a(t):_a(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ib(i):this.lineralizeSegments(r,i).pipe(lt(s=>{const a=new se(s,{});return this.expandSegment(e,a,t,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=tm(t,o,i);if(!a)return _a(t);const d=this.applyRedirectCommands(c,o.redirectTo,u);return o.redirectTo.startsWith("/")?ib(d):this.lineralizeSegments(o,d).pipe(lt(h=>this.expandSegment(e,t,r,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,t,r,o,i){return"**"===r.path?(e=JA(r,e),r.loadChildren?(r._loadedRoutes?U({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(ee(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new se(o,{})))):U(new se(o,{}))):tb(t,r,o,e).pipe(kt(({matched:s,consumedSegments:a,remainingSegments:c})=>s?this.getChildConfig(e=r._injector??e,r,o).pipe(lt(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:g}=cu(t,a,c,h),m=new se(f.segments,f.children);if(0===g.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(ee(_=>new se(a,_)));if(0===h.length&&0===g.length)return U(new se(a,{}));const v=gn(r)===i;return this.expandSegment(d,m,h,g,v?Z:i,!0).pipe(ee(A=>new se(a.concat(A.segments),A.children)))})):_a(t)))}getChildConfig(e,t,r){return t.children?U({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?U({routes:t._loadedRoutes,injector:t._loadedInjector}):function jB(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?U(!0):U(o.map(s=>{const a=Mi(s,n);return zr(function RB(n){return n&&Ca(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ki(),eb())}(e,t,r).pipe(lt(o=>o?this.configLoader.loadChildren(e,t).pipe(It(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):function YB(n){return sa(WA(uu,3))}())):U({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return U(r);if(o.numberOfChildren>1||!o.children[Z])return e.redirectTo,sa(new T(4e3,uu));o=o.children[Z]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const i=this.createSegmentGroup(e,t.root,r,o);return new Kr(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ft(e,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,o){const i=this.createSegments(e,t.segments,r,o);let s={};return ft(t.children,(a,c)=>{s[c]=this.createSegmentGroup(e,a,r,o)}),new se(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new T(4001,uu);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class e${}class r${constructor(e,t,r,o,i,s,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=cu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Z).pipe(ee(t=>{if(null===t)return null;const r=new ou([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Z,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ar(r,t),i=new zA(this.url,o);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(e){const t=e.value,r=GA(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return fe(Object.keys(r.children)).pipe(qn(o=>{const i=r.children[o],s=XA(t,o);return this.processSegmentGroup(e,s,i,o)}),CA((o,i)=>o&&i?(o.push(...i),o):null),function IV(n,e=!1){return tt((t,r)=>{let o=0;t.subscribe(Qe(r,i=>{const s=n(i,o++);(s||e)&&r.next(i),!s&&r.complete()}))})}(o=>null!==o),Wl(null),_A(),ee(o=>{if(null===o)return null;const i=ab(o);return function o$(n){n.sort((e,t)=>e.value.outlet===Z?-1:t.value.outlet===Z?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}))}processSegment(e,t,r,o,i){return fe(t).pipe(qn(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,o,i)),Gr(s=>!!s),Yn(s=>{if(Zg(s))return rb(r,o,i)?U([]):U(null);throw s}))}processSegmentAgainstRoute(e,t,r,o,i){if(t.redirectTo||!nb(t,r,o,i))return U(null);let s;if("**"===t.path){const a=o.length>0?wA(o).parameters:{},c=lb(r)+o.length;s=U({snapshot:new ou(o,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ub(t),gn(t),t.component??t._loadedComponent??null,t,cb(r),c,db(t)),consumedSegments:[],remainingSegments:[]})}else s=tb(r,t,o,e).pipe(ee(({matched:a,consumedSegments:c,remainingSegments:l,parameters:u})=>{if(!a)return null;const d=lb(r)+c.length;return{snapshot:new ou(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ub(t),gn(t),t.component??t._loadedComponent??null,t,cb(r),d,db(t)),consumedSegments:c,remainingSegments:l}}));return s.pipe(kt(a=>{if(null===a)return U(null);const{snapshot:c,consumedSegments:l,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function i$(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:g}=cu(r,l,u,h.filter(v=>void 0===v.redirectTo));if(0===g.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(ee(v=>null===v?null:[new Ar(c,v)]));if(0===h.length&&0===g.length)return U([new Ar(c,[])]);const m=gn(t)===i;return this.processSegment(d,h,f,g,m?Z:i).pipe(ee(v=>null===v?null:[new Ar(c,v)]))}))}}function s$(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ab(n){const e=[],t=new Set;for(const r of n){if(!s$(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=ab(r.children);e.push(new Ar(r.value,o))}return e.filter(r=>!t.has(r))}function cb(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function lb(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ub(n){return n.data||{}}function db(n){return n.resolve||{}}function hb(n){return"string"==typeof n.title||null===n.title}function nm(n){return kt(e=>{const t=n(e);return t?fe(t).pipe(ee(()=>e)):U(e)})}const Ni=new x("ROUTES");let rm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=re(Iw)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return U(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=zr(t.loadComponent()).pipe(ee(pb),It(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),Pg(()=>{this.componentLoaders.delete(t)})),o=new yA(r,()=>new nn).pipe(Ng());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return U({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ee(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=IA(c.get(Ni,[],G.Self|G.Optional)));return{routes:l.map(Xg),injector:c}}),Pg(()=>{this.childrenLoaders.delete(r)})),s=new yA(i,()=>new nn).pipe(Ng());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return zr(t()).pipe(ee(pb),lt(r=>r instanceof kI||Array.isArray(r)?U(r):fe(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pb(n){return function p$(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let fu=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new nn,this.configLoader=re(rm),this.environmentInjector=re(Vn),this.urlSerializer=re(la),this.rootContexts=re(ga),this.navigationId=0,this.afterPreactivation=()=>U(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new tB(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new eB(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new pn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fa,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Rn(r=>0!==r.id),ee(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),kt(r=>{let o=!1,i=!1;return U(r).pipe(It(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),kt(s=>{const a=t.browserUrlTree.toString(),c=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!c&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new ru(s.id,t.serializeUrl(r.rawUrl),u,0)),t.rawUrlTree=s.rawUrl,s.resolve(null),vn}if(t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return gb(s.source)&&(t.browserUrlTree=s.extractedUrl),U(s).pipe(kt(u=>{const d=this.transitions?.getValue();return this.events.next(new Bg(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?vn:Promise.resolve(u)}),function ZB(n,e,t,r){return kt(o=>function JB(n,e,t,r,o){return new XB(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe(ee(i=>({...o,urlAfterRedirects:i}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),It(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},r.urlAfterRedirects=u.urlAfterRedirects}),function c$(n,e,t,r,o){return lt(i=>function n$(n,e,t,r,o,i,s="emptyOnly"){return new r$(n,e,t,r,o,s,i).recognize().pipe(kt(a=>null===a?function t$(n){return new Ve(e=>e.error(n))}(new e$):U(a)))}(n,e,t,i.urlAfterRedirects,r.serialize(i.urlAfterRedirects),r,o).pipe(ee(s=>({...i,targetSnapshot:s}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),It(u=>{if(r.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new QV(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:d,source:h,restoredState:f,extras:g}=s,m=new Bg(u,this.urlSerializer.serialize(d),h,f);this.events.next(m);const v=jA(d,this.rootComponentType).snapshot;return U(r={...s,targetSnapshot:v,urlAfterRedirects:d,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new ru(s.id,t.serializeUrl(r.extractedUrl),u,1)),t.rawUrlTree=s.rawUrl,s.resolve(null),vn}}),It(s=>{const a=new YV(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ee(s=>r={...s,guards:SB(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function xB(n,e){return lt(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return 0===s.length&&0===i.length?U({...t,guardsResult:!0}):function FB(n,e,t,r){return fe(n).pipe(lt(o=>function $B(n,e,t,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?U(i.map(a=>{const c=ma(e)??o,l=Mi(a,c);return zr(function NB(n){return n&&Ca(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):c.runInContext(()=>l(n,e,t,r))).pipe(Gr())})).pipe(ki()):U(!0)}(o.component,o.route,t,e,r)),Gr(o=>!0!==o,!0))}(s,r,o,n).pipe(lt(a=>a&&function DB(n){return"boolean"==typeof n}(a)?function LB(n,e,t,r){return fe(e).pipe(qn(o=>kg(function HB(n,e){return null!==n&&e&&e(new nB(n)),U(!0)}(o.route.parent,r),function UB(n,e){return null!==n&&e&&e(new oB(n)),U(!0)}(o.route,r),function BB(n,e,t){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function TB(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>mA(()=>U(s.guards.map(c=>{const l=ma(s.node)??t,u=Mi(c,l);return zr(function kB(n){return n&&Ca(n.canActivateChild)}(u)?u.canActivateChild(r,n):l.runInContext(()=>u(r,n))).pipe(Gr())})).pipe(ki())));return U(i).pipe(ki())}(n,o.path,t),function VB(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return U(!0);const o=r.map(i=>mA(()=>{const s=ma(e)??t,a=Mi(i,s);return zr(function MB(n){return n&&Ca(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Gr())}));return U(o).pipe(ki())}(n,o.route,t))),Gr(o=>!0!==o,!0))}(r,i,n,e):U(a)),ee(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),It(s=>{if(r.guardsResult=s.guardsResult,wo(s.guardsResult))throw qA(0,s.guardsResult);const a=new JV(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Rn(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),nm(s=>{if(s.guards.canActivateChecks.length)return U(s).pipe(It(a=>{const c=new XV(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),kt(a=>{let c=!1;return U(a).pipe(function l$(n,e){return lt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return U(t);let i=0;return fe(o).pipe(qn(s=>function u$(n,e,t,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!hb(o)&&(i[aa]=o.title),function d$(n,e,t,r){const o=function h$(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return U({});const i={};return fe(o).pipe(lt(s=>function f$(n,e,t,r){const o=ma(e)??r,i=Mi(n,o);return zr(i.resolve?i.resolve(e,t):o.runInContext(()=>i(e,t)))}(n[s],e,t,r).pipe(Gr(),It(a=>{i[s]=a}))),Og(1),function wV(n){return ee(()=>n)}(i),Yn(s=>Zg(s)?vn:sa(s)))}(i,n,e,r).pipe(ee(s=>(n._resolvedData=s,n.data=GA(n,t).resolve,o&&hb(o)&&(n.data[aa]=o.title),null)))}(s.route,r,n,e)),It(()=>i++),Og(1),lt(s=>i===o.length?U(t):vn))})}(t.paramsInheritanceStrategy,this.environmentInjector),It({next:()=>c=!0,complete:()=>{c||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),It(a=>{const c=new ZV(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),nm(s=>{const a=c=>{const l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(It(u=>{c.component=u}),ee(()=>{})));for(const u of c.children)l.push(...a(u));return l};return pA(a(s.targetSnapshot.root)).pipe(Wl(),Tr(1))}),nm(()=>this.afterPreactivation()),ee(s=>{const a=function fB(n,e,t){const r=pa(n,e._root,t?t._root:void 0);return new $A(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),It(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>ee(r=>(new wB(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Tr(1),It({next:s=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new So(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Pg(()=>{o||i||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Yn(s=>{if(i=!0,YA(s)){QA(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new nu(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),QA(s)){const c=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),l={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||gb(r.source)};t.scheduleNavigation(c,fa,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new $g(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(c){r.reject(c)}}return vn}))}))}cancelNavigationTransition(t,r,o){const i=new nu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gb(n){return n!==fa}let mb=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Z);return r}getResolvedTitleForRoute(t){return t.data[aa]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(){return re(g$)},providedIn:"root"}),n})(),g$=(()=>{class n extends mb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(M(jS))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),m$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(){return re(v$)},providedIn:"root"}),n})();class y${shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let v$=(()=>{class n extends y${}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ht(n)))(r||n)}}(),n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pu=new x("",{providedIn:"root",factory:()=>({})});let _$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(){return re(E$)},providedIn:"root"}),n})(),E$=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I$(n){throw n}function w$(n,e,t){return e.parse("/")}const S$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},T$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nt=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=re(NF),this.isNgZoneEnabled=!1,this.options=re(pu,{optional:!0})||{},this.errorHandler=this.options.errorHandler||I$,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||w$,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=re(_$),this.routeReuseStrategy=re(m$),this.urlCreationStrategy=re(uB),this.titleStrategy=re(mb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=IA(re(Ni,{optional:!0})??[]),this.navigationTransitions=re(fu),this.urlSerializer=re(la),this.location=re(_i),this.isNgZoneEnabled=re(je)instanceof je&&je.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=jA(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),fa,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Xg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=wo(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,fa,null,r)}navigate(t,r={skipLocationChange:!1}){return function A$(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new T(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...S$}:!1===r?{...T$}:r,wo(t))return TA(this.currentUrlTree,t,o);const i=this.parseUrl(t);return TA(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const i=t[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l,u;return s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h}),u="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(o,"",i)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-(this.browserPageId??this.currentPageId);0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ea=(()=>{class n{constructor(t,r,o,i,s,a){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new nn;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof So&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Ci(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Ci(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Ci(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function n_(n,e,t){return function MN(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?t_:e_}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,t,r):o.removeAttribute(i,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(w(Nt),w(To),function Dc(n){return function tk(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let o=0;for(;o<r;){const i=t[o];if(zv(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof t[o];)o++;else{if(i===e)return t[o+1];o+=2}}}return null}(dt(),n)}("tabindex"),w(pr),w(Wt),w(Co))},n.\u0275dir=K({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&$e("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&t&&Gn("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[an]}),n})(),yb=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,o,i,s){this.router=t,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new He,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof So&&this.update()})}ngAfterContentInit(){U(this.links.changes,U(null)).pipe(Oo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=fe(t).pipe(Oo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function b$(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(w(Nt),w(Wt),w(pr),w(fl),w(Ea,8))},n.\u0275dir=K({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&XI(o,Ea,5),2&t){let i;JI(i=function ZI(){return function uF(n,e){return n[Ln].queries[e].queryList}(I(),Uv())}())&&(r.links=i)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[an]}),n})();class vb{}let D$=(()=>{class n{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Rn(t=>t instanceof So),qn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=ol(i.providers,t,`Route: ${i.path}`));const s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return fe(o).pipe(Oo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):U(null);const i=o.pipe(lt(s=>null===s?U(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?fe([i,this.loader.loadComponent(r)]).pipe(Oo()):i})}}return n.\u0275fac=function(t){return new(t||n)(M(Nt),M(Iw),M(Vn),M(vb),M(rm))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const im=new x("");let Cb=(()=>{class n{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof So&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof VA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new VA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function O_(){throw new Error("invalid")}()},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();var Yt=(()=>((Yt=Yt||{})[Yt.COMPLETE=0]="COMPLETE",Yt[Yt.FAILED=1]="FAILED",Yt[Yt.REDIRECTING=2]="REDIRECTING",Yt))();const Oi=!1;function qr(n,e){return{\u0275kind:n,\u0275providers:e}}const sm=new x("",{providedIn:"root",factory:()=>!1});function Eb(){const n=re(Bn);return e=>{const t=n.get(dl);if(e!==t.components[0])return;const r=n.get(Nt),o=n.get(Ib);1===n.get(am)&&r.initialNavigation(),n.get(wb,null,G.Optional)?.setUpPreloading(),n.get(im,null,G.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const Ib=new x(Oi?"bootstrap done indicator":"",{factory:()=>new nn}),am=new x(Oi?"initial navigation":"",{providedIn:"root",factory:()=>1});function O$(){let n=[];return n=Oi?[{provide:Hc,multi:!0,useFactory:()=>{const e=re(Nt);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function sB(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],qr(1,n)}const wb=new x(Oi?"router preloader":"");function P$(n){return qr(0,[{provide:wb,useExisting:D$},{provide:vb,useExisting:n}])}const Ia=!1,Sb=new x(Ia?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),x$=[_i,{provide:la,useClass:xg},Nt,ga,{provide:To,useFactory:function _b(n){return n.routerState.root},deps:[Nt]},rm,Ia?{provide:sm,useValue:!0}:[]];function F$(){return new Mw("Router",Nt)}let Tb=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[x$,Ia&&r?.enableTracing?O$().\u0275providers:[],{provide:Ni,multi:!0,useValue:t},{provide:Sb,useFactory:V$,deps:[[Nt,new Cs,new _s]]},{provide:pu,useValue:r||{}},r?.useHash?{provide:Co,useClass:CL}:{provide:Co,useClass:Zw},{provide:im,useFactory:()=>{const n=re(L1),e=re(je),t=re(pu),r=re(fu),o=re(la);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Cb(o,r,n,e,t)}},r?.preloadingStrategy?P$(r.preloadingStrategy).\u0275providers:[],{provide:Mw,multi:!0,useFactory:F$},r?.initialNavigation?B$(r):[],[{provide:Ab,useFactory:Eb},{provide:Rw,multi:!0,useExisting:Ab}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ni,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(M(Sb,8))},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({imports:[Yg]}),n})();function V$(n){if(Ia&&n)throw new T(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function B$(n){return["disabled"===n.initialNavigation?qr(3,[{provide:cl,multi:!0,useFactory:()=>{const e=re(Nt);return()=>{e.setUpLocationChangeListener()}}},{provide:am,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qr(2,[{provide:am,useValue:0},{provide:cl,multi:!0,deps:[Bn],useFactory:e=>{const t=e.get(yL,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Nt),i=e.get(Ib);(function R$(n,e){n.events.pipe(Rn(t=>t instanceof So||t instanceof nu||t instanceof $g||t instanceof ru),ee(t=>t instanceof So||t instanceof ru?Yt.COMPLETE:t instanceof nu&&(0===t.code||1===t.code)?Yt.REDIRECTING:Yt.FAILED),Rn(t=>t!==Yt.REDIRECTING),Tr(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get(fu).afterPreactivation=()=>(r(!0),i.closed?U(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const Ab=new x(Ia?"Router Initializer":""),C={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Pi=[C.OPENID_SCOPE,C.PROFILE_SCOPE,C.OFFLINE_ACCESS_SCOPE],bb=[...Pi,C.EMAIL_SCOPE],st={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Wr_COMMON="common",Wr_ORGANIZATIONS="organizations",Wr_CONSUMERS="consumers",at={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Db={PLAIN:"plain",S256:"S256"},wa={QUERY:"query",FRAGMENT:"fragment"},j$={...wa,FORM_POST:"form_post"},wt={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},W={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},cm="appmetadata",vu={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},Jt_CONFIG="config",Jt_CACHE="cache",Jt_NETWORK="network",Jt_HARDCODED_VALUES="hardcoded_values",pt={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ee={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Ta_DEFAULT_THROTTLE_TIME_SECONDS=60,Ta_DEFAULT_MAX_THROTTLE_TIME_SECONDS=3600,Ta_THROTTLING_PREFIX="throttling",Ta_X_MS_LIB_CAPABILITY_VALUE="retry-after, h429",Xt={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Fi_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836",Pt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"};var P=(()=>{return(n=P||(P={})).Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",P;var n})();const Ob={scopes:Pi},Pb="jwk",um="msal.db",Q$=`${um}.keys`,Y$=[0,5,4];class Z${static getInteractionStatusFromEvent(e,t){switch(e.eventType){case"msal:loginStart":return"login";case"msal:ssoSilentStart":return"ssoSilent";case"msal:acquireTokenStart":if(e.interactionType===P.Redirect||e.interactionType===P.Popup)return"acquireToken";break;case"msal:handleRedirectStart":return"handleRedirect";case"msal:logoutStart":return"logout";case"msal:ssoSilentSuccess":case"msal:ssoSilentFailure":if(t&&"ssoSilent"!==t)break;return"none";case"msal:logoutEnd":if(t&&"logout"!==t)break;return"none";case"msal:handleRedirectEnd":if(t&&"handleRedirect"!==t)break;return"none";case"msal:loginSuccess":case"msal:loginFailure":case"msal:acquireTokenSuccess":case"msal:acquireTokenFailure":case"msal:restoreFromBFCache":if(e.interactionType===P.Redirect||e.interactionType===P.Popup){if(t&&"login"!==t&&"acquireToken"!==t)break;return"none"}}return null}}const Aa="unexpected_error",Eu={[Aa]:"Unexpected error in authentication.",post_request_failed:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class ke extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,ke.prototype),this.errorCode=e||C.EMPTY_STRING,this.errorMessage=t||C.EMPTY_STRING,this.subError=r||C.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function xb(n,e){return new ke(n,e?`${Eu[n]} ${e}`:Eu[n])}const ba="storage_not_supported",Iu="in_mem_redirect_unavailable",wu={[ba]:"Given storage configuration option was not supported.",stubbed_public_client_application_called:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Iu]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Da extends ke{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Da.prototype)}}function fm(n){return new Da(n,wu[n])}const Su="redirect_uri_empty",Tu="authority_uri_insecure",bo="url_parse_error",Au="empty_url_error",bu="empty_input_scopes_error",Du="invalid_prompt_value",Ra="invalid_claims",Ru="token_request_empty",Mu="logout_request_empty",ku="invalid_code_challenge_method",Ma="pkce_params_missing",ka="invalid_cloud_discovery_metadata",Nu="invalid_authority_metadata",Ou="untrusted_authority",Li="missing_ssh_jwk",Pu="missing_ssh_kid",xu="cannot_set_OIDCOptions",Fu="cannot_allow_native_broker",Lu="authority_mismatch",Fe={[Su]:"A redirect URI is required for all calls, and none has been set.",claims_request_parsing_error:"Could not parse the given claims request object.",[Tu]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[bo]:"URL could not be parsed into appropriate segments.",[Au]:"URL was empty or null.",[bu]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Du]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Ra]:"Given claims parameter must be a stringified JSON object.",[Ru]:"Token request was empty and not found in cache.",[Mu]:"The logout request was null or undefined.",[ku]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Ma]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[ka]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Nu]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ou]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Li]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Pu]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",missing_nonce_authentication_header:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",invalid_authentication_header:"Invalid authentication header provided",[xu]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Fu]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Lu]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class ym extends ke{constructor(e){super(e,Fe[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ym.prototype)}}function we(n){return new ym(n)}class yn{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch{}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}const Na="client_info_decoding_error",Uu="client_info_empty_error",Oa="token_parsing_error",Hu="null_or_empty_token",Mn="endpoints_resolution_error",Vu="network_error",Bu="openid_config_error",$u="hash_not_deserialized",Yr="invalid_state",ju="state_mismatch",Ui="state_not_found",Gu="nonce_mismatch",Pa="auth_time_not_found",zu="max_age_transpired",Ku="multiple_matching_appMetadata",qu="request_cannot_be_made",Wu="cannot_remove_empty_scope",Qu="cannot_append_scopeset",xa="empty_input_scopeset",Fa="no_account_in_silent_request",Yu="invalid_cache_record",La="invalid_cache_environment",Ua="no_account_found",Ha="no_crypto_object",Va="unexpected_credential_type",kn="token_refresh_required",Ju="token_claims_cnf_required_for_signedjwt",Xu="authorization_code_missing_from_server_response",Zu="end_session_endpoint_not_supported",Ba="key_id_missing",ae="method_not_implemented",Q={[Na]:"The client info could not be parsed/decoded correctly",[Uu]:"The client info was empty",[Oa]:"Token cannot be parsed",[Hu]:"The token is null or empty",[Mn]:"Endpoints cannot be resolved",[Vu]:"Network request failed",[Bu]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[$u]:"The hash parameters could not be deserialized",[Yr]:"State was not the expected format",[ju]:"State mismatch error",[Ui]:"State not found",[Gu]:"Nonce mismatch error",[Pa]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[zu]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",multiple_matching_tokens:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",multiple_matching_accounts:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ku]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[qu]:"Token request cannot be made without authorization code or refresh token.",[Wu]:"Cannot remove null or empty scope from ScopeSet",[Qu]:"Cannot append ScopeSet",[xa]:"Empty input ScopeSet cannot be processed",device_code_polling_cancelled:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",device_code_expired:"Device code is expired.",device_code_unknown_error:"Device code stopped polling for unknown reasons.",[Fa]:"Please pass an account object, silent flow is not supported without account information",[Yu]:"Cache record object was null or undefined.",[La]:"Invalid environment when attempting to create cache entry",[Ua]:"No account found in cache for given key.",[Ha]:"No crypto object detected.",[Va]:"Unexpected credential type.",invalid_assertion:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",invalid_client_credential:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[kn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",user_timeout_reached:"User defined timeout for device code polling reached",[Ju]:"Cannot generate a POP jwt if the token_claims are not populated",[Xu]:"Server response does not contain an authorization code to proceed",binding_key_not_removed:"Could not remove the credential's binding key from storage.",[Zu]:"The provided authority does not support logout",[Ba]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",no_network_connectivity:"No network connectivity. Check your internet connection.",user_canceled:"User cancelled the flow.",missing_tenant_id_error:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ae]:"This method has not been implemented",nested_app_auth_bridge_disabled:"The nested app auth bridge is disabled"};class ed extends ke{constructor(e,t){super(e,t?`${Q[e]}: ${t}`:Q[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ed.prototype)}}function S(n,e){return new ed(n,e)}function Fb(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function td(n){if(!n||n.indexOf("=")<0)return null;try{const e=Fb(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw S($u)}return null}class ue{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw we(Au);e.includes("#")||(this._urlString=ue.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return yn.endsWith(t,"?")?t=t.slice(0,-1):yn.endsWith(t,"?/")&&(t=t.slice(0,-2)),yn.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw we(bo)}if(!e.HostNameAndPort||!e.PathSegments)throw we(bo);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw we(Tu)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return ue.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&0!==r.length&&(r[0]===Wr_COMMON||r[0]===Wr_ORGANIZATIONS)&&(r[0]=e),ue.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw we(bo);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw we(bo);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===C.FORWARD_SLASH){const o=new ue(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new ue(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!td(e)}}const $a="pkce_not_created",ja="crypto_nonexistent",Hi="empty_navigate_uri",nd="hash_empty_error",Ga="no_state_in_hash",rd="hash_does_not_contain_known_properties",od="unable_to_parse_state",id="state_interaction_type_mismatch",sd="interaction_in_progress",ad="popup_window_error",cd="empty_window_error",br="user_cancelled",ld="monitor_window_timeout",ud="redirect_in_iframe",dd="block_iframe_reload",hd="block_nested_popups",Vi="silent_logout_unsupported",fd="no_account_error",pd="no_token_request_cache_error",gd="unable_to_parse_token_request_cache_error",za="no_cached_authority_error",Bi="non_browser_environment",Jr="database_not_open",$i="no_network_connectivity",md="post_request_failed",yd="get_request_failed",Ka="failed_to_parse_response",vd="unable_to_load_token",qa="crypto_key_not_found",Cd="auth_code_required",_d="auth_code_or_nativeAccountId_required",Ed="spa_code_and_nativeAccountId_present",Wa="database_unavailable",Id="unable_to_acquire_token_from_native_platform",wd="native_handshake_timeout",Sd="native_extension_not_installed",Do="native_connection_not_established",Td="uninitialized_public_client_application",Ad="native_prompt_not_supported",bd="invalid_base64_string",Dd="invalid_pop_token_request",Lb="failed_to_build_headers",Ub="failed_to_parse_headers",Dr="For more visit: aka.ms/msaljs/browser-errors",q={[$a]:"The PKCE code challenge and verifier could not be generated.",[ja]:"The crypto object or function is not available.",[Hi]:"Navigation URI is empty. Please check stack trace for more info.",[nd]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Dr}`,[Ga]:"Hash does not contain state. Please verify that the request originated from msal.",[rd]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Dr}`,[od]:"Unable to parse state. Please verify that the request originated from msal.",[id]:"Hash contains state but the interaction type does not match the caller.",[sd]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Dr}`,[ad]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[cd]:"window.open returned null or undefined window object.",[br]:"User cancelled the flow.",monitor_popup_timeout:`Token acquisition in popup failed due to timeout.  ${Dr}`,[ld]:`Token acquisition in iframe failed due to timeout.  ${Dr}`,[ud]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[dd]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Dr}`,[hd]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",iframe_closed_prematurely:"The iframe being monitored was closed prematurely.",[Vi]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[fd]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",silent_prompt_value_error:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[pd]:"No token request found in cache.",[gd]:"The cached token request could not be parsed.",[za]:"No cached authority found.",auth_request_not_set_error:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",invalid_cache_type:"Invalid cache type",[Bi]:"Login and token requests are not supported in non-browser environments.",[Jr]:"Database is not open!",[$i]:"No network connectivity. Check your internet connection.",[md]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[yd]:"Network request failed. Please check the network trace to determine root cause.",[Ka]:"Failed to parse network response. Check network trace.",[vd]:"Error loading token to cache.",[qa]:"Cryptographic Key or Keypair not found in browser storage.",[Cd]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[_d]:"An authorization code or nativeAccountId must be provided to this flow.",[Ed]:"Request cannot contain both spa code and native account id.",[Wa]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Id]:`Unable to acquire token from native platform.  ${Dr}`,[wd]:"Timed out while attempting to establish connection to browser extension",[Sd]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Do]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Dr}`,[Td]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Dr}`,[Ad]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[bd]:"Invalid base64 encoded string.",[Dd]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Lb]:"Failed to build request headers object.",[Ub]:"Failed to parse response headers"};class Qa extends ke{constructor(e,t){super(e,q[e],t),Object.setPrototypeOf(this,Qa.prototype),this.name="BrowserAuthError"}}function L(n,e){return new Qa(n,e)}function Hb(n,e,t,r,o,i,s){try{var a=n[i](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(r,o)}function y(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function s(c){Hb(i,r,o,s,a,"next",c)}function a(c){Hb(i,r,o,s,a,"throw",c)}s(void 0)})}}const p={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"};function Rd(n){return encodeURIComponent(Fm(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Md(n){return Vb(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fm(n){return Vb((new TextEncoder).encode(n))}function Vb(n){const e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}const Bb="SHA-256",r2=new Uint8Array([1,0,1]),$b="0123456789abcdef",jb=new Uint32Array(1),Lm={name:"RSASSA-PKCS1-v1_5",hash:Bb,modulusLength:2048,publicExponent:r2};function Gb(n,e,t){return Um.apply(this,arguments)}function Um(){return(Um=y(function*(n,e,t){e?.addQueueMeasurement(p.Sha256Digest,t);const o=(new TextEncoder).encode(n);return window.crypto.subtle.digest(Bb,o)})).apply(this,arguments)}function s2(n){return window.crypto.getRandomValues(n)}function Hm(){return window.crypto.getRandomValues(jb),jb[0]}function Zn(){const n=Date.now(),e=1024*Hm()+(1023&Hm()),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Hm();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/65536,t[4]=n/256,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=$b.charAt(t[a]>>>4),s+=$b.charAt(15&t[a]),(3===a||5===a||7===a||9===a)&&(s+="-");return s}function Vm(){return(Vm=y(function*(n,e){return window.crypto.subtle.generateKey(Lm,n,e)})).apply(this,arguments)}function Bm(n){return $m.apply(this,arguments)}function $m(){return($m=y(function*(n){return window.crypto.subtle.exportKey(Pb,n)})).apply(this,arguments)}function jm(){return(jm=y(function*(n,e,t){return window.crypto.subtle.importKey(Pb,n,Lm,e,t)})).apply(this,arguments)}function Gm(){return(Gm=y(function*(n,e){return window.crypto.subtle.sign(Lm,n,e)})).apply(this,arguments)}function zb(n){return zm.apply(this,arguments)}function zm(){return(zm=y(function*(n){const e=yield Gb(n);return Md(new Uint8Array(e))})).apply(this,arguments)}function kd(){return window.parent!==window}function Rr(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Kb(){if(typeof window>"u")throw L(Bi)}function qb(n){if(!n)throw L(Td)}function Km(n){Kb(),function p2(){if(ue.hashContainsKnownProperties(window.location.hash)&&kd())throw L(dd)}(),function m2(){if(function h2(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${Xt.POPUP_NAME_PREFIX}.`)}())throw L(hd)}(),qb(n)}function Wb(n,e){if(Km(n),function g2(n){if(kd()&&!n)throw L(ud)}(e.system.allowRedirectInIframe),e.cache.cacheLocation===Pt.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw fm(Iu)}function Qb(n){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const Yb={now:()=>(Yb.delegate||Date).now(),delegate:void 0};class v2 extends nn{constructor(e=1/0,t=1/0,r=Yb){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}const Jb="@azure/msal-angular",qm="3.1.0",Wm=new x("MSAL_INSTANCE"),Xb=new x("MSAL_GUARD_CONFIG"),Zb=new x("MSAL_INTERCEPTOR_CONFIG"),C2=new x("MSAL_BROADCAST_CONFIG");let Xr=(()=>{class n{constructor(t,r){this.instance=t,this.location=r;const o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary("@azure/msal-angular",qm)}initialize(){return fe(this.instance.initialize())}acquireTokenPopup(t){return fe(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return fe(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return fe(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return fe(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)))}loginPopup(t){return fe(this.instance.loginPopup(t))}loginRedirect(t){return fe(this.instance.loginRedirect(t))}logout(t){return fe(this.instance.logout(t))}logoutRedirect(t){return fe(this.instance.logoutRedirect(t))}logoutPopup(t){return fe(this.instance.logoutPopup(t))}ssoSilent(t){return fe(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(Jb,qm)),this.logger}setLogger(t){this.logger=t.clone(Jb,qm),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(M(Wm),M(_i))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),Ya=(()=>{class n{constructor(t,r,o){this.msalInstance=t,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new v2(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new nn,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new pn("startup"),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);const s=Z$.getInteractionStatusFromEvent(i,this._inProgress.value);null!==s&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return n.\u0275fac=function(t){return new(t||n)(M(Wm),M(Xr),M(C2,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),Ja=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){const r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,t):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===P.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(ee(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const o=this.getDestinationUrl(t.url);return this.authService.loginRedirect({redirectStartPage:o,...r}).pipe(ee(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==P.Popup&&this.msalGuardConfig.interactionType!==P.Redirect)throw new Da("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),U(!0);if(ue.hashContainsKnownProperties(window.location.hash)&&kd()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),U(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const r=this.location.path(!0);return this.authService.initialize().pipe(qn(()=>this.authService.handleRedirectObservable()),qn(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),U(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){const o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=0===this.location.prepareExternalUrl(t.url).indexOf("#");if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?U(this.parseUrl(this.location.path())):U(this.parseUrl(""))}return U(!0)}),Yn(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),U(this.loginFailedRoute)):U(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(M(Xb),M(Ya),M(Xr),M(_i),M(Nt))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),_2=(()=>{class n{constructor(t,r,o,i,s){this.msalInterceptorConfig=t,this.authService=r,this.location=o,this.msalBroadcastService=i,this._document=s}intercept(t,r){if(this.msalInterceptorConfig.interactionType!==P.Popup&&this.msalInterceptorConfig.interactionType!==P.Redirect)throw new Da("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");const o=this.getScopesForEndpoint(t.url,t.method);if(!o||0===o.length)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),r.handle(t);let i;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),i=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),i=this.authService.instance.getAllAccounts()[0]);const s="function"==typeof this.msalInterceptorConfig.authRequest?this.msalInterceptorConfig.authRequest(this.authService,t,{account:i}):{...this.msalInterceptorConfig.authRequest,account:i};return this.authService.getLogger().info(`Interceptor - ${o.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${o}] scopes found for ${t.url}`),this.acquireToken(s,o,i).pipe(kt(a=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");const c=t.headers.set("Authorization",`Bearer ${a.accessToken}`),l=t.clone({headers:c});return r.handle(l)}))}acquireToken(t,r,o){return this.authService.acquireTokenSilent({...t,scopes:r,account:o}).pipe(Yn(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(Tr(1),kt(i=>"none"===i?this.acquireTokenInteractively(t,r):this.msalBroadcastService.inProgress$.pipe(Rn(s=>"none"===s),Tr(1),kt(()=>this.acquireToken(t,r,o))))))),kt(i=>i.accessToken?U(i):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(Rn(s=>"none"===s),Tr(1),kt(()=>this.acquireTokenInteractively(t,r))))))}acquireTokenInteractively(t,r){if(this.msalInterceptorConfig.interactionType===P.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup({...t,scopes:r});this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");const o=window.location.href;return this.authService.acquireTokenRedirect({...t,scopes:r,redirectStartPage:o}),vn}getScopesForEndpoint(t,r){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");const o=this.location.normalize(t),i=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),s=this.matchResourcesToEndpoint(i,o);return s.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,s,r):null}matchResourcesToEndpoint(t,r){const o=[];return t.forEach(i=>{const s=this.location.normalize(i),a=this.getAbsoluteUrl(s),c=new URL(a),l=this.getAbsoluteUrl(r),u=new URL(l);this.checkUrlComponents(c,u)&&o.push(i)}),o}checkUrlComponents(t,r){const o=["protocol","host","pathname","search","hash"];for(const i of o)if(t[i]){const s=decodeURIComponent(t[i]);if(!yn.matchPattern(s,r[i]))return!1}return!0}getAbsoluteUrl(t){const r=this._document.createElement("a");return r.href=t,r.href}matchScopesToEndpoint(t,r,o){const i=[];return r.forEach(s=>{const a=[],c=t.get(s);null!==c?(c.forEach(l=>{if("string"==typeof l)a.push(l);else{const u=o.toLowerCase();l.httpMethod.toLowerCase()===u&&(null===l.scopes?i.push(null):l.scopes.forEach(h=>{a.push(h)}))}}),a.length>0&&i.push(a)):i.push(null)}),i.length>0?(i.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),i[0]):null}}return n.\u0275fac=function(t){return new(t||n)(M(Zb),M(Xr),M(_i),M(Ya),M(_t))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),E2=(()=>{class n{static forRoot(t,r,o){return{ngModule:n,providers:[{provide:Wm,useValue:t},{provide:Xb,useValue:r},{provide:Zb,useValue:o},Xr]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=sn({type:n}),n.\u0275inj=jt({providers:[Ja,Ya],imports:[vS]}),n})();let I2=(()=>{const e=class{getApiUrl(){return"http://localhost:5150/api"}getAzureApiUrl(){return"https://yourapp.azurewebsites.net/api"}isProduction(){return false}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),eD=(()=>{const e=class{constructor(r,o){this.http=r,this.apiConfig=o,this.baseUrl=`${this.apiConfig.getApiUrl()}/products`}getAllProducts(){return this.http.get(this.baseUrl)}getProductById(r){return this.http.get(`${this.baseUrl}/${r}`)}createProduct(r){return this.http.post(this.baseUrl,r,{headers:{"Content-Type":"application/json"}})}updateProduct(r,o){return this.http.put(`${this.baseUrl}/${r}`,o,{headers:{"Content-Type":"application/json"}})}deleteProduct(r){return this.http.delete(`${this.baseUrl}/${r}`)}};let n=e;return e.\u0275fac=function(o){return new(o||e)(M(JS),M(I2))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function w2(n,e){1&n&&(b(0,"div",10)(1,"div",11)(2,"span",12),O(3,"Loading..."),D()(),b(4,"p",13),O(5,"Loading products..."),D()())}function S2(n,e){if(1&n){const t=po();b(0,"div",14),O(1),b(2,"button",15),$e("click",function(){return Pr(t),xr(Je().loadProducts())}),O(3,"Retry"),D()()}if(2&n){const t=Je();B(1),dn(" ",t.errorMessage," ")}}function T2(n,e){1&n&&(b(0,"div",10),ie(1,"i",16),b(2,"h4"),O(3,"No products found"),D(),b(4,"p",17),O(5,"Start by adding your first product"),D(),b(6,"button",3),O(7,"Add Product"),D()())}const A2=function(n){return["/products/edit",n]};function b2(n,e){if(1&n){const t=po();b(0,"tr")(1,"td"),O(2),D(),b(3,"td")(4,"strong"),O(5),D()(),b(6,"td")(7,"small",17),O(8),D()(),b(9,"td")(10,"span",22),O(11),D()(),b(12,"td")(13,"span"),O(14),D()(),b(15,"td")(16,"span",23),O(17),D()(),b(18,"td")(19,"small"),O(20),D(),ie(21,"br"),b(22,"small",17),O(23),D()(),b(24,"td")(25,"div",24)(26,"button",25),ie(27,"i",26),O(28," Edit "),D(),b(29,"button",27),$e("click",function(){const i=Pr(t).$implicit;return xr(Je(2).deleteProduct(i.productId))}),ie(30,"i",28),O(31," Delete "),D()()()()}if(2&n){const t=e.$implicit,r=Je(2);B(2),mo(t.productId),B(3),mo(t.name),B(3),mo(t.description||"No description"),B(3),mo(r.formatPrice(t.price)),B(2),function kE(n){Sn(o0,Kn,n,!0)}(t.stockQuantity<=5?"badge bg-danger":"badge bg-info"),B(1),dn(" ",t.stockQuantity," "),B(3),dn("#",t.categoryId,""),B(3),mo(r.formatDate(t.createdAt)),B(3),dn("by ",t.createdBy,""),B(3),he("routerLink",VI(11,A2,t.productId))}}function D2(n,e){if(1&n&&(b(0,"div",18)(1,"table",19)(2,"thead",20)(3,"tr")(4,"th"),O(5,"ID"),D(),b(6,"th"),O(7,"Name"),D(),b(8,"th"),O(9,"Description"),D(),b(10,"th"),O(11,"Price"),D(),b(12,"th"),O(13,"Stock"),D(),b(14,"th"),O(15,"Category"),D(),b(16,"th"),O(17,"Created"),D(),b(18,"th"),O(19,"Actions"),D()()(),b(20,"tbody"),Ce(21,b2,32,13,"tr",21),D()()()),2&n){const t=Je();B(21),he("ngForOf",t.products)}}let R2=(()=>{const e=class{constructor(r){this.productService=r,this.products=[],this.isLoading=!0,this.errorMessage=""}ngOnInit(){this.loadProducts()}loadProducts(){this.isLoading=!0,this.productService.getAllProducts().subscribe({next:r=>{this.products=r,this.isLoading=!1},error:r=>{this.errorMessage="Failed to load products. Please try again.",this.isLoading=!1,console.error("Error loading products:",r)}})}deleteProduct(r){confirm("Are you sure you want to delete this product?")&&this.productService.deleteProduct(r).subscribe({next:()=>{this.products=this.products.filter(o=>o.productId!==r)},error:o=>{console.error("Error deleting product:",o),alert("Failed to delete product. Please try again.")}})}formatPrice(r){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r)}formatDate(r){return new Date(r).toLocaleDateString()}};let n=e;return e.\u0275fac=function(o){return new(o||e)(w(eD))},e.\u0275cmp=oo({type:e,selectors:[["app-product-list"]],decls:15,vars:4,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fas","fa-boxes","me-2"],["routerLink","/products/create",1,"btn","btn-primary"],[1,"fas","fa-plus","me-2"],[1,"btn","btn-outline-secondary","ms-2",3,"click"],[1,"fas","fa-sync-alt"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],["role","alert",1,"alert","alert-danger"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"fas","fa-inbox","fa-3x","text-muted","mb-3"],[1,"text-muted"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"badge","bg-success"],[1,"badge","bg-secondary"],[1,"btn-group","btn-group-sm"],[1,"btn","btn-outline-info",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-outline-danger","ms-1",3,"click"],[1,"fas","fa-trash"]],template:function(o,i){1&o&&(b(0,"div",0)(1,"div",1)(2,"h2"),ie(3,"i",2),O(4,"Products "),D(),b(5,"div")(6,"button",3),ie(7,"i",4),O(8,"Add New Product "),D(),b(9,"button",5),$e("click",function(){return i.loadProducts()}),ie(10,"i",6),D()()(),Ce(11,w2,6,0,"div",7),Ce(12,S2,4,1,"div",8),Ce(13,T2,8,0,"div",7),Ce(14,D2,22,1,"div",9),D()),2&o&&(B(11),he("ngIf",i.isLoading),B(1),he("ngIf",!i.isLoading&&i.errorMessage),B(1),he("ngIf",!i.isLoading&&!i.errorMessage&&0===i.products.length),B(1),he("ngIf",!i.isLoading&&!i.errorMessage&&i.products.length>0))},dependencies:[fS,Qs,Ea]}),n})();function M2(n,e){1&n&&(b(0,"div",4)(1,"div",5)(2,"span",6),O(3,"Loading..."),D()(),b(4,"p",7),O(5,"Loading product data..."),D()())}function k2(n,e){if(1&n){const t=po();b(0,"div",8),O(1),b(2,"button",9),$e("click",function(){return Pr(t),xr(Je().goBack())}),O(3,"Go Back"),D()()}if(2&n){const t=Je();B(1),dn(" ",t.errorMessage," ")}}function N2(n,e){1&n&&(b(0,"div"),O(1,"Product name is required"),D())}function O2(n,e){1&n&&(b(0,"div"),O(1,"Name must be at least 3 characters"),D())}function P2(n,e){1&n&&(b(0,"div"),O(1,"Name cannot exceed 100 characters"),D())}function x2(n,e){if(1&n&&(b(0,"div",44),Ce(1,N2,2,0,"div",43),Ce(2,O2,2,0,"div",43),Ce(3,P2,2,0,"div",43),D()),2&n){const t=Je(2);B(1),he("ngIf",null==t.name||null==t.name.errors?null:t.name.errors.required),B(1),he("ngIf",null==t.name||null==t.name.errors?null:t.name.errors.minlength),B(1),he("ngIf",null==t.name||null==t.name.errors?null:t.name.errors.maxlength)}}function F2(n,e){1&n&&(b(0,"div",44),O(1," Description cannot exceed 500 characters "),D())}function L2(n,e){1&n&&(b(0,"div"),O(1,"Price is required"),D())}function U2(n,e){1&n&&(b(0,"div"),O(1,"Price must be greater than 0"),D())}function H2(n,e){if(1&n&&(b(0,"div",45),Ce(1,L2,2,0,"div",43),Ce(2,U2,2,0,"div",43),D()),2&n){const t=Je(2);B(1),he("ngIf",null==t.price||null==t.price.errors?null:t.price.errors.required),B(1),he("ngIf",null==t.price||null==t.price.errors?null:t.price.errors.min)}}function V2(n,e){1&n&&(b(0,"div"),O(1,"Stock quantity is required"),D())}function B2(n,e){1&n&&(b(0,"div"),O(1,"Stock cannot be negative"),D())}function $2(n,e){if(1&n&&(b(0,"div",45),Ce(1,V2,2,0,"div",43),Ce(2,B2,2,0,"div",43),D()),2&n){const t=Je(2);B(1),he("ngIf",null==t.stockQuantity||null==t.stockQuantity.errors?null:t.stockQuantity.errors.required),B(1),he("ngIf",null==t.stockQuantity||null==t.stockQuantity.errors?null:t.stockQuantity.errors.min)}}function j2(n,e){1&n&&(b(0,"div"),O(1,"Category ID is required"),D())}function G2(n,e){1&n&&(b(0,"div"),O(1,"Category ID must be at least 1"),D())}function z2(n,e){if(1&n&&(b(0,"div",45),Ce(1,j2,2,0,"div",43),Ce(2,G2,2,0,"div",43),D()),2&n){const t=Je(2);B(1),he("ngIf",null==t.categoryId||null==t.categoryId.errors?null:t.categoryId.errors.required),B(1),he("ngIf",null==t.categoryId||null==t.categoryId.errors?null:t.categoryId.errors.min)}}function K2(n,e){if(1&n&&(b(0,"span"),ie(1,"i"),O(2),D()),2&n){const t=Je(2);B(1),Qf("fas ",t.isEditMode?"fa-save":"fa-check"," me-2"),B(1),dn(" ",t.isEditMode?"Update Product":"Create Product"," ")}}function q2(n,e){if(1&n&&(b(0,"span")(1,"div",46)(2,"span",6),O(3,"Loading..."),D()(),O(4),D()),2&n){const t=Je(2);B(4),dn(" ",t.isEditMode?"Updating...":"Creating..."," ")}}function W2(n,e){if(1&n){const t=po();b(0,"div",10)(1,"div",11)(2,"h4",12),ie(3,"i"),O(4),D()(),b(5,"div",13)(6,"form",14),$e("ngSubmit",function(){return Pr(t),xr(Je().onSubmit())}),b(7,"div",15)(8,"label",16),ie(9,"i",17),O(10,"Product Name * "),D(),ie(11,"input",18),Ce(12,x2,4,3,"div",19),D(),b(13,"div",15)(14,"label",20),ie(15,"i",21),O(16,"Description "),D(),ie(17,"textarea",22),Ce(18,F2,2,0,"div",19),D(),b(19,"div",23)(20,"div",24)(21,"label",25),ie(22,"i",26),O(23,"Price * "),D(),b(24,"div",27)(25,"span",28),O(26,"$"),D(),ie(27,"input",29),D(),Ce(28,H2,3,2,"div",30),D(),b(29,"div",24)(30,"label",31),ie(31,"i",32),O(32,"Stock Quantity * "),D(),ie(33,"input",33),Ce(34,$2,3,2,"div",30),D()(),b(35,"div",34)(36,"label",35),ie(37,"i",36),O(38,"Category ID * "),D(),ie(39,"input",37),b(40,"small",38),O(41,"Enter the numeric category identifier"),D(),Ce(42,z2,3,2,"div",30),D(),b(43,"div",39)(44,"button",40),$e("click",function(){return Pr(t),xr(Je().goBack())}),ie(45,"i",41),O(46,"Cancel "),D(),b(47,"button",42),Ce(48,K2,3,4,"span",43),Ce(49,q2,5,1,"span",43),D()()()()()}if(2&n){const t=Je();B(3),Qf("fas ",t.isEditMode?"fa-edit":"fa-plus-circle"," me-2"),B(1),dn(" ",t.isEditMode?"Edit Product":"Create New Product"," "),B(2),he("formGroup",t.productForm),B(5),yr("is-invalid",(null==t.name?null:t.name.invalid)&&((null==t.name?null:t.name.dirty)||(null==t.name?null:t.name.touched))),B(1),he("ngIf",(null==t.name?null:t.name.invalid)&&((null==t.name?null:t.name.dirty)||(null==t.name?null:t.name.touched))),B(5),yr("is-invalid",(null==t.description?null:t.description.invalid)&&((null==t.description?null:t.description.dirty)||(null==t.description?null:t.description.touched))),B(1),he("ngIf",(null==t.description?null:t.description.invalid)&&((null==t.description?null:t.description.dirty)||(null==t.description?null:t.description.touched))),B(9),yr("is-invalid",(null==t.price?null:t.price.invalid)&&((null==t.price?null:t.price.dirty)||(null==t.price?null:t.price.touched))),B(1),he("ngIf",(null==t.price?null:t.price.invalid)&&((null==t.price?null:t.price.dirty)||(null==t.price?null:t.price.touched))),B(5),yr("is-invalid",(null==t.stockQuantity?null:t.stockQuantity.invalid)&&((null==t.stockQuantity?null:t.stockQuantity.dirty)||(null==t.stockQuantity?null:t.stockQuantity.touched))),B(1),he("ngIf",(null==t.stockQuantity?null:t.stockQuantity.invalid)&&((null==t.stockQuantity?null:t.stockQuantity.dirty)||(null==t.stockQuantity?null:t.stockQuantity.touched))),B(5),yr("is-invalid",(null==t.categoryId?null:t.categoryId.invalid)&&((null==t.categoryId?null:t.categoryId.dirty)||(null==t.categoryId?null:t.categoryId.touched))),B(3),he("ngIf",(null==t.categoryId?null:t.categoryId.invalid)&&((null==t.categoryId?null:t.categoryId.dirty)||(null==t.categoryId?null:t.categoryId.touched))),B(5),he("disabled",t.productForm.invalid||t.isSubmitting),B(1),he("ngIf",!t.isSubmitting),B(1),he("ngIf",t.isSubmitting)}}let tD=(()=>{const e=class{constructor(r,o,i,s){this.fb=r,this.productService=o,this.route=i,this.router=s,this.isEditMode=!1,this.isLoading=!1,this.errorMessage="",this.isSubmitting=!1,this.productForm=this.fb.group({name:["",[Qn.required,Qn.minLength(3),Qn.maxLength(100)]],description:["",Qn.maxLength(500)],price:[0,[Qn.required,Qn.min(.01)]],stockQuantity:[0,[Qn.required,Qn.min(0)]],categoryId:[null,[Qn.required,Qn.min(1)]]})}ngOnInit(){this.route.params.subscribe(r=>{this.productId=r.id,this.isEditMode=!!this.productId,this.isEditMode&&this.productId&&this.loadProduct(this.productId)})}loadProduct(r){this.isLoading=!0,this.productService.getProductById(r).subscribe({next:o=>{this.productForm.patchValue({name:o.name,description:o.description,price:o.price,stockQuantity:o.stockQuantity,categoryId:o.categoryId}),this.isLoading=!1},error:o=>{this.errorMessage="Failed to load product. Please try again.",this.isLoading=!1,console.error("Error loading product:",o)}})}onSubmit(){this.productForm.valid&&!this.isSubmitting?(this.isSubmitting=!0,this.isEditMode&&this.productId?this.updateProduct():this.createProduct()):this.markFormGroupTouched(this.productForm)}createProduct(){this.productService.createProduct(this.productForm.value).subscribe({next:()=>{this.router.navigate(["/products"])},error:r=>{this.handleError(r,"creating")},complete:()=>{this.isSubmitting=!1}})}updateProduct(){this.productId&&this.productService.updateProduct(this.productId,this.productForm.value).subscribe({next:()=>{this.router.navigate(["/products"])},error:r=>{this.handleError(r,"updating")},complete:()=>{this.isSubmitting=!1}})}handleError(r,o){console.error(`Error ${o} product:`,r),this.errorMessage=`Failed to ${o} product. ${r.message||"Please try again."}`,this.isSubmitting=!1}markFormGroupTouched(r){Object.values(r.controls).forEach(o=>{o.markAsTouched(),o instanceof wi&&this.markFormGroupTouched(o)})}get name(){return this.productForm.get("name")}get description(){return this.productForm.get("description")}get price(){return this.productForm.get("price")}get stockQuantity(){return this.productForm.get("stockQuantity")}get categoryId(){return this.productForm.get("categoryId")}goBack(){this.router.navigate(["/products"])}};let n=e;return e.\u0275fac=function(o){return new(o||e)(w(gV),w(eD),w(To),w(Nt))},e.\u0275cmp=oo({type:e,selectors:[["app-product-form"]],decls:4,vars:3,consts:[[1,"container","mt-4"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","card shadow",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],["role","alert",1,"alert","alert-danger"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],[1,"fas","fa-tag","me-1"],["type","text","id","name","formControlName","name","placeholder","Enter product name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],[1,"fas","fa-align-left","me-1"],["id","description","formControlName","description","rows","3","placeholder","Enter product description (optional)",1,"form-control"],[1,"row"],[1,"col-md-6","mb-3"],["for","price",1,"form-label"],[1,"fas","fa-dollar-sign","me-1"],[1,"input-group"],[1,"input-group-text"],["type","number","id","price","formControlName","price","step","0.01","min","0.01","placeholder","0.00",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],["for","stockQuantity",1,"form-label"],[1,"fas","fa-boxes","me-1"],["type","number","id","stockQuantity","formControlName","stockQuantity","min","0","placeholder","0",1,"form-control"],[1,"mb-4"],["for","categoryId",1,"form-label"],[1,"fas","fa-folder","me-1"],["type","number","id","categoryId","formControlName","categoryId","min","1","placeholder","Enter category ID",1,"form-control"],[1,"form-text","text-muted"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left","me-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"invalid-feedback"],[1,"invalid-feedback","d-block"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(o,i){1&o&&(b(0,"div",0),Ce(1,M2,6,0,"div",1),Ce(2,k2,4,1,"div",2),Ce(3,W2,50,23,"div",3),D()),2&o&&(B(1),he("ngIf",i.isLoading),B(1),he("ngIf",!i.isLoading&&i.errorMessage),B(1),he("ngIf",!i.isLoading))},dependencies:[Qs,YT,Pl,Ig,xT,FT,Rg,Kl,Ag]}),n})();const Q2=[{path:"",redirectTo:"/products",pathMatch:"full"},{path:"login",component:(()=>{const e=class{constructor(r){this.authService=r}ngOnInit(){const r=this.authService.instance.getAllAccounts();r.length>0&&this.authService.instance.setActiveAccount(r[0])}login(){this.authService.loginPopup().subscribe({next:r=>{console.log("Login successful",r),this.authService.instance.setActiveAccount(r.account)},error:r=>{console.error("Login failed",r),alert("Login failed. Please try again.")}})}};let n=e;return e.\u0275fac=function(o){return new(o||e)(w(Xr))},e.\u0275cmp=oo({type:e,selectors:[["app-login"]],decls:23,vars:0,consts:[[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white","text-center"],[1,"mb-0"],[1,"fas","fa-sign-in-alt","me-2"],[1,"card-body","p-5","text-center"],[1,"mb-4"],[1,"fas","fa-cloud","fa-4x","text-primary","mb-3"],[1,"text-muted"],[1,"btn","btn-primary","btn-lg","w-100",3,"click"],[1,"fab","fa-microsoft","me-2"],[1,"mt-4"],[1,"alert","alert-info"],[1,"fas","fa-info-circle","me-2"]],template:function(o,i){1&o&&(b(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),ie(6,"i",6),O(7,"TradeHub - Azure AD Login "),D()(),b(8,"div",7)(9,"div",8),ie(10,"i",9),b(11,"h5"),O(12,"Azure Active Directory Authentication"),D(),b(13,"p",10),O(14," Sign in with your organization account to access TradeHub "),D()(),b(15,"button",11),$e("click",function(){return i.login()}),ie(16,"i",12),O(17,"Sign in with Microsoft "),D(),b(18,"div",13)(19,"div",14),ie(20,"i",15),b(21,"small"),O(22," You will be redirected to Microsoft's login page. Use your organization credentials. "),D()()()()()()()())},encapsulation:2}),n})()},{path:"products",component:R2,canActivate:[Ja]},{path:"products/create",component:tD,canActivate:[Ja]},{path:"products/edit/:id",component:tD,canActivate:[Ja]},{path:"**",redirectTo:"/products"}];let Y2=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=sn({type:e}),e.\u0275inj=jt({imports:[Tb.forRoot(Q2),Tb]}),n})();var Ne=(()=>{return(n=Ne||(Ne={}))[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",Ne;var n})();class Zr{constructor(e,t,r){this.level=Ne.Info;const i=e||Zr.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:Ne.Info,this.correlationId=i.correlationId||C.EMPTY_STRING,this.packageName=t||C.EMPTY_STRING,this.packageVersion=r||C.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ne.Info}}clone(e,t,r){return new Zr({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const i=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${Ne[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:Ne.Error,containsPii:!1,correlationId:t||C.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Ne.Error,containsPii:!0,correlationId:t||C.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Ne.Warning,containsPii:!1,correlationId:t||C.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Ne.Warning,containsPii:!0,correlationId:t||C.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Ne.Info,containsPii:!1,correlationId:t||C.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Ne.Info,containsPii:!0,correlationId:t||C.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Ne.Verbose,containsPii:!1,correlationId:t||C.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Ne.Verbose,containsPii:!0,correlationId:t||C.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Ne.Trace,containsPii:!1,correlationId:t||C.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Ne.Trace,containsPii:!0,correlationId:t||C.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Mr={AAD:"AAD",OIDC:"OIDC"},Ym_None="none",Nd={createNewGuid:()=>{throw S(ae)},base64Decode:()=>{throw S(ae)},base64Encode:()=>{throw S(ae)},base64UrlEncode:()=>{throw S(ae)},encodeKid:()=>{throw S(ae)},getPublicKeyThumbprint:()=>y(function*(){throw S(ae)})(),removeTokenBindingKey:()=>y(function*(){throw S(ae)})(),clearKeystore:()=>y(function*(){throw S(ae)})(),signJwt:()=>y(function*(){throw S(ae)})(),hashString:()=>y(function*(){throw S(ae)})()},nD="@azure/msal-common",Jm="14.16.1";function Ro(n,e){const t=function J2(n){if(!n)throw S(Hu);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw S(Oa);return t[2]}(n);try{const r=e(t);return JSON.parse(r)}catch{throw S(Oa)}}function rD(n,e){if(0===e||Date.now()-3e5>n+e)throw S(zu)}function er(){return Math.round((new Date).getTime()/1e3)}function Xm(n,e){const t=Number(n)||0;return er()+e>t}function ji(n){return[Z2(n),ej(n),tj(n),nj(n),rj(n)].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}function Od(n,e,t,r,o){return{credentialType:W.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function Pd(n,e,t,r,o,i,s,a,c,l,u,d,h,f,g){const m={homeAccountId:n,credentialType:W.ACCESS_TOKEN,secret:t,cachedAt:er().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||Ee.BEARER};if(d&&(m.userAssertionHash=d),l&&(m.refreshOn=l.toString()),f&&(m.requestedClaims=f,m.requestedClaimsHash=g),m.tokenType?.toLowerCase()!==Ee.BEARER.toLowerCase())switch(m.credentialType=W.ACCESS_TOKEN_WITH_AUTH_SCHEME,m.tokenType){case Ee.POP:const v=Ro(t,c);if(!v?.cnf?.kid)throw S(Ju);m.keyId=v.cnf.kid;break;case Ee.SSH:m.keyId=h}return m}function oD(n,e,t,r,o,i,s){const a={credentialType:W.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function Zm(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function iD(n){return!!n&&Zm(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===W.ACCESS_TOKEN||n.credentialType===W.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function sD(n){return!!n&&Zm(n)&&n.hasOwnProperty("realm")&&n.credentialType===W.ID_TOKEN}function aD(n){return!!n&&Zm(n)&&n.credentialType===W.REFRESH_TOKEN}function Z2(n){return[n.homeAccountId,n.environment].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}function ej(n){return[n.credentialType,n.credentialType===W.REFRESH_TOKEN&&n.familyId||n.clientId,n.realm||""].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}function tj(n){return(n.target||"").toLowerCase()}function nj(n){return(n.requestedClaimsHash||"").toLowerCase()}function rj(n){return n.tokenType&&n.tokenType.toLowerCase()!==Ee.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function cD(){return er()+vu.REFRESH_TIME_SECONDS}function xd(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function ey(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function lD(n){return n.expiresAt<=er()}class qe{constructor(e){const t=e?yn.trimArrayEntries([...e]):[],r=t?yn.removeEmptyStringsFromArray(t):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||C.EMPTY_STRING).split(" ");return new qe(r)}static createSearchScopes(e){const t=new qe(e);return t.containsOnlyOIDCScopes()?t.removeScope(C.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw we(bu)}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new qe(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return bb.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw S(Qu)}}removeScope(e){if(!e)throw S(Wu);this.scopes.delete(e.trim())}removeOIDCScopes(){bb.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw S(xa);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw S(xa);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):C.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Fd(n,e){if(!n)throw S(Uu);try{const t=e(n);return JSON.parse(t)}catch{throw S(Na)}}function Gi(n){if(!n)throw S(Na);const e=n.split(wt.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?C.EMPTY_STRING:e[1]}}function Ld(n,e){return!!n&&!!e&&n===e.split(".")[1]}function ty(n,e,t,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l}=r,u=s||c||l||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:Ld(u,n)}}return{tenantId:t,localAccountId:e,isHomeTenant:Ld(t,n)}}function ny(n,e,t,r){let o=n;if(e){const{isHomeTenant:i,...s}=e;o={...n,...s}}if(t){const{isHomeTenant:i,...s}=ty(n.homeAccountId,n.localAccountId,n.tenantId,t);return o={...o,...s,idTokenClaims:t,idToken:r},o}return o}function uD(n){return n&&(n.tid||n.tfp||n.acr)||null}class it{generateAccountId(){return[this.homeAccountId,this.environment].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return it.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){const o=new it;let i;o.authorityType=1===t.authorityType?"ADFS":t.protocolMode===Mr.AAD?"MSSTS":"Generic",e.clientInfo&&r&&(i=Fd(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||t&&t.getPreferredCache();if(!s)throw S(La);if(o.environment=s,o.realm=i?.utid||uD(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"",o.username=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn||(e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null)||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const l=ty(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){const o=new it;return o.authorityType=e.authorityType||"Generic",o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,r,o,i){if(1!==t&&2!==t){if(e)try{const s=Fd(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}}const hD={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},ry={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},fD=new Set;function pD(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){const o=Ud(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function Ud(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.aliases.includes(e))return r}return null}ry.metadata.forEach(n=>{n.aliases.forEach(e=>{fD.add(e)})});const oy="cache_quota_exceeded",iy="cache_error_unknown",sy={[oy]:"Exceeded cache storage capacity.",[iy]:"Unexpected error occurred when using cache storage."};class zi extends Error{constructor(e,t){const r=t||(sy[e]?sy[e]:sy[iy]);super(`${e}: ${r}`),Object.setPrototypeOf(this,zi.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function gD(n){return n instanceof Error?"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name||n.message.includes("exceeded the quota")?new zi(oy):new zi(n.name,n.message):new zi(iy)}class Ki{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(nD,Jm),this.staticAuthorityOptions=o}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(t||{},e),e,t)}getAccountInfoFilteredBy(e,t){const r=this.getAllAccounts(t,e);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,o,i){let a,s=null;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;const c=this.getIdToken(e,o,t,r.tenantId);return c&&(a=Ro(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=ny(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,o){const i=e.getAccountInfo();let s=i.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const l=s.get(r);if(!l)return[];s=new Map([[r,l]])}const c=[];return s.forEach(l=>{const u=this.getTenantedAccountInfoByFilter(i,a,l,t,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r){var o=this;return y(function*(){if(!e)throw S(Yu);try{e.account&&o.setAccount(e.account,t),e.idToken&&!1!==r?.idToken&&o.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==r?.accessToken&&(yield o.saveAccessToken(e.accessToken,t)),e.refreshToken&&!1!==r?.refreshToken&&o.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&o.setAppMetadata(e.appMetadata,t)}catch(i){throw o.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof ke?i:gD(i)}})()}saveAccessToken(e,t){var r=this;return y(function*(){const o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=r.getTokenKeys(),s=qe.fromString(e.target);i.accessToken.forEach(a=>{if(!r.accessTokenKeyMatchesFilter(a,o,!1))return;const c=r.getAccessTokenCredential(a,t);c&&r.credentialMatchesFilter(c,o)&&qe.fromString(c.target).intersectingScopeSets(s)&&r.removeAccessToken(a,t)}),r.setAccessTokenCredential(e,t)})()}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),o=[];return r.forEach(i=>{if(!this.isAccountKey(i,e.homeAccountId))return;const s=this.getAccount(i,t,this.commonLogger);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;const a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&0===c.length||o.push(s)}),o}isAccountKey(e,t,r){return!(e.split(wt.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(wt.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(W.ID_TOKEN.toLowerCase())&&-1===t.indexOf(W.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(W.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(W.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(W.REFRESH_TOKEN.toLowerCase())>-1){const o=`${W.REFRESH_TOKEN}${wt.CACHE_KEY_SEPARATOR}1${wt.CACHE_KEY_SEPARATOR}`;if(-1===t.indexOf(`${W.REFRESH_TOKEN}${wt.CACHE_KEY_SEPARATOR}${this.clientId}${wt.CACHE_KEY_SEPARATOR}`.toLowerCase())&&-1===t.indexOf(o.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||"string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===W.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Ee.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||-1===o.indexOf(this.clientId))return;const i=this.getAuthorityMetadata(o);i&&-1!==i.aliases.indexOf(e)&&(r=i)}),r}removeAllAccounts(e){var t=this;return y(function*(){const r=t.getAccountKeys(),o=[];r.forEach(i=>{o.push(t.removeAccount(i,e))}),yield Promise.all(o)})()}removeAccount(e,t){var r=this;return y(function*(){const o=r.getAccount(e,t,r.commonLogger);o&&(yield r.removeAccountContext(o,t),r.removeItem(e,t))})()}removeAccountContext(e,t){var r=this;return y(function*(){const o=r.getTokenKeys(),i=e.generateAccountId();o.idToken.forEach(s=>{0===s.indexOf(i)&&r.removeIdToken(s,t)}),o.accessToken.forEach(s=>{0===s.indexOf(i)&&r.removeAccessToken(s,t)}),o.refreshToken.forEach(s=>{0===s.indexOf(i)&&r.removeRefreshToken(s,t)}),r.getKeys().forEach(s=>{s.includes(i)&&r.removeItem(s,t)})})()}updateOutdatedCachedAccount(e,t,r,o){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(u=>u.startsWith(t.homeAccountId)),s=[];i.forEach(u=>{const d=this.getCachedAccountEntity(u,r);d&&s.push(d)});const a=s.find(u=>Ld(u.realm,u.homeAccountId))||s[0];a.tenantProfiles=s.map(u=>({tenantId:u.realm,localAccountId:u.localAccountId,name:u.name,isHomeTenant:Ld(u.realm,u.homeAccountId)}));const c=Ki.toObject(new it,{...a}),l=c.generateAccountKey();return i.forEach(u=>{u!==l&&this.removeOutdatedAccount(e,r)}),this.setAccount(c,r),o?.verbose("Updated an outdated account entity in the cache"),c}return t}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),!r||r.credentialType.toLowerCase()!==W.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Ee.POP)return;const o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error("Binding key could not be removed")})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}readAccountFromCache(e,t){const r=it.generateAccountCacheKey(e);return this.getAccount(r,t,this.commonLogger)}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const a=this.getIdTokensByFilter({homeAccountId:e.homeAccountId,environment:e.environment,credentialType:W.ID_TOKEN,clientId:this.clientId,realm:o},t,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){const u=new Map;a.forEach((h,f)=>{h.realm===e.tenantId&&u.set(f,h)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){const o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(s,t);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const s=qe.createSearchScopes(t.scopes),a=t.authenticationScheme||Ee.BEARER,c=a&&a.toLowerCase()!==Ee.BEARER.toLowerCase()?W.ACCESS_TOKEN_WITH_AUTH_SCHEME:W.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,l,!0)){const g=this.getAccessTokenCredential(f,t.correlationId);g&&this.credentialMatchesFilter(g,l)&&d.push(g)}});const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach(f=>{this.removeAccessToken(ji(f),t.correlationId)}),i&&t.correlationId&&i.addFields({multiMatchedAT:d.length},t.correlationId),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,r){const o=e.toLowerCase();if(t.clientId&&-1===o.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===o.indexOf(t.homeAccountId.toLowerCase())||t.realm&&-1===o.indexOf(t.realm.toLowerCase())||t.requestedClaimsHash&&-1===o.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;const s=this.getAccessTokenCredential(i,t);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:W.REFRESH_TOKEN,clientId:this.clientId,familyId:t?"1":void 0},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const h=this.getRefreshTokenCredential(d,r);h&&this.credentialMatchesFilter(h,a)&&l.push(h)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&-1===r.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const r=this.getAppMetadataFilteredBy({environment:e,clientId:this.clientId}),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw S(Ku);return o[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||"1"!==t.familyId)}matchHomeAccountId(e,t){return"string"==typeof e.homeAccountId&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const o=function lj(n,e){let t;const r=n.canonicalAuthority;if(r){const o=new ue(r).getUrlComponents().HostNameAndPort;t=pD(o,n.cloudDiscoveryMetadata?.metadata,Jt_CONFIG,e)||pD(o,ry.metadata,Jt_HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==W.ACCESS_TOKEN&&e.credentialType!==W.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&qe.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(cm)}isAuthorityMetadata(e){return-1!==e.indexOf(vu.CACHE_KEY)}generateAuthorityMetadataCacheKey(e){return`${vu.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class dj extends Ki{setAccount(){throw S(ae)}getAccount(){throw S(ae)}getCachedAccountEntity(){throw S(ae)}setIdTokenCredential(){throw S(ae)}getIdTokenCredential(){throw S(ae)}setAccessTokenCredential(){throw S(ae)}getAccessTokenCredential(){throw S(ae)}setRefreshTokenCredential(){throw S(ae)}getRefreshTokenCredential(){throw S(ae)}setAppMetadata(){throw S(ae)}getAppMetadata(){throw S(ae)}setServerTelemetry(){throw S(ae)}getServerTelemetry(){throw S(ae)}setAuthorityMetadata(){throw S(ae)}getAuthorityMetadata(){throw S(ae)}getAuthorityMetadataKeys(){throw S(ae)}setThrottlingCache(){throw S(ae)}getThrottlingCache(){throw S(ae)}removeItem(){throw S(ae)}getKeys(){throw S(ae)}getAccountKeys(){throw S(ae)}getTokenKeys(){throw S(ae)}updateCredentialCacheKey(){throw S(ae)}removeOutdatedAccount(){throw S(ae)}}const mD={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},hj={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ne.Info,correlationId:C.EMPTY_STRING},fj={claimsBasedCachingEnabled:!1},pj={sendGetRequestAsync:()=>y(function*(){throw S(ae)})(),sendPostRequestAsync:()=>y(function*(){throw S(ae)})()},gj={sku:C.SKU,version:Jm,cpu:C.EMPTY_STRING,os:C.EMPTY_STRING},mj={clientSecret:C.EMPTY_STRING,clientAssertion:void 0},yj={azureCloudInstance:Ym_None,tenant:`${C.DEFAULT_COMMON_TENANT}`},vj={application:{appName:"",appVersion:""}};function _j(n){return{clientCapabilities:[],azureCloudOptions:yj,skipAuthorityMetadataCache:!1,instanceAware:!1,...n}}function ay(n){return n.authOptions.authority.options.protocolMode===Mr.OIDC}const Ej={sendGetRequestAsync:()=>Promise.reject(S(ae)),sendPostRequestAsync:()=>Promise.reject(S(ae))};class yD{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Ij{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new yD}}startPerformanceMeasurement(){return new yD}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}class Hd{navigateInternal(e,t){return Hd.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Hd.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}}class Vd extends ke{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Vd.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function vD(n,e,t){return new Vd(n,e,t)}class wj{sendGetRequestAsync(e,t){return y(function*(){let r,o={},i=0;const s=CD(t);try{r=yield fetch(e,{method:"GET",headers:s})}catch{throw L(window.navigator.onLine?yd:$i)}o=_D(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch{throw vD(L(Ka),i,o)}})()}sendPostRequestAsync(e,t){return y(function*(){const r=t&&t.body||"",o=CD(t);let i,s=0,a={};try{i=yield fetch(e,{method:"POST",headers:o,body:r})}catch{throw L(window.navigator.onLine?md:$i)}a=_D(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch{throw vD(L(Ka),s,a)}})()}}function CD(n){try{const e=new Headers;return n&&n.headers?(Object.entries(n.headers).forEach(([r,o])=>{e.append(r,o)}),e):e}catch{throw L(Lb)}}function _D(n){try{const e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw L(Ub)}}const cy=1e4,qi="3.30.0";class ly{static loggerCallback(e,t){switch(e){case Ne.Error:return void console.error(t);case Ne.Info:return void console.info(t);case Ne.Verbose:return void console.debug(t);case Ne.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){let t;this.browserEnvironment=typeof window<"u",this.config=function bj({auth:n,cache:e,system:t,telemetry:r},o){const i={clientId:C.EMPTY_STRING,authority:`${C.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:C.EMPTY_STRING,authorityMetadata:C.EMPTY_STRING,redirectUri:typeof window<"u"?Rr():"",postLogoutRedirectUri:C.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Mr.AAD,OIDCOptions:{serverResponseType:wa.FRAGMENT,defaultScopes:[C.OPENID_SCOPE,C.PROFILE_SCOPE,C.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Ym_None,tenant:C.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:Pt.SessionStorage,temporaryCacheLocation:Pt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!e||e.cacheLocation!==Pt.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Ne.Info,piiLoggingEnabled:!1},l={...{...mD,loggerOptions:a,networkClient:o?new wj:Ej,navigationClient:new Hd,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||6e4,iframeHashTimeout:t?.loadFrameTimeout||cy,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:Xt.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:t?.loggerOptions||a},u={application:{appName:C.EMPTY_STRING,appVersion:C.EMPTY_STRING},client:new Ij};if(n?.protocolMode!==Mr.OIDC&&n?.OIDCOptions&&new Zr(l.loggerOptions).warning(JSON.stringify(we(xu))),n?.protocolMode&&n.protocolMode!==Mr.AAD&&l?.allowNativeBroker)throw we(Fu);return{auth:{...i,...n,OIDCOptions:{...i.OIDCOptions,...n?.OIDCOptions}},cache:{...s,...e},system:l,telemetry:{...u,...r}}}(e,this.browserEnvironment);try{t=window[Pt.SessionStorage]}catch{}const r=t?.getItem("msal.browser.log.level"),o=t?.getItem("msal.browser.log.pii")?.toLowerCase(),i="true"===o||"false"!==o&&void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(Ne).includes(r)?Ne[r]:void 0;a&&(s.loggerCallback=ly.loggerCallback,s.logLevel=a),void 0!==i&&(s.piiLoggingEnabled=i),this.logger=new Zr(s,"@azure/msal-browser",qi),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let ED=(()=>{class n extends ly{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){var t=this;return y(function*(){return t.available=typeof window<"u",t.available})()}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();const ID="missing_kid_error",wD="missing_alg_error",Rj={[ID]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[wD]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class uy extends ke{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,uy.prototype)}}function SD(n){return new uy(n,Rj[n])}class dy{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw SD(ID);if(!e.alg)throw SD(wD);const t=new dy({typ:e.typ||"pop",kid:e.kid,alg:e.alg});return JSON.stringify(t)}}function tr(n){return(new TextDecoder).decode(function Mj(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw L(bd)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}(n))}class kj{constructor(){this.dbName=um,this.version=1,this.tableName=Q$,this.dbOpen=!1}open(){var e=this;return y(function*(){return new Promise((t,r)=>{const o=window.indexedDB.open(e.dbName,e.version);o.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(e.tableName)}),o.addEventListener("success",i=>{e.db=i.target.result,e.dbOpen=!0,t()}),o.addEventListener("error",()=>r(L(Wa)))})})()}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){var e=this;return y(function*(){if(!e.dbOpen)return e.open()})()}getItem(e){var t=this;return y(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(L(Jr));const a=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).get(e);a.addEventListener("success",c=>{const l=c;t.closeConnection(),r(l.target.result)}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}setItem(e,t){var r=this;return y(function*(){return yield r.validateDbIsOpen(),new Promise((o,i)=>{if(!r.db)return i(L(Jr));const c=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(t,e);c.addEventListener("success",()=>{r.closeConnection(),o()}),c.addEventListener("error",l=>{r.closeConnection(),i(l)})})})()}removeItem(e){var t=this;return y(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(L(Jr));const a=t.db.transaction([t.tableName],"readwrite").objectStore(t.tableName).delete(e);a.addEventListener("success",()=>{t.closeConnection(),r()}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}getKeys(){var e=this;return y(function*(){return yield e.validateDbIsOpen(),new Promise((t,r)=>{if(!e.db)return r(L(Jr));const s=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();s.addEventListener("success",a=>{const c=a;e.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{e.closeConnection(),r(a)})})})()}containsKey(e){var t=this;return y(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(L(Jr));const a=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).count(e);a.addEventListener("success",c=>{const l=c;t.closeConnection(),r(1===l.target.result)}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}deleteDatabase(){var e=this;return y(function*(){return e.db&&e.dbOpen&&e.closeConnection(),new Promise((t,r)=>{const o=window.indexedDB.deleteDatabase(um),i=setTimeout(()=>r(!1),200);o.addEventListener("success",()=>(clearTimeout(i),t(!0))),o.addEventListener("blocked",()=>(clearTimeout(i),t(!0))),o.addEventListener("error",()=>(clearTimeout(i),r(!1)))})})()}}class hy{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class Nj{constructor(e){this.inMemoryCache=new hy,this.indexedDBCache=new kj,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof Qa&&e.errorCode===Wa))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(e){var t=this;return y(function*(){const r=t.inMemoryCache.getItem(e);if(!r)try{return t.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield t.indexedDBCache.getItem(e)}catch(o){t.handleDatabaseAccessError(o)}return r})()}setItem(e,t){var r=this;return y(function*(){r.inMemoryCache.setItem(e,t);try{yield r.indexedDBCache.setItem(e,t)}catch(o){r.handleDatabaseAccessError(o)}})()}removeItem(e){var t=this;return y(function*(){t.inMemoryCache.removeItem(e);try{yield t.indexedDBCache.removeItem(e)}catch(r){t.handleDatabaseAccessError(r)}})()}getKeys(){var e=this;return y(function*(){const t=e.inMemoryCache.getKeys();if(0===t.length)try{return e.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield e.indexedDBCache.getKeys()}catch(r){e.handleDatabaseAccessError(r)}return t})()}containsKey(e){var t=this;return y(function*(){const r=t.inMemoryCache.containsKey(e);if(!r)try{return t.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield t.indexedDBCache.containsKey(e)}catch(o){t.handleDatabaseAccessError(o)}return r})()}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){var e=this;return y(function*(){try{e.logger.verbose("Deleting persistent keystore");const t=yield e.indexedDBCache.deleteDatabase();return t&&e.logger.verbose("Persistent keystore deleted"),t}catch(t){return e.handleDatabaseAccessError(t),!1}})()}}let Oj=(()=>{class n{constructor(t,r,o){this.logger=t,function i2(n){if(!window)throw L(Bi);if(!window.crypto)throw L(ja);if(!n&&!window.crypto.subtle)throw L(ja,"crypto_subtle_undefined")}(o??!1),this.cache=new Nj(this.logger),this.performanceClient=r}createNewGuid(){return Zn()}base64Encode(t){return Fm(t)}base64Decode(t){return tr(t)}base64UrlEncode(t){return Rd(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){var r=this;return y(function*(){const o=r.performanceClient?.startMeasurement(p.CryptoOptsGetPublicKeyThumbprint,t.correlationId),i=yield function a2(n,e){return Vm.apply(this,arguments)}(n.EXTRACTABLE,n.POP_KEY_USAGES),s=yield Bm(i.publicKey),c=TD({e:s.e,kty:s.kty,n:s.n}),l=yield r.hashString(c),u=yield Bm(i.privateKey),d=yield function c2(n,e,t){return jm.apply(this,arguments)}(u,!1,["sign"]);return yield r.cache.setItem(l,{privateKey:d,publicKey:i.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),o&&o.end({success:!0}),l})()}removeTokenBindingKey(t){var r=this;return y(function*(){return yield r.cache.removeItem(t),!(yield r.cache.containsKey(t))})()}clearKeystore(){var t=this;return y(function*(){t.cache.clearInMemory();try{return yield t.cache.clearPersistent(),!0}catch(r){return r instanceof Error?t.logger.error(`Clearing keystore failed with error: ${r.message}`):t.logger.error("Clearing keystore failed with unknown error"),!1}})()}signJwt(t,r,o,i){var s=this;return y(function*(){const a=s.performanceClient?.startMeasurement(p.CryptoOptsSignJwt,i),c=yield s.cache.getItem(r);if(!c)throw L(qa);const l=yield Bm(c.publicKey),u=TD(l),d=Rd(JSON.stringify({kid:r})),f=Rd(dy.getShrHeaderString({...o?.header,alg:l.alg,kid:d}));t.cnf={jwk:JSON.parse(u)};const m=`${f}.${Rd(JSON.stringify(t))}`,E=(new TextEncoder).encode(m),A=yield function l2(n,e){return Gm.apply(this,arguments)}(c.privateKey,E),H=`${m}.${Md(new Uint8Array(A))}`;return a&&a.end({success:!0}),H})()}hashString(t){return y(function*(){return zb(t)})()}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function TD(n){return JSON.stringify(n,Object.keys(n).sort())}const Mo=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);o&&r?.incrementFields({[e+"CallCount"]:1},o);try{const a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},R=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);return o&&r?.incrementFields({[e+"CallCount"]:1},o),r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};let Lj=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){var o=this;return y(function*(){o.performanceClient?.addQueueMeasurement(p.RegionDiscoveryDetectRegion,o.correlationId);let i=t;if(i)r.region_source="3";else{const s=n.IMDS_OPTIONS;try{const a=yield R(o.getRegionFromIMDS.bind(o),p.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(C.IMDS_VERSION,s);if(200===a.status&&(i=a.body,r.region_source="4"),400===a.status){const c=yield R(o.getCurrentVersion.bind(o),p.RegionDiscoveryGetCurrentVersion,o.logger,o.performanceClient,o.correlationId)(s);if(!c)return r.region_source="1",null;const l=yield R(o.getRegionFromIMDS.bind(o),p.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(c,s);200===l.status&&(i=l.body,r.region_source="4")}}catch{return r.region_source="1",null}}return i||(r.region_source="1"),i||null})()}getRegionFromIMDS(t,r){var o=this;return y(function*(){return o.performanceClient?.addQueueMeasurement(p.RegionDiscoveryGetRegionFromIMDS,o.correlationId),o.networkInterface.sendGetRequestAsync(`${C.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,C.IMDS_TIMEOUT)})()}getCurrentVersion(t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.RegionDiscoveryGetCurrentVersion,r.correlationId);try{const o=yield r.networkInterface.sendGetRequestAsync(`${C.IMDS_ENDPOINT}?format=json`,t);return 400===o.status&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}})()}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();class St{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new Lj(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(C.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case C.ADFS:return 1;case C.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new ue(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw S(Mn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw S(Mn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw S(Mn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw S(Zu);return this.replacePath(this.metadata.end_session_endpoint)}throw S(Mn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw S(Mn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw S(Mn)}canReplaceTenant(e){return 1===e.PathSegments.length&&!St.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&this.protocolMode===Mr.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const o=new ue(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(0===c&&this.canReplaceTenant(o)){const u=new ue(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode!==Mr.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityResolveEndpointsAsync,e.correlationId);const t=e.getCurrentMetadataEntity(),r=yield R(e.updateCloudDiscoveryMetadata.bind(e),p.AuthorityUpdateCloudDiscoveryMetadata,e.logger,e.performanceClient,e.correlationId)(t);e.canonicalAuthority=e.canonicalAuthority.replace(e.hostnameAndPort,t.preferred_network);const o=yield R(e.updateEndpointMetadata.bind(e),p.AuthorityUpdateEndpointMetadata,e.logger,e.performanceClient,e.correlationId)(t);e.updateCachedMetadata(t,r,{source:o}),e.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},e.correlationId)})()}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:cD(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==Jt_CACHE&&r?.source!==Jt_CACHE&&(e.expiresAt=cD(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateEndpointMetadata,t.correlationId);const r=t.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Jt_HARDCODED_VALUES&&t.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){const i=yield R(t.updateMetadataWithRegionalInformation.bind(t),p.AuthorityUpdateMetadataWithRegionalInformation,t.logger,t.performanceClient,t.correlationId)(r.metadata);xd(e,i,!1),e.canonical_authority=t.canonicalAuthority}return r.source}let o=yield R(t.getEndpointMetadataFromNetwork.bind(t),p.AuthorityGetEndpointMetadataFromNetwork,t.logger,t.performanceClient,t.correlationId)();if(o)return t.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=yield R(t.updateMetadataWithRegionalInformation.bind(t),p.AuthorityUpdateMetadataWithRegionalInformation,t.logger,t.performanceClient,t.correlationId)(o)),xd(e,o,!0),Jt_NETWORK;throw S(Bu,t.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),xd(e,t,!1),{source:Jt_CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return xd(e,o,!1),{source:Jt_HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=lD(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Jt_CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new ue(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw we(Nu)}return null}getEndpointMetadataFromNetwork(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityGetEndpointMetadataFromNetwork,e.correlationId);const t={},r=e.defaultOpenIdConfigurationEndpoint;e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const o=yield e.networkInterface.sendGetRequestAsync(r,t);return function Pj(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}(o.body)?o.body:(e.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in hD?hD[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateMetadataWithRegionalInformation,t.correlationId);const r=t.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==C.AZURE_REGION_AUTO_DISCOVER_FLAG)return t.regionDiscoveryMetadata.region_outcome="2",t.regionDiscoveryMetadata.region_used=r,St.replaceWithRegionalInformation(e,r);const o=yield R(t.regionDiscovery.detectRegion.bind(t.regionDiscovery),p.RegionDiscoveryDetectRegion,t.logger,t.performanceClient,t.correlationId)(t.authorityOptions.azureRegionConfiguration?.environmentRegion,t.regionDiscoveryMetadata);if(o)return t.regionDiscoveryMetadata.region_outcome="4",t.regionDiscoveryMetadata.region_used=o,St.replaceWithRegionalInformation(e,o);t.regionDiscoveryMetadata.region_outcome="5"}return e})()}updateCloudDiscoveryMetadata(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateCloudDiscoveryMetadata,t.correlationId);const r=t.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const o=yield R(t.getCloudDiscoveryMetadataFromNetwork.bind(t),p.AuthorityGetCloudDiscoveryMetadataFromNetwork,t.logger,t.performanceClient,t.correlationId)();if(o)return ey(e,o,!0),Jt_NETWORK;throw we(Ou)})()}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||C.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||C.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||C.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),ey(e,t,!1),Jt_CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=function uj(n){return Ud(ry.metadata,n)}(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),ey(e,o,!1),Jt_HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=lD(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Jt_CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),St.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const t=Ud(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),we(ka)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),St.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityGetCloudDiscoveryMetadataFromNetwork,e.correlationId);const t=`${C.AAD_INSTANCE_DISCOVERY_ENDPT}${e.canonicalAuthority}oauth2/v2.0/authorize`,r={};let o=null;try{const i=yield e.networkInterface.sendGetRequestAsync(t,r);let s,a;if(function xj(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}(i.body))s=i.body,a=s.metadata,e.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else{if(!function Fj(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}(i.body))return e.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(e.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===C.INVALID_INSTANCE)return e.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),e.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}e.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=Ud(a,e.hostnameAndPort)}catch(i){return e.logger.error(i instanceof ke?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${i.errorCode}\nError Description: ${i.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${i.name}\nError Description: ${i.message}`),null}return o||(e.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),e.logger.verbose("Creating custom Authority for custom domain scenario."),o=St.createCloudDiscoveryMetadataFromHost(e.hostnameAndPort)),o})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&ue.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;return t&&t.azureCloudInstance!==Ym_None&&(r=`${t.azureCloudInstance}/${t.tenant?t.tenant:C.DEFAULT_COMMON_TENANT}/`),r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return C.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw S(Mn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return fD.has(e)}static isPublicCloudAuthority(e){return C.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const o=new ue(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${C.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=ue.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=St.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=St.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=St.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const o=new ue(e).getUrlComponents();return 0===o.PathSegments.length&&o.HostNameAndPort.endsWith(C.CIAM_AUTH_URL)&&(t=`${t}${o.HostNameAndPort.split(".")[0]}${C.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function AD(n){return n.endsWith(C.FORWARD_SLASH)?n:`${n}${C.FORWARD_SLASH}`}St.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Wr_COMMON,Wr_CONSUMERS,Wr_ORGANIZATIONS]);const Wi="no_tokens_found",Bd="native_account_unavailable",fy="refresh_token_expired",Qi="bad_token",bD=["interaction_required","consent_required","login_required",Qi],jj=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],$d={[Wi]:"No refresh token found in the cache. Please sign-in.",[Bd]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[fy]:"Refresh token has expired.",[Qi]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class On extends ke{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,On.prototype),this.timestamp=o||C.EMPTY_STRING,this.traceId=i||C.EMPTY_STRING,this.correlationId=s||C.EMPTY_STRING,this.claims=a||C.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function DD(n,e,t){const r=!!n&&bD.indexOf(n)>-1,o=!!t&&jj.indexOf(t)>-1,i=!!e&&bD.some(s=>e.indexOf(s)>-1);return r||i||o}function py(n){return new On(n,$d[n])}class Pn{static setRequestState(e,t,r){const o=Pn.generateLibraryState(e,r);return t?`${o}${C.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw S(Ha);const r={id:e.createNewGuid()};t&&(r.meta=t);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw S(Ha);if(!t)throw S(Yr);try{const r=t.split(C.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(C.RESOURCE_DELIM):C.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||C.EMPTY_STRING,libraryState:a}}catch{throw S(Yr)}}}class Gj{constructor(){if(!window.localStorage)throw fm(ba)}getItem(e){return window.localStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}}class zj{constructor(){if(!window.sessionStorage)throw fm(ba)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function RD(n,e){if(!e)return null;try{return Pn.parseRequestState(n,e).libraryState.meta}catch{throw S(Yr)}}class qj{getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}setItem(e,t,r,o=!0){let i=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;if(r){i+=`expires=${function Wj(n){return new Date((new Date).getTime()+864e5*n).toUTCString()}(r)};`}o&&(i+="Secure;"),document.cookie=i}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}}class gy extends Ki{constructor(e,t,r,o,i,s){super(e,r,o,i),this.cacheConfig=t,this.logger=o,this.internalStorage=new hy,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new qj,t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){try{switch(e){case Pt.LocalStorage:return new Gj;case Pt.SessionStorage:return new zj}}catch(t){this.logger.error(t)}return this.cacheConfig.cacheLocation=Pt.MemoryStorage,new hy}migrateCacheEntries(){const e=this.browserStorage.getItem("msal.version");e&&this.logger.info(`MSAL.js was last initialized with version ${e}`),e!==qi&&this.browserStorage.setItem("msal.version",qi);const r=`${C.CACHE_PREFIX}.${st.CLIENT_INFO}`,o=`${C.CACHE_PREFIX}.${st.ERROR}`,i=`${C.CACHE_PREFIX}.${st.ERROR_DESC}`,u=[this.browserStorage.getItem(`${C.CACHE_PREFIX}.${st.ID_TOKEN}`),this.browserStorage.getItem(r),this.browserStorage.getItem(o),this.browserStorage.getItem(i)];[st.ID_TOKEN,st.CLIENT_INFO,st.ERROR,st.ERROR_DESC].forEach((h,f)=>{const g=u[f];g&&this.setTemporaryCache(h,g,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.cryptoImpl.createNewGuid(),t=this.getItem("msal.account.keys"),r=this.getItem(`msal.token.keys.${this.clientId}`);t&&r?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(i=>{if(this.isCredentialKey(i)){const s=this.getItem(i);if(s){const a=this.validateAndParseJson(s);if(a&&a.hasOwnProperty("credentialType"))switch(a.credentialType){case W.ID_TOKEN:if(sD(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,W.ID_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${i}`);break;case W.ACCESS_TOKEN:case W.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(iD(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,W.ACCESS_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${i}`);break;case W.REFRESH_TOKEN:if(aD(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,W.REFRESH_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${i}`)}}}if(this.isAccountKey(i)){const s=this.getItem(i);if(s){const a=this.validateAndParseJson(s);a&&it.isAccountEntity(a)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${i} found, saving key to account key map`),this.addAccountKeyToMap(i,e))}}})}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t,r){let o=[];for(let s=0;s<=20;s++)try{this.browserStorage.setItem(e,t),s>0&&this.removeAccessTokenKeys(o.slice(0,s),r);break}catch(a){const c=gD(a);if(!(c.errorCode===oy&&s<20))throw c;if(o.length||(o=e===`msal.token.keys.${this.clientId}`?JSON.parse(t).accessToken:this.getTokenKeys().accessToken),o.length<=s)throw c;this.removeAccessToken(o[s],r,!1)}}getAccount(e,t,r){this.logger.trace("BrowserCacheManager.getAccount called");const o=this.getCachedAccountEntity(e,t);return this.updateOutdatedCachedAccount(e,o,t,r)}getCachedAccountEntity(e,t){const r=this.getItem(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;const o=this.validateAndParseJson(r);return o&&it.isAccountEntity(o)?Ki.toObject(new it,o):null}setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const r=e.generateAccountKey();e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),t),this.addAccountKeyToMap(r,t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem("msal.account.keys");return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();-1===r.indexOf(e)?(r.push(e),this.setItem("msal.account.keys",JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),o=r.indexOf(e);if(o>-1){if(r.splice(o,1),0===r.length)return void this.removeItem("msal.account.keys");this.setItem("msal.account.keys",JSON.stringify(r),t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){var r=()=>super.removeAccount,o=this;return y(function*(){r().call(o,e,t),o.removeAccountKeyFromMap(e,t)})()}removeOutdatedAccount(e,t){this.removeItem(e),this.removeAccountKeyFromMap(e,t)}removeIdToken(e,t){super.removeIdToken(e,t),this.removeTokenKey(e,W.ID_TOKEN,t)}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),this.performanceClient?.incrementFields({accessTokensRemoved:1},t),r&&this.removeTokenKey(e,W.ACCESS_TOKEN,t)}removeAccessTokenKeys(e,t){this.logger.trace("removeAccessTokenKey called");const r=this.getTokenKeys();let o=0;if(e.forEach(i=>{const s=r.accessToken.indexOf(i);s>-1&&(r.accessToken.splice(s,1),o++)}),o>0)return this.logger.info(`removed ${o} accessToken keys from tokenKeys map`),void this.setTokenKeys(r,t)}removeRefreshToken(e,t){super.removeRefreshToken(e,t),this.removeTokenKey(e,W.REFRESH_TOKEN,t)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`msal.token.keys.${this.clientId}`);if(e){const t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}setTokenKeys(e,t){0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(`msal.token.keys.${this.clientId}`,JSON.stringify(e),t):this.removeItem(`msal.token.keys.${this.clientId}`)}addTokenKey(e,t,r){this.logger.trace("BrowserCacheManager addTokenKey called");const o=this.getTokenKeys();switch(t){case W.ID_TOKEN:-1===o.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(e));break;case W.ACCESS_TOKEN:const i=o.accessToken.indexOf(e);-1!==i&&o.accessToken.splice(i,1),this.logger.trace(`access token ${-1===i?"added to":"updated in"} map`),o.accessToken.push(e);break;case W.REFRESH_TOKEN:-1===o.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),S(Va)}this.setTokenKeys(o,r)}removeTokenKey(e,t,r,o=this.getTokenKeys()){switch(this.logger.trace("BrowserCacheManager removeTokenKey called"),t){case W.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const i=o.idToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case W.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const s=o.accessToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case W.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const a=o.refreshToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),S(Va)}this.setTokenKeys(o,r)}getIdTokenCredential(e,t){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const o=this.validateAndParseJson(r);return o&&sD(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null)}setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=ji(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),t),this.addTokenKey(r,W.ID_TOKEN,t)}getAccessTokenCredential(e,t){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,W.ACCESS_TOKEN,t),null;const o=this.validateAndParseJson(r);return o&&iD(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=ji(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),t),this.addTokenKey(r,W.ACCESS_TOKEN,t)}getRefreshTokenCredential(e,t){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,W.REFRESH_TOKEN,t),null;const o=this.validateAndParseJson(r);return o&&aD(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=ji(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),t),this.addTokenKey(r,W.REFRESH_TOKEN,t)}getAppMetadata(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function aj(n,e){return!!e&&0===n.indexOf(cm)&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment")}(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function sj({environment:n,clientId:e}){return[cm,n,e].join(wt.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function oj(n,e){const t=0===n.indexOf(pt.CACHE_KEY);let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function cj(n,e){return!!e&&0===n.indexOf(vu.CACHE_KEY)&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem("wrapper.sku",e),this.internalStorage.setItem("wrapper.version",t)}getWrapperMetadata(){return[this.internalStorage.getItem("wrapper.sku")||C.EMPTY_STRING,this.internalStorage.getItem("wrapper.version")||C.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey(st.ACTIVE_ACCOUNT_FILTERS),r=this.getItem(t);if(!r){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const i=this.generateCacheKey(st.ACTIVE_ACCOUNT),s=this.getItem(i);if(!s)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const a=this.getAccountInfoFilteredBy({localAccountId:s},e);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(a,e),a):null}const o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const r=this.generateCacheKey(st.ACTIVE_ACCOUNT_FILTERS),o=this.generateCacheKey(st.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Date.now().toString()};this.setItem(r,JSON.stringify(i),t),this.setItem(o,e.localAccountId,t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r),this.browserStorage.removeItem(o)}getThrottlingCache(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function ij(n,e){let t=!1;n&&(t=0===n.indexOf(Ta_THROTTLING_PREFIX));let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===Pt.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){var t=this;return y(function*(){yield t.removeAllAccounts(e),t.removeAppMetadata(e),t.temporaryCacheStorage.getKeys().forEach(r=>{(-1!==r.indexOf(C.CACHE_PREFIX)||-1!==r.indexOf(t.clientId))&&t.removeTemporaryItem(r)}),t.browserStorage.getKeys().forEach(r=>{(-1!==r.indexOf(C.CACHE_PREFIX)||-1!==r.indexOf(t.clientId))&&t.browserStorage.removeItem(r)}),t.internalStorage.clear()})()}clearTokensAndKeysWithClaims(e,t){var r=this;return y(function*(){e.addQueueMeasurement(p.ClearTokensAndKeysWithClaims,t);const o=r.getTokenKeys();let i=0;o.accessToken.forEach(s=>{const a=r.getAccessTokenCredential(s,t);a?.requestedClaimsHash&&s.includes(a.requestedClaimsHash.toLowerCase())&&(r.removeAccessToken(s,t),i++)}),i>0&&r.logger.warning(`${i} access tokens with claims in the cache keys have been removed from the cache.`)})()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):yn.startsWith(e,C.CACHE_PREFIX)||yn.startsWith(e,st.ADAL_ID_TOKEN)?e:`${C.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:t}}=Pn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`authority.${t}`)}generateNonceKey(e){const{libraryState:{id:t}}=Pn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`nonce.id_token.${t}`)}generateStateKey(e){const{libraryState:{id:t}}=Pn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`request.state.${t}`)}getCachedAuthority(e){const t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,t,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);const c=this.generateAuthorityKey(e);this.setTemporaryCache(c,r,!1),i?this.setTemporaryCache("ccs.credential",JSON.stringify({credential:i.homeAccountId,type:"home_account_id"}),!0):o&&this.setTemporaryCache("ccs.credential",JSON.stringify({credential:o,type:"UPN"}),!0)}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{-1!==t.indexOf(e)&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey("request.params")),this.removeTemporaryItem(this.generateCacheKey("request.origin")),this.removeTemporaryItem(this.generateCacheKey("urlHash")),this.removeTemporaryItem(this.generateCacheKey("request.correlationId")),this.removeTemporaryItem(this.generateCacheKey("ccs.credential")),this.removeTemporaryItem(this.generateCacheKey("request.native")),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||C.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(-1===t.indexOf("request.state"))return;const r=this.temporaryCacheStorage.getItem(t);if(!r)return;const o=RD(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=Fm(JSON.stringify(e));this.setTemporaryCache("request.params",t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache("request.params",!0);if(!t)throw L(pd);let r;try{r=JSON.parse(tr(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),L(gd)}if(this.removeTemporaryItem(this.generateCacheKey("request.params")),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw L(za);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache("request.native",!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){return this.getTemporaryCache(`${C.CACHE_PREFIX}.interaction.status`,!1)}setInteractionInProgress(e){const t=`${C.CACHE_PREFIX}.interaction.status`;if(e){if(this.getInteractionInProgress())throw L(sd);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}getLegacyLoginHint(){const e=this.getTemporaryCache(st.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(st.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const t=this.getTemporaryCache(st.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(st.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=t||e;if(r){const o=Ro(r,tr);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t,r){const o=ji(t);if(e!==o){const i=this.getItem(e);if(i)return this.browserStorage.removeItem(e),this.setItem(o,i,r),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),o;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,t){var r=this;return y(function*(){const o=Od(e.account?.homeAccountId,e.account?.environment,e.idToken,r.clientId,e.tenantId);let i;t.claims&&(i=yield r.cryptoImpl.hashString(t.claims));const s=Pd(e.account?.homeAccountId,e.account.environment,e.accessToken,r.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,tr,void 0,e.tokenType,void 0,t.sshKid,t.claims,i);return r.saveCacheRecord({idToken:o,accessToken:s},e.correlationId)})()}saveCacheRecord(e,t,r){var o=()=>super.saveCacheRecord,i=this;return y(function*(){try{yield o().call(i,e,t,r)}catch(s){if(s instanceof zi&&i.performanceClient&&t)try{const a=i.getTokenKeys();i.performanceClient.addFields({cacheRtCount:a.refreshToken.length,cacheIdCount:a.idToken.length,cacheAtCount:a.accessToken.length},t)}catch{}throw s}})()}}class rG{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Zr({})}addEventCallback(e,t,r){if(typeof window<"u"){const o=r||function y2(){return Zn()}();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],c)=>{(0===a.length||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),s.apply(null,[i]))})}}}class eo extends ke{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,eo.prototype)}}class nr{static generateThrottlingStorageKey(e){return`${Ta_THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){const o=nr.generateThrottlingStorageKey(t),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void e.removeItem(o,r);throw new eo(i.errorCodes?.join(" ")||C.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,o){if(nr.checkResponseStatus(r)||nr.checkResponseForRetryAfter(r)){const i={throttleTime:nr.calculateThrottleTime(parseInt(r.headers["Retry-After"])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(nr.generateThrottlingStorageKey(t),i,o)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty("Retry-After")&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||Ta_DEFAULT_THROTTLE_TIME_SECONDS),r+Ta_DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(e,t,r,o){const s=this.generateThrottlingStorageKey({clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid});e.removeItem(s,r.correlationId)}}const ko="client_id",MD="redirect_uri",kD="response_type",ND="token_type",OD="req_cnf",PD="return_spa_code",my="brk_client_id",yy="brk_redirect_uri";class Yi{static validateRedirectUri(e){if(!e)throw we(Su)}static validatePrompt(e){const t=[];for(const r in at)t.push(at[r]);if(t.indexOf(e)<0)throw we(Du)}static validateClaims(e){try{JSON.parse(e)}catch{throw we(Ra)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw we(Ma);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([Db.PLAIN,Db.S256].indexOf(e)<0)throw we(ku)}}class Xa{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(kD,encodeURIComponent(C.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(kD,encodeURIComponent(`${C.TOKEN_RESPONSE_TYPE} ${C.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||j$.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e,t=!0,r=Pi){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=t?[...e||[],...r]:e||[],i=new qe(o);this.parameters.set("scope",encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(ko,encodeURIComponent(e))}addRedirectUri(e){Yi.validateRedirectUri(e),this.parameters.set(MD,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Yi.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){const r=this.addClientCapabilitiesToClaims(e,t);Yi.validateClaims(r),this.parameters.set("claims",encodeURIComponent(r))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){Yi.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,t){if(Yi.validateCodeChallengeParams(e,t),!e||!t)throw we(Ma);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(t))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,r])=>{!this.parameters.has(t)&&r&&this.parameters.set(t,r)})}addClientCapabilitiesToClaims(e,t){let r;if(e)try{r=JSON.parse(e)}catch{throw we(Ra)}else r={};return t&&t.length>0&&(r.hasOwnProperty("access_token")||(r.access_token={}),r.access_token.xms_cc={values:t}),JSON.stringify(r)}addUsername(e){this.parameters.set("username",encodeURIComponent(e))}addPassword(e){this.parameters.set("password",encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(ND,Ee.POP),this.parameters.set(OD,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(ND,Ee.SSH),this.parameters.set(OD,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability",Ta_X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const t={};t[my]=e.brokerClientId,t[yy]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){const e=new Array;return this.parameters.forEach((t,r)=>{e.push(`${r}=${t}`)}),function VG(n,e,t){if(!e)return;const r=n.get(ko);r&&n.has(my)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(MD)},e)}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}function xD(n,e,t,r,o,i,s){return vy.apply(this,arguments)}function vy(){return(vy=y(function*(n,e,t,r,o,i,s){s?.addQueueMeasurement(p.AuthorityFactoryCreateDiscoveredInstance,i);const a=St.transformCIAMAuthority(AD(n)),c=new St(a,e,t,r,o,i,s);try{return yield R(c.resolveEndpointsAsync.bind(c),p.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw S(Mn)}})).apply(this,arguments)}class Cy{constructor(e,t){this.config=function Cj({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){const f={...hj,...t};return{authOptions:_j(n),systemOptions:{...mD,...e},loggerOptions:f,cacheOptions:{...fj,...r},storageInterface:o||new dj(n.clientId,Nd,new Zr(f)),networkInterface:i||pj,cryptoInterface:s||Nd,clientCredentials:a||mj,libraryInfo:{...gj,...c},telemetry:{...vj,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new Zr(this.config.loggerOptions,nD,Jm),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t["Content-Type"]=C.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case"home_account_id":try{const r=Gi(e.credential);t["X-AnchorMailbox"]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case"UPN":t["X-AnchorMailbox"]=`UPN: ${e.credential}`}return t}executePostToTokenEndpoint(e,t,r,o,i,s){var a=this;return y(function*(){s&&a.performanceClient?.addQueueMeasurement(s,i);const c=yield a.sendPostRequest(o,e,{body:t,headers:r},i);return a.config.serverTelemetryManager&&c.status<500&&429!==c.status&&a.config.serverTelemetryManager.clearTelemetryCache(),c})()}sendPostRequest(e,t,r,o){var i=this;return y(function*(){let s;nr.preProcess(i.cacheManager,e,o);try{s=yield R(i.networkClient.sendPostRequestAsync.bind(i.networkClient),p.NetworkClientSendPostRequestAsync,i.logger,i.performanceClient,o)(t,r);const a=s.headers||{};i.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:a["x-ms-httpver"]||"",requestId:a["x-ms-request-id"]||""},o)}catch(a){if(a instanceof Vd){const c=a.responseHeaders;throw c&&i.performanceClient?.addFields({httpVerToken:c["x-ms-httpver"]||"",requestId:c["x-ms-request-id"]||"",contentTypeHeader:c["Content-Type"]||void 0,contentLengthHeader:c["Content-Length"]||void 0,httpStatus:a.httpStatus},o),a.error}throw a instanceof ke?a:S(Vu)}return nr.postProcess(i.cacheManager,e,s,o),s})()}updateAuthority(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.UpdateTokenEndpointAuthority,t);const o=`https://${e}/${r.authority.tenant}/`,i=yield xD(o,r.networkClient,r.cacheManager,r.authority.options,r.logger,t,r.performanceClient);r.authority=i})()}createTokenQueryParameters(e){const t=new Xa(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}}class Ji{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.PopTokenGenerateCnf,e.correlationId);const o=yield R(r.generateKid.bind(r),p.PopTokenGenerateCnf,t,r.performanceClient,e.correlationId)(e),i=r.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:i}})()}generateKid(e){var t=this;return y(function*(){return t.performanceClient?.addQueueMeasurement(p.PopTokenGenerateKid,e.correlationId),{kid:yield t.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}})()}signPopToken(e,t,r){var o=this;return y(function*(){return o.signPayload(e,t,r)})()}signPayload(e,t,r,o){var i=this;return y(function*(){const{resourceRequestMethod:s,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=r,h=(a?new ue(a):void 0)?.getUrlComponents();return i.cryptoUtils.signJwt({at:e,ts:er(),m:s?.toUpperCase(),u:h?.HostNameAndPort,nonce:l||i.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:c||void 0,...o},t,u,r.correlationId)})()}}class $G{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class No{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw S(Ui,e.state?"Cached State":"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw S(Yr,e.state)}try{o=decodeURIComponent(t)}catch{throw S(Yr,e.state)}if(r!==o)throw S(ju);if(e.error||e.error_description||e.suberror){const i=function jG(n){const e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}(e);throw DD(e.error,e.error_description,e.suberror)?new On(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new eo(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const o=e.error_codes?.length?e.error_codes[0]:void 0,i=new eo(e.error,`Error(s): ${e.error_codes||C.NOT_AVAILABLE} - Timestamp: ${e.timestamp||C.NOT_AVAILABLE} - Description: ${e.error_description||C.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||C.NOT_AVAILABLE} - Trace ID: ${e.trace_id||C.NOT_AVAILABLE}`,e.suberror,o,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);throw DD(e.error,e.error_description,e.suberror)?new On(e.error,e.error_description,e.suberror,e.timestamp||C.EMPTY_STRING,e.trace_id||C.EMPTY_STRING,e.correlation_id||C.EMPTY_STRING,e.claims||C.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){var u=this;return y(function*(){let d,h;if(u.performanceClient?.addQueueMeasurement(p.HandleServerTokenResponse,e.correlation_id),e.id_token){if(d=Ro(e.id_token||C.EMPTY_STRING,u.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw S(Gu);if(o.maxAge||0===o.maxAge){const m=d.auth_time;if(!m)throw S(Pa);rD(m,o.maxAge)}}u.homeAccountIdentifier=it.generateHomeAccountId(e.client_info||C.EMPTY_STRING,t.authorityType,u.logger,u.cryptoObj,d),i&&i.state&&(h=Pn.parseRequestState(u.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const f=u.generateCacheRecord(e,t,r,o,d,s,i);let g;try{if(u.persistencePlugin&&u.serializableCache&&(u.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new $G(u.serializableCache,!0),yield u.persistencePlugin.beforeCacheAccess(g)),a&&!c&&f.account){const m=f.account.generateAccountKey();if(!u.cacheStorage.getAccount(m,o.correlationId,u.logger))return u.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield No.generateAuthenticationResult(u.cryptoObj,t,f,!1,o,d,h,void 0,l)}yield u.cacheStorage.saveCacheRecord(f,o.correlationId,o.storeInCache)}finally{u.persistencePlugin&&u.serializableCache&&g&&(u.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield u.persistencePlugin.afterCacheAccess(g))}return No.generateAuthenticationResult(u.cryptoObj,t,f,!1,o,d,h,e,l)})()}generateCacheRecord(e,t,r,o,i,s,a){const c=t.getPreferredCache();if(!c)throw S(La);const l=uD(i);let u,d;e.id_token&&i&&(u=Od(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=_y(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let h=null;if(e.access_token){const m=e.scope?qe.fromString(e.scope):new qe(o.scopes||[]),v=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,E=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,A=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,_=r+v,H=_+E,le=A&&A>0?r+A:void 0;h=Pd(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",m.printScopes(),_,H,this.cryptoObj.base64Decode,le,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let f=null;if(e.refresh_token){let m;e.refresh_token_expires_in&&(m=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),f=oD(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,m)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:h,refreshToken:f,appMetadata:g}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return y(function*(){let f,g,u=C.EMPTY_STRING,d=[],h=null,m=C.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==Ee.POP||i.popKid)u=r.accessToken.secret;else{const _=new Ji(e),{secret:H,keyId:le}=r.accessToken;if(!le)throw S(Ba);u=yield _.signPopToken(H,le,i)}d=qe.fromString(r.accessToken.target).asArray(),h=new Date(1e3*Number(r.accessToken.expiresOn)),f=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),r.accessToken.refreshOn&&(g=new Date(1e3*Number(r.accessToken.refreshOn)))}r.appMetadata&&(m="1"===r.appMetadata.familyId?"1":"");const v=s?.oid||s?.sub||"",E=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);const A=r.account?ny(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:v,tenantId:E,scopes:d,account:A,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:h,extExpiresOn:f,refreshOn:g,correlationId:i.correlationId,requestId:l||C.EMPTY_STRING,familyId:m,tokenType:r.accessToken?.tokenType||C.EMPTY_STRING,state:a?a.userRequestState:C.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||C.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||C.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})()}}function _y(n,e,t,r,o,i,s,a,c,l,u,d){d?.verbose("setCachedAccount called");const f=n.getAccountKeys().find(A=>A.startsWith(t));let g=null;f&&(g=n.getAccount(f,o,d));const m=g||it.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),v=m.tenantProfiles||[],E=c||m.realm;if(E&&!v.find(A=>A.tenantId===E)){const A=ty(t,m.localAccountId,E,i);v.push(A)}return m.tenantProfiles=v,m}function FD(n,e,t){return Ey.apply(this,arguments)}function Ey(){return(Ey=y(function*(n,e,t){return"string"==typeof n?n:n({clientId:e,tokenEndpoint:t})})).apply(this,arguments)}class LD extends Cy{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.GetAuthCodeUrl,e.correlationId);const r=yield R(t.createAuthCodeUrlQueryString.bind(t),p.AuthClientCreateQueryString,t.logger,t.performanceClient,e.correlationId)(e);return ue.appendQueryString(t.authority.authorizationEndpoint,r)})()}acquireToken(e,t){var r=this;return y(function*(){if(r.performanceClient?.addQueueMeasurement(p.AuthClientAcquireToken,e.correlationId),!e.code)throw S(qu);const o=er(),i=yield R(r.executeTokenRequest.bind(r),p.AuthClientExecuteTokenRequest,r.logger,r.performanceClient,e.correlationId)(r.authority,e),s=i.headers?.["x-ms-request-id"],a=new No(r.config.authOptions.clientId,r.cacheManager,r.cryptoUtils,r.logger,r.config.serializableCache,r.config.persistencePlugin,r.performanceClient);return a.validateTokenResponse(i.body),R(a.handleServerTokenResponse.bind(a),p.HandleServerTokenResponse,r.logger,r.performanceClient,e.correlationId)(i.body,r.authority,o,e,t,void 0,void 0,void 0,s)})()}handleFragmentResponse(e,t){if(new No(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw S(Xu);return e}getLogoutUri(e){if(!e)throw we(Mu);const t=this.createLogoutUrlQueryString(e);return ue.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.AuthClientExecuteTokenRequest,t.correlationId);const o=r.createTokenQueryParameters(t),i=ue.appendQueryString(e.tokenEndpoint,o),s=yield R(r.createTokenRequestBody.bind(r),p.AuthClientCreateTokenRequestBody,r.logger,r.performanceClient,t.correlationId)(t);let a;if(t.clientInfo)try{const u=Fd(t.clientInfo,r.cryptoUtils.base64Decode);a={credential:`${u.uid}${wt.CLIENT_INFO_SEPARATOR}${u.utid}`,type:"home_account_id"}}catch(u){r.logger.verbose("Could not parse client info for CCS Header: "+u)}const c=r.createTokenRequestHeaders(a||t.ccsCredential),l={clientId:t.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return R(r.executePostToTokenEndpoint.bind(r),p.AuthorizationCodeClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,t.correlationId)(i,s,c,l,t.correlationId,p.AuthorizationCodeClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.AuthClientCreateTokenRequestBody,e.correlationId);const r=new Xa(e.correlationId,t.performanceClient);if(r.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[ko]||t.config.authOptions.clientId),t.includeRedirectUri?r.addRedirectUri(e.redirectUri):Yi.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,t.oidcDefaultScopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(t.config.libraryInfo),r.addApplicationTelemetry(t.config.telemetry.application),r.addThrottling(),t.serverTelemetryManager&&!ay(t.config)&&r.addServerTelemetry(t.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),t.config.clientCredentials.clientSecret&&r.addClientSecret(t.config.clientCredentials.clientSecret),t.config.clientCredentials.clientAssertion){const i=t.config.clientCredentials.clientAssertion;r.addClientAssertion(yield FD(i.assertion,t.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(i.assertionType)}if(r.addGrantType("authorization_code"),r.addClientInfo(),e.authenticationScheme===Ee.POP){const i=new Ji(t.cryptoUtils,t.performanceClient);let s;s=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield R(i.generateCnf.bind(i),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,r.addPopToken(s)}else if(e.authenticationScheme===Ee.SSH){if(!e.sshJwk)throw we(Li);r.addSshJwk(e.sshJwk)}let o;if((!yn.isEmptyObj(e.claims)||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,t.config.authOptions.clientCapabilities),e.clientInfo)try{const i=Fd(e.clientInfo,t.cryptoUtils.base64Decode);o={credential:`${i.uid}${wt.CLIENT_INFO_SEPARATOR}${i.utid}`,type:"home_account_id"}}catch(i){t.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(t.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case"home_account_id":try{const i=Gi(o.credential);r.addCcsOid(i)}catch(i){t.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":r.addCcsUpn(o.credential)}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:t.config.authOptions.clientId,brokerRedirectUri:t.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[PD])&&r.addExtraQueryParameters({[PD]:"1"}),r.createQueryString()})()}createAuthCodeUrlQueryString(e){var t=this;return y(function*(){const r=e.correlationId||t.config.cryptoInterface.createNewGuid();t.performanceClient?.addQueueMeasurement(p.AuthClientCreateQueryString,r);const o=new Xa(r,t.performanceClient);o.addClientId(e.embeddedClientId||e.extraQueryParameters?.[ko]||t.config.authOptions.clientId);const i=[...e.scopes||[],...e.extraScopesToConsent||[]];if(o.addScopes(i,!0,t.oidcDefaultScopes),o.addRedirectUri(e.redirectUri),o.addCorrelationId(r),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(t.config.libraryInfo),ay(t.config)||o.addApplicationTelemetry(t.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==at.SELECT_ACCOUNT)if(e.sid&&e.prompt===at.NONE)t.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){const s=t.extractAccountSid(e.account);let a=t.extractLoginHint(e.account);if(a&&e.domainHint&&(t.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),a=null),a){t.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(a);try{const c=Gi(e.account.homeAccountId);o.addCcsOid(c)}catch{t.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===at.NONE){t.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(s);try{const c=Gi(e.account.homeAccountId);o.addCcsOid(c)}catch{t.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){t.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{const c=Gi(e.account.homeAccountId);o.addCcsOid(c)}catch{t.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else t.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(e.claims||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,t.config.authOptions.clientCapabilities),e.embeddedClientId&&o.addBrokerParameters({brokerClientId:t.config.authOptions.clientId,brokerRedirectUri:t.config.authOptions.redirectUri}),t.addExtraQueryParams(e,o),e.nativeBroker&&(o.addNativeBroker(),e.authenticationScheme===Ee.POP)){const s=new Ji(t.cryptoUtils);let a;a=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield R(s.generateCnf.bind(s),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,o.addPopToken(a)}return o.createQueryString()})()}createLogoutUrlQueryString(e){const t=new Xa(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}const UD=",",HD="|";class Za{constructor(e,t){this.cacheOutcome="0",this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||C.EMPTY_STRING,this.wrapperVer=e.wrapperVer||C.EMPTY_STRING,this.telemetryCacheKey=pt.CACHE_KEY+wt.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${pt.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const o=t.join(pt.VALUE_SEPARATOR),s=[e,this.getRegionDiscoveryFields()].join(pt.VALUE_SEPARATOR);return[pt.SCHEMA_VERSION,s,o].join(pt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=Za.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(pt.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(pt.VALUE_SEPARATOR),i=e.errors.length,a=[i,t<i?pt.OVERFLOW_TRUE:pt.OVERFLOW_FALSE].join(pt.VALUE_SEPARATOR);return[pt.SCHEMA_VERSION,e.cacheHits,r,o,a].join(pt.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=pt.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?t.errors.push(e instanceof ke?e.subError?e.subError:e.errorCode?e.errorCode:e.toString():e.toString()):t.errors.push(pt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=Za.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const o={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,o=0;const i=e.errors.length;for(t=0;t<i;t++){const a=e.failedRequests[2*t+1]||C.EMPTY_STRING,c=e.errors[t]||C.EMPTY_STRING;if(o+=(e.failedRequests[2*t]||C.EMPTY_STRING).toString().length+a.toString().length+c.length+3,!(o<pt.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||C.EMPTY_STRING),e.push(this.regionSource||C.EMPTY_STRING),e.push(this.regionOutcome||C.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function GG(n){const{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]);let a=[];if(e?.length){if(a=e.split(UD),a.length<4)return e}else a=Array.from({length:4},()=>HD);return s.forEach((c,l)=>{2===c.length&&c[0]?.length&&c[1]?.length&&function zG(n){const{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(HD))}({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(UD)}(e)}}class VD{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||Zn(),this.logger=o.clone(Xt.MSAL_SKU,qi,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){var t=this;return y(function*(){if(e){it.accountInfoIsEqual(e,t.browserStorage.getActiveAccount(t.correlationId),!1)&&(t.logger.verbose("Setting active account to null"),t.browserStorage.setActiveAccount(null,t.correlationId));try{yield t.browserStorage.removeAccount(it.generateAccountCacheKey(e),t.correlationId),t.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{t.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{t.logger.verbose("No account provided in logout request, clearing all cache items.",t.correlationId),yield t.browserStorage.clear(t.correlationId),yield t.browserCrypto.clearKeystore()}catch{t.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}getRedirectUri(e){return this.logger.verbose("getRedirectUri called"),ue.getAbsoluteUrl(e||this.config.auth.redirectUri,Rr())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Za(r,this.browserStorage)}getDiscoveredAuthority(e){var t=this;return y(function*(){const{account:r}=e,o=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;t.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetDiscoveredAuthority,t.correlationId);const i={protocolMode:t.config.auth.protocolMode,OIDCOptions:t.config.auth.OIDCOptions,knownAuthorities:t.config.auth.knownAuthorities,cloudDiscoveryMetadata:t.config.auth.cloudDiscoveryMetadata,authorityMetadata:t.config.auth.authorityMetadata,skipAuthorityMetadataCache:t.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||t.config.auth.authority,c=r&&(o?.length?"true"===o:t.config.auth.instanceAware)?t.config.auth.authority.replace(ue.getDomainFromUrl(s),r.environment):s,l=St.generateAuthority(c,e.requestAzureCloudOptions||t.config.auth.azureCloudOptions),u=yield R(xD,p.AuthorityFactoryCreateDiscoveredInstance,t.logger,t.performanceClient,t.correlationId)(l,t.config.system.networkClient,t.browserStorage,i,t.logger,t.correlationId,t.performanceClient);if(r&&!u.isAlias(r.environment))throw we(Lu);return u})()}}const KG=32;function qG(n,e,t){return Iy.apply(this,arguments)}function Iy(){return(Iy=y(function*(n,e,t){n.addQueueMeasurement(p.GeneratePkceCodes,t);const r=Mo(WG,p.GenerateCodeVerifier,e,n,t)(n,e,t);return{verifier:r,challenge:yield R(QG,p.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t)}})).apply(this,arguments)}function WG(n,e,t){try{const r=new Uint8Array(KG);return Mo(s2,p.GetRandomValues,e,n,t)(r),Md(r)}catch{throw L($a)}}function QG(n,e,t,r){return wy.apply(this,arguments)}function wy(){return(wy=y(function*(n,e,t,r){e.addQueueMeasurement(p.GenerateCodeChallengeFromVerifier,r);try{const o=yield R(Gb,p.Sha256Digest,t,e,r)(n,e,r);return Md(new Uint8Array(o))}catch{throw L($a)}})).apply(this,arguments)}function Sy(n,e,t,r){return Ty.apply(this,arguments)}function Ty(){return(Ty=y(function*(n,e,t,r){t.addQueueMeasurement(p.InitializeBaseRequest,n.correlationId);const o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s={...n,correlationId:n.correlationId,authority:o,scopes:i};if(s.authenticationScheme){if(s.authenticationScheme===Ee.SSH){if(!n.sshJwk)throw we(Li);if(!n.sshKid)throw we(Pu)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}else s.authenticationScheme=Ee.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return e.cache.claimsBasedCachingEnabled&&n.claims&&!yn.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield zb(n.claims)),s})).apply(this,arguments)}function YG(n,e,t,r,o){return Ay.apply(this,arguments)}function Ay(){return(Ay=y(function*(n,e,t,r,o){r.addQueueMeasurement(p.InitializeSilentRequest,n.correlationId);const i=yield R(Sy,p.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return{...n,...i,account:e,forceRefresh:n.forceRefresh||!1}})).apply(this,arguments)}class Xi extends VD{initializeAuthorizationCodeRequest(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.StandardInteractionClientInitializeAuthorizationCodeRequest,t.correlationId);const r=yield R(qG,p.GeneratePkceCodes,t.logger,t.performanceClient,t.correlationId)(t.performanceClient,t.logger,t.correlationId),o={...e,redirectUri:e.redirectUri,code:C.EMPTY_STRING,codeVerifier:r.verifier};return e.codeChallenge=r.challenge,e.codeChallengeMethod=C.S256_CODE_CHALLENGE_METHOD,o})()}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const t={correlationId:this.correlationId||Zn(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=ue.getAbsoluteUrl(e.postLogoutRedirectUri,Rr())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=ue.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Rr())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=ue.getAbsoluteUrl(Rr(),Rr())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.StandardInteractionClientCreateAuthCodeClient,t.correlationId);const r=yield R(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)(e);return new LD(r,t.performanceClient)})()}getClientConfiguration(e){var t=this;return y(function*(){const{serverTelemetryManager:r,requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}=e;t.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetClientConfiguration,t.correlationId);const c=yield R(t.getDiscoveredAuthority.bind(t),p.StandardInteractionClientGetDiscoveredAuthority,t.logger,t.performanceClient,t.correlationId)({requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}),l=t.config.system.loggerOptions;return{authOptions:{clientId:t.config.auth.clientId,authority:c,clientCapabilities:t.config.auth.clientCapabilities,redirectUri:t.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:t.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:t.correlationId},cacheOptions:{claimsBasedCachingEnabled:t.config.cache.claimsBasedCachingEnabled},cryptoInterface:t.browserCrypto,networkInterface:t.networkClient,storageInterface:t.browserStorage,serverTelemetryManager:r,libraryInfo:{sku:Xt.MSAL_SKU,version:qi,cpu:C.EMPTY_STRING,os:C.EMPTY_STRING},telemetry:t.config.telemetry}})()}initializeAuthorizationRequest(e,t){var r=this;return y(function*(){r.performanceClient.addQueueMeasurement(p.StandardInteractionClientInitializeAuthorizationRequest,r.correlationId);const o=r.getRedirectUri(e.redirectUri),s=Pn.setRequestState(r.browserCrypto,e&&e.state||C.EMPTY_STRING,{interactionType:t}),c={...yield R(Sy,p.InitializeBaseRequest,r.logger,r.performanceClient,r.correlationId)({...e,correlationId:r.correlationId},r.config,r.performanceClient,r.logger),redirectUri:o,state:s,nonce:e.nonce||Zn(),responseMode:r.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return c;const l=e.account||r.browserStorage.getActiveAccount(r.correlationId);if(l&&(r.logger.verbose("Setting validated request account",r.correlationId),r.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,r.correlationId),c.account=l),!c.loginHint&&!l){const u=r.browserStorage.getLegacyLoginHint();u&&(c.loginHint=u)}return c})()}}const JG="ContentError",BD="user_switch",XG="USER_INTERACTION_REQUIRED",ZG="USER_CANCEL",ez="NO_NETWORK",tz="PERSISTENT_ERROR",nz="DISABLED",rz="ACCOUNT_UNAVAILABLE",oz=-2147186943,iz={[BD]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class rr extends ke{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,rr.prototype),this.name="NativeAuthError",this.ext=r}}function Zi(n){return!!(n.ext&&n.ext.status&&(n.ext.status===tz||n.ext.status===nz)||n.ext&&n.ext.error&&n.ext.error===oz)||n.errorCode===JG}function by(n,e,t){if(t&&t.status)switch(t.status){case rz:return py(Bd);case XG:return new On(n,e);case ZG:return L(br);case ez:return L($i)}return new rr(n,iz[n]||e,t)}class Dy extends Cy{constructor(e,t){super(e,t)}acquireToken(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireToken,e.correlationId);const r=er(),o=yield R(t.executeTokenRequest.bind(t),p.RefreshTokenClientExecuteTokenRequest,t.logger,t.performanceClient,e.correlationId)(e,t.authority),i=o.headers?.["x-ms-request-id"],s=new No(t.config.authOptions.clientId,t.cacheManager,t.cryptoUtils,t.logger,t.config.serializableCache,t.config.persistencePlugin);return s.validateTokenResponse(o.body),R(s.handleServerTokenResponse.bind(s),p.HandleServerTokenResponse,t.logger,t.performanceClient,e.correlationId)(o.body,t.authority,r,e,void 0,void 0,!0,e.forceCache,i)})()}acquireTokenByRefreshToken(e){var t=this;return y(function*(){if(!e)throw we(Ru);if(t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw S(Fa);if(t.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield R(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!0)}catch(o){if(o instanceof On&&o.errorCode===Wi||o instanceof eo&&"invalid_grant"===o.errorCode&&"client_mismatch"===o.subError)return R(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!1);throw o}return R(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!1)})()}acquireTokenWithCachedRefreshToken(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const o=Mo(r.cacheManager.getRefreshToken.bind(r.cacheManager),p.CacheManagerGetRefreshToken,r.logger,r.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,r.performanceClient);if(!o)throw py(Wi);if(o.expiresOn&&Xm(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw py(fy);const i={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||Ee.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:"home_account_id"}};try{return yield R(r.acquireToken.bind(r),p.RefreshTokenClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof On&&s.subError===Qi){r.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=ji(o);r.cacheManager.removeRefreshToken(a,e.correlationId)}throw s}})()}executeTokenRequest(e,t){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement(p.RefreshTokenClientExecuteTokenRequest,e.correlationId);const o=r.createTokenQueryParameters(e),i=ue.appendQueryString(t.tokenEndpoint,o),s=yield R(r.createTokenRequestBody.bind(r),p.RefreshTokenClientCreateTokenRequestBody,r.logger,r.performanceClient,e.correlationId)(e),a=r.createTokenRequestHeaders(e.ccsCredential),c={clientId:e.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return R(r.executePostToTokenEndpoint.bind(r),p.RefreshTokenClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,e.correlationId)(i,s,a,c,e.correlationId,p.RefreshTokenClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const o=new Xa(e.correlationId,t.performanceClient);if(o.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[ko]||t.config.authOptions.clientId),e.redirectUri&&o.addRedirectUri(e.redirectUri),o.addScopes(e.scopes,!0,t.config.authOptions.authority.options.OIDCOptions?.defaultScopes),o.addGrantType("refresh_token"),o.addClientInfo(),o.addLibraryInfo(t.config.libraryInfo),o.addApplicationTelemetry(t.config.telemetry.application),o.addThrottling(),t.serverTelemetryManager&&!ay(t.config)&&o.addServerTelemetry(t.serverTelemetryManager),o.addRefreshToken(e.refreshToken),t.config.clientCredentials.clientSecret&&o.addClientSecret(t.config.clientCredentials.clientSecret),t.config.clientCredentials.clientAssertion){const i=t.config.clientCredentials.clientAssertion;o.addClientAssertion(yield FD(i.assertion,t.config.authOptions.clientId,e.resourceRequestUri)),o.addClientAssertionType(i.assertionType)}if(e.authenticationScheme===Ee.POP){const i=new Ji(t.cryptoUtils,t.performanceClient);let s;s=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield R(i.generateCnf.bind(i),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,o.addPopToken(s)}else if(e.authenticationScheme===Ee.SSH){if(!e.sshJwk)throw we(Li);o.addSshJwk(e.sshJwk)}if((!yn.isEmptyObj(e.claims)||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,t.config.authOptions.clientCapabilities),t.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case"home_account_id":try{const i=Gi(e.ccsCredential.credential);o.addCcsOid(i)}catch(i){t.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":o.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&o.addBrokerParameters({brokerClientId:t.config.authOptions.clientId,brokerRedirectUri:t.config.authOptions.redirectUri}),e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),o.createQueryString()})()}}class az extends Cy{constructor(e,t){super(e,t)}acquireToken(e){var t=this;return y(function*(){try{const[r,o]=yield t.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...Pi]});return"4"===o&&(t.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Dy(t.config,t.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof ed&&r.errorCode===kn)return new Dy(t.config,t.performanceClient).acquireTokenByRefreshToken(e);throw r}})()}acquireCachedToken(e){var t=this;return y(function*(){t.performanceClient?.addQueueMeasurement(p.SilentFlowClientAcquireCachedToken,e.correlationId);let r="0";if(e.forceRefresh||!t.config.cacheOptions.claimsBasedCachingEnabled&&!yn.isEmptyObj(e.claims))throw t.setCacheOutcome("1",e.correlationId),S(kn);if(!e.account)throw S(Fa);const o=e.account.tenantId||function Uj(n){const r=new ue(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case Wr_COMMON:case Wr_ORGANIZATIONS:case Wr_CONSUMERS:return;default:return r}}(e.authority),i=t.cacheManager.getTokenKeys(),s=t.cacheManager.getAccessToken(e.account,e,i,o,t.performanceClient);if(!s)throw t.setCacheOutcome("2",e.correlationId),S(kn);if(function X2(n){return Number(n)>er()}(s.cachedAt)||Xm(s.expiresOn,t.config.systemOptions.tokenRenewalOffsetSeconds))throw t.setCacheOutcome("3",e.correlationId),S(kn);s.refreshOn&&Xm(s.refreshOn,0)&&(r="4");const a=e.authority||t.authority.getPreferredCache(),c={account:t.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:s,idToken:t.cacheManager.getIdToken(e.account,e.correlationId,i,o,t.performanceClient),refreshToken:null,appMetadata:t.cacheManager.readAppMetadataFromCache(a)};return t.setCacheOutcome(r,e.correlationId),t.config.serverTelemetryManager&&t.config.serverTelemetryManager.incrementCacheHits(),[yield R(t.generateResultFromCacheRecord.bind(t),p.SilentFlowClientGenerateResultFromCacheRecord,t.logger,t.performanceClient,e.correlationId)(c,e),r]})()}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),"0"!==e&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){var r=this;return y(function*(){let o;if(r.performanceClient?.addQueueMeasurement(p.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId),e.idToken&&(o=Ro(e.idToken.secret,r.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const i=o?.auth_time;if(!i)throw S(Pa);rD(i,t.maxAge)}return No.generateAuthenticationResult(r.cryptoUtils,r.authority,e,!0,t,o)})()}}class $D extends Xi{acquireToken(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.SilentCacheClientAcquireToken,e.correlationId);const r=t.initializeServerTelemetryManager(61),o=yield R(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new az(o,t.performanceClient);t.logger.verbose("Silent auth client created");try{const a=(yield R(i.acquireCachedToken.bind(i),p.SilentFlowClientAcquireCachedToken,t.logger,t.performanceClient,e.correlationId)(e))[0];return t.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(s){throw s instanceof Qa&&s.errorCode===qa&&t.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}})()}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}}class es extends VD{constructor(e,t,r,o,i,s,a,c,l,u,d,h){super(e,t,r,o,i,s,c,l,h),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=d,this.silentCacheClient=new $D(e,this.nativeStorageManager,r,o,i,s,c,l,h),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const f="ppnbnpeolgkicgegkbkbjmhlideopiji"===this.nativeMessageHandler.getExtensionId()?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=Za.makeExtraSkuString({libraryName:Xt.MSAL_SKU,libraryVersion:qi,extensionName:f,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,"x-client-xtra-sku":this.skus}}acquireToken(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.NativeInteractionClientAcquireToken,e.correlationId),t.logger.trace("NativeInteractionClient - acquireToken called.");const r=t.performanceClient.startMeasurement(p.NativeInteractionClientAcquireToken,e.correlationId),o=er();try{const i=yield t.initializeNativeRequest(e);try{const u=yield t.acquireTokensFromCache(t.accountId,i);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch{t.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...s}=i,a={method:"GetToken",request:s},c=yield t.nativeMessageHandler.sendMessage(a),l=t.validateNativeResponse(c);return yield t.handleNativeResponse(l,i,o).then(u=>(r.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),t.serverTelemetryManager.clearNativeBrokerErrorCode(),u)).catch(u=>{throw r.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError,isNativeBroker:!0}),u})}catch(i){throw i instanceof rr&&t.serverTelemetryManager.setNativeBrokerErrorCode(i.errorCode),i}})()}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:qe.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){var r=this;return y(function*(){if(!e)throw r.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),S(Ua);const o=r.browserStorage.getBaseAccountInfo({nativeAccountId:e},t.correlationId);if(!o)throw S(Ua);try{const i=r.createSilentCacheRequest(t,o),s=yield r.silentCacheClient.acquireToken(i),a={...o,idTokenClaims:s?.idTokenClaims,idToken:s?.idToken};return{...s,account:a}}catch(i){throw i}})()}acquireTokenRedirect(e,t){var r=this;return y(function*(){r.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...o}=e;delete o.onRedirectNavigate;const i=yield r.initializeNativeRequest(o),s={method:"GetToken",request:i};try{const l=yield r.nativeMessageHandler.sendMessage(s);r.validateNativeResponse(l)}catch(l){if(l instanceof rr&&(r.serverTelemetryManager.setNativeBrokerErrorCode(l.errorCode),Zi(l)))throw l}r.browserStorage.setTemporaryCache("request.native",JSON.stringify(i),!0);const a={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},c=r.config.auth.navigateToLoginRequestUrl?window.location.href:r.getRedirectUri(e.redirectUri);t.end({success:!0}),yield r.navigationClient.navigateExternal(c,a)})()}handleRedirectPromise(e,t){var r=this;return y(function*(){if(r.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!r.browserStorage.isInteractionInProgress(!0))return r.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const o=r.browserStorage.getCachedNativeRequest();if(!o)return r.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;const{prompt:i,...s}=o;i&&r.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),r.browserStorage.removeItem(r.browserStorage.generateCacheKey("request.native"));const a={method:"GetToken",request:s},c=er();try{r.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const l=yield r.nativeMessageHandler.sendMessage(a);r.validateNativeResponse(l);const u=r.handleNativeResponse(l,s,c);r.browserStorage.setInteractionInProgress(!1);const d=yield u;return r.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(l){throw r.browserStorage.setInteractionInProgress(!1),l}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){var o=this;return y(function*(){o.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=Ro(e.id_token,tr),s=o.createHomeAccountIdentifier(e,i),a=o.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},o.correlationId)?.homeAccountId;if(s!==a&&e.account.id!==t.accountId)throw by(BD);const c=yield o.getDiscoveredAuthority({requestAuthority:t.authority}),l=_y(o.browserStorage,c,s,tr,o.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,o.logger),u=yield o.generateAuthenticationResult(e,t,i,l,c.canonicalAuthority,r);return o.cacheAccount(l),o.cacheNativeTokens(e,t,s,i,e.access_token,u.tenantId,r),u})()}createHomeAccountIdentifier(e,t){return it.generateHomeAccountId(e.client_info||C.EMPTY_STRING,0,this.logger,this.browserCrypto,t)}generateScopes(e,t){return qe.fromString(e.scope?e.scope:t.scope)}generatePopAccessToken(e,t){var r=this;return y(function*(){if(t.tokenType===Ee.POP&&t.signPopToken){if(e.shr)return r.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const o=new Ji(r.browserCrypto),i={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw S(Ba);return o.signPopToken(e.access_token,t.keyId,i)}return e.access_token})()}generateAuthenticationResult(e,t,r,o,i,s){var a=this;return y(function*(){const c=a.addTelemetryFromNativeResponse(e),l=qe.fromString(e.scope?e.scope:t.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||C.EMPTY_STRING,h=u.TenantId||r.tid||C.EMPTY_STRING,f=ny(o.getAccountInfo(),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);const g=yield a.generatePopAccessToken(e,t),m=t.tokenType===Ee.POP?Ee.POP:Ee.BEARER;return{authority:i,uniqueId:d,tenantId:h,scopes:l.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:!!c&&a.isResponseFromCache(c),expiresOn:new Date(1e3*Number(s+e.expires_in)),tokenType:m,correlationId:a.correlationId,state:e.state,fromNativeBroker:!0}})()}cacheAccount(e){this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e,this.correlationId).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,o,i,s,a){const c=Od(r,t.authority,e.id_token||"",t.clientId,o.tid||""),u=a+(t.tokenType===Ee.POP?C.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),d=this.generateScopes(e,t),h=Pd(r,t.authority,i,t.clientId,o.tid||s,d.printScopes(),u,0,tr,void 0,t.tokenType,void 0,t.keyId);this.nativeStorageManager.saveCacheRecord({idToken:c,accessToken:h},t.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw xb(Aa,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){var t=this;return y(function*(){t.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=e.authority||t.config.auth.authority;e.account&&(yield t.getDiscoveredAuthority({requestAuthority:r,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));const o=new ue(r);o.validateAsUri();const{scopes:i,...s}=e,a=new qe(i||[]);a.appendScopes(Pi);const l={...s,accountId:t.accountId,clientId:t.config.auth.clientId,authority:o.urlString,scope:a.printScopes(),redirectUri:t.getRedirectUri(e.redirectUri),prompt:(()=>{switch(t.apiId){case 863:case 61:return t.logger.trace("initializeNativeRequest: silent request sets prompt to none"),at.NONE}if(e.prompt)switch(e.prompt){case at.NONE:case at.CONSENT:case at.LOGIN:return t.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw t.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),L(Ad)}else t.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:t.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(l.signPopToken&&e.popKid)throw L(Dd);if(t.handleExtraBrokerParams(l),l.extraParameters=l.extraParameters||{},l.extraParameters.telemetry="MATS",e.authenticationScheme===Ee.POP){const u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new Ji(t.browserCrypto);let h;if(l.keyId)h=t.browserCrypto.base64UrlEncode(JSON.stringify({kid:l.keyId})),l.signPopToken=!1;else{const f=yield R(d.generateCnf.bind(d),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(u,t.logger);h=f.reqCnfString,l.keyId=f.kid,l.signPopToken=!0}l.reqCnf=h}return t.addRequestSKUs(l),l})()}handleExtraBrokerParams(e){const t=e.extraParameters&&e.extraParameters.hasOwnProperty(my)&&e.extraParameters.hasOwnProperty(yy)&&e.extraParameters.hasOwnProperty(ko);if(!e.embeddedClientId&&!t)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[yy],r=e.extraParameters[ko]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}class or{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(p.NativeMessageHandlerHandshake)}sendMessage(e){var t=this;return y(function*(){t.logger.trace("NativeMessageHandler - sendMessage called.");const r={channel:Fi_CHANNEL_ID,extensionId:t.extensionId,responseId:Zn(),body:e};return t.logger.trace("NativeMessageHandler - Sending request to browser extension"),t.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(r)}`),t.messageChannel.port1.postMessage(r),new Promise((o,i)=>{t.resolvers.set(r.responseId,{resolve:o,reject:i})})})()}static createProvider(e,t,r){return y(function*(){e.trace("NativeMessageHandler - createProvider called.");try{const o=new or(e,t,r,"ppnbnpeolgkicgegkbkbjmhlideopiji");return yield o.sendHandshakeRequest(),o}catch{const i=new or(e,t,r);return yield i.sendHandshakeRequest(),i}})()}sendHandshakeRequest(){var e=this;return y(function*(){e.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",e.windowListener,!1);const t={channel:Fi_CHANNEL_ID,extensionId:e.extensionId,responseId:Zn(),body:{method:"Handshake"}};return e.handshakeEvent.add({extensionId:e.extensionId,extensionHandshakeTimeoutMs:e.handshakeTimeoutMs}),e.messageChannel.port1.onmessage=r=>{e.onChannelMessage(r)},window.postMessage(t,window.origin,[e.messageChannel.port2]),new Promise((r,o)=>{e.handshakeResolvers.set(t.responseId,{resolve:r,reject:o}),e.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",e.windowListener,!1),e.messageChannel.port1.close(),e.messageChannel.port2.close(),e.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(L(wd)),e.handshakeResolvers.delete(t.responseId)},e.handshakeTimeoutMs)})})()}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===Fi_CHANNEL_ID&&(!t.extensionId||t.extensionId===this.extensionId)&&"Handshake"===t.body.method){const r=this.handshakeResolvers.get(t.responseId);if(!r)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(L(Sd))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{const i=t.body.method;if("Response"===i){if(!r)return;const s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),"Success"!==s.status)r.reject(by(s.code,s.description,s.ext));else{if(!s.result)throw xb(Aa,"Event does not contain result.");s.result.code&&s.result.description?r.reject(by(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result)}this.resolvers.delete(t.responseId)}else if("HandshakeResponse"===i){if(!o)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,r,o){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Ee.BEARER:case Ee.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class Ry{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){var r=this;return y(function*(){let o;r.performanceClient.addQueueMeasurement(p.HandleCodeResponse,t.correlationId);try{o=r.authModule.handleFragmentResponse(e,t.state)}catch(i){throw i instanceof eo&&i.subError===br?L(br):i}return R(r.handleCodeResponseFromServer.bind(r),p.HandleCodeResponseFromServer,r.logger,r.performanceClient,t.correlationId)(o,t)})()}handleCodeResponseFromServer(e,t){var r=this;return y(function*(o,i,s=!0){if(r.performanceClient.addQueueMeasurement(p.HandleCodeResponseFromServer,i.correlationId),r.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),r.authCodeRequest.code=o.code,o.cloud_instance_host_name&&(yield R(r.authModule.updateAuthority.bind(r.authModule),p.UpdateTokenEndpointAuthority,r.logger,r.performanceClient,i.correlationId)(o.cloud_instance_host_name,i.correlationId)),s&&(o.nonce=i.nonce||void 0),o.state=i.state,o.client_info)r.authCodeRequest.clientInfo=o.client_info;else{const c=r.createCcsCredentials(i);c&&(r.authCodeRequest.ccsCredential=c)}return yield R(r.authModule.acquireToken.bind(r.authModule),p.AuthClientAcquireToken,r.logger,r.performanceClient,i.correlationId)(r.authCodeRequest,o)}).apply(this,arguments)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:"home_account_id"}:e.loginHint?{credential:e.loginHint,type:"UPN"}:null}}function jD(n,e,t){const r=td(n);if(!r)throw Fb(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),L(rd)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),L(nd));return r}class lz extends Xi{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const r={popupName:this.generatePopupName(e.scopes||Pi,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t){var r=this;return y(function*(){r.logger.verbose("acquireTokenPopupAsync called");const o=r.initializeServerTelemetryManager(862),i=yield R(r.initializeAuthorizationRequest.bind(r),p.StandardInteractionClientInitializeAuthorizationRequest,r.logger,r.performanceClient,r.correlationId)(e,P.Popup);Qb(i.authority);try{const s=yield R(r.initializeAuthorizationCodeRequest.bind(r),p.StandardInteractionClientInitializeAuthorizationCodeRequest,r.logger,r.performanceClient,r.correlationId)(i),a=yield R(r.createAuthCodeClient.bind(r),p.StandardInteractionClientCreateAuthCodeClient,r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:o,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),c=or.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,e.authenticationScheme);let l;c&&(l=r.performanceClient.startMeasurement(p.FetchAccountIdWithNativeBroker,e.correlationId));const u=yield a.getAuthCodeUrl({...i,nativeBroker:c}),d=new Ry(a,r.browserStorage,s,r.logger,r.performanceClient),h=r.initiateAuthRequest(u,t);r.eventHandler.emitEvent("msal:popupOpened",P.Popup,{popupWindow:h},null);const f=yield r.monitorPopupForHash(h,t.popupWindowParent),g=Mo(jD,p.DeserializeResponse,r.logger,r.performanceClient,r.correlationId)(f,r.config.auth.OIDCOptions.serverResponseType,r.logger);if(nr.removeThrottle(r.browserStorage,r.config.auth.clientId,s),g.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),l&&l.end({success:!0,isNativeBroker:!0}),!r.nativeMessageHandler)throw L(Do);const v=new es(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,g.accountId,r.nativeStorage,i.correlationId),{userRequestState:E}=Pn.parseRequestState(r.browserCrypto,i.state);return yield v.acquireToken({...i,state:E,prompt:void 0})}return yield d.handleCodeResponse(g,i)}catch(s){throw t.popup?.close(),s instanceof ke&&(s.setCorrelationId(r.correlationId),o.cacheFailedRequest(s)),s}})()}logoutPopupAsync(e,t,r,o){var i=this;return y(function*(){i.logger.verbose("logoutPopupAsync called"),i.eventHandler.emitEvent("msal:logoutStart",P.Popup,e);const s=i.initializeServerTelemetryManager(962);try{yield i.clearCacheOnLogout(e.account);const c=(yield R(i.createAuthCodeClient.bind(i),p.StandardInteractionClientCreateAuthCodeClient,i.logger,i.performanceClient,i.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0})).getLogoutUri(e);i.eventHandler.emitEvent("msal:logoutSuccess",P.Popup,e);const l=i.openPopup(c,t);if(i.eventHandler.emitEvent("msal:popupOpened",P.Popup,{popupWindow:l},null),yield i.monitorPopupForHash(l,t.popupWindowParent).catch(()=>{}),o){const u={apiId:962,timeout:i.config.system.redirectNavigationTimeout,noHistory:!1},d=ue.getAbsoluteUrl(o,Rr());i.logger.verbose("Redirecting main window to url specified in the request"),i.logger.verbosePii(`Redirecting main window to: ${d}`),yield i.navigationClient.navigateInternal(d,u)}else i.logger.verbose("No main window navigation requested")}catch(a){throw t.popup?.close(),a instanceof ke&&(a.setCorrelationId(i.correlationId),s.cacheFailedRequest(a)),i.browserStorage.setInteractionInProgress(!1),i.eventHandler.emitEvent("msal:logoutFailure",P.Popup,null,a),i.eventHandler.emitEvent("msal:logoutEnd",P.Popup),a}i.eventHandler.emitEvent("msal:logoutEnd",P.Popup)})()}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),L(Hi)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),void o(L(br));let s="";try{s=e.location.href}catch{}if(!s||"about:blank"===s)return;clearInterval(i);let a="";e&&(a=this.config.auth.OIDCOptions.serverResponseType===wa.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw L(cd);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),L(ad)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=r.popupSize?.width,u=r.popupSize?.height,d=r.popupPosition?.top,h=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Xt.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Xt.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Xt.POPUP_HEIGHT/2+s)),(!h||h<0||h>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,a/2-Xt.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(P.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${Xt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){return`${Xt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.account&&e.account.homeAccountId}.${this.correlationId}`}}class GD{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}initiateAuthRequest(e,t){var r=this;return y(function*(){if(r.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(r.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),r.browserStorage.setTemporaryCache("request.origin",t.redirectStartPage,!0)),r.browserStorage.setTemporaryCache("request.correlationId",r.authCodeRequest.correlationId,!0),r.browserStorage.cacheCodeRequest(r.authCodeRequest),r.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const o={apiId:861,timeout:t.redirectTimeout,noHistory:!1};return"function"==typeof t.onRedirectNavigate?(r.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==t.onRedirectNavigate(e)?(r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield t.navigationClient.navigateExternal(e,o))):void r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(r.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield t.navigationClient.navigateExternal(e,o)))}throw r.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),L(Hi)})()}handleCodeResponse(e,t){var r=this;return y(function*(){r.logger.verbose("RedirectHandler.handleCodeResponse called"),r.browserStorage.setInteractionInProgress(!1);const o=r.browserStorage.generateStateKey(t),i=r.browserStorage.getTemporaryCache(o);if(!i)throw S(Ui,"Cached State");let s;try{s=r.authModule.handleFragmentResponse(e,i)}catch(u){throw u instanceof eo&&u.subError===br?L(br):u}const a=r.browserStorage.generateNonceKey(i),c=r.browserStorage.getTemporaryCache(a);if(r.authCodeRequest.code=s.code,s.cloud_instance_host_name&&(yield R(r.authModule.updateAuthority.bind(r.authModule),p.UpdateTokenEndpointAuthority,r.logger,r.performanceClient,r.authCodeRequest.correlationId)(s.cloud_instance_host_name,r.authCodeRequest.correlationId)),s.nonce=c||void 0,s.state=i,s.client_info)r.authCodeRequest.clientInfo=s.client_info;else{const u=r.checkCcsCredentials();u&&(r.authCodeRequest.ccsCredential=u)}const l=yield r.authModule.acquireToken(r.authCodeRequest,s);return r.browserStorage.cleanRequestByState(t),l})()}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache("ccs.credential",!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class dz extends Xi{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){var t=this;return y(function*(){const r=yield R(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,t.correlationId)(e,P.Redirect);t.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||"",r.account||null);const o=t.initializeServerTelemetryManager(861),i=s=>{s.persisted&&(t.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),t.browserStorage.cleanRequestByState(r.state),t.eventHandler.emitEvent("msal:restoreFromBFCache",P.Redirect))};try{const s=yield R(t.initializeAuthorizationCodeRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationCodeRequest,t.logger,t.performanceClient,t.correlationId)(r),a=yield R(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),c=new GD(a,t.browserStorage,s,t.logger,t.performanceClient),l=yield a.getAuthCodeUrl({...r,nativeBroker:or.isNativeAvailable(t.config,t.logger,t.nativeMessageHandler,e.authenticationScheme)}),u=t.getRedirectStartPage(e.redirectStartPage);return t.logger.verbosePii(`Redirect start page: ${u}`),window.addEventListener("pageshow",i),yield c.initiateAuthRequest(l,{navigationClient:t.navigationClient,redirectTimeout:t.config.system.redirectNavigationTimeout,redirectStartPage:u,onRedirectNavigate:e.onRedirectNavigate||t.config.auth.onRedirectNavigate})}catch(s){throw s instanceof ke&&(s.setCorrelationId(t.correlationId),o.cacheFailedRequest(s)),window.removeEventListener("pageshow",i),t.browserStorage.cleanRequestByState(r.state),s}})()}handleRedirectPromise(){var e=this;return y(function*(t="",r){const o=e.initializeServerTelemetryManager(865);try{if(!e.browserStorage.isInteractionInProgress(!0))return e.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[i,s]=e.getRedirectResponse(t||"");if(!i)return e.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),e.browserStorage.cleanRequestByInteractionType(P.Redirect),"back_forward"!==function uz(){if(typeof window>"u"||typeof window.performance>"u"||"function"!=typeof window.performance.getEntriesByType)return;const n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}()?r.event.errorCode="no_server_response":e.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const a=e.browserStorage.getTemporaryCache("request.origin",!0)||C.EMPTY_STRING;if(ue.removeHashFromUrl(a)===ue.removeHashFromUrl(window.location.href)&&e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("Current page is loginRequestUrl, handling response"),a.indexOf("#")>-1&&function d2(n){const e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}(a),yield e.handleResponse(i,o);if(!e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield e.handleResponse(i,o);if(!kd()||e.config.system.allowRedirectInIframe){e.browserStorage.setTemporaryCache("urlHash",s,!0);const u={apiId:865,timeout:e.config.system.redirectNavigationTimeout,noHistory:!0};let d=!0;if(a&&"null"!==a)e.logger.verbose(`Navigating to loginRequestUrl: ${a}`),d=yield e.navigationClient.navigateInternal(a,u);else{const h=function f2(){const e=new ue(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();e.browserStorage.setTemporaryCache("request.origin",h,!0),e.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=yield e.navigationClient.navigateInternal(h,u)}if(!d)return yield e.handleResponse(i,o)}return null}catch(i){throw i instanceof ke&&(i.setCorrelationId(e.correlationId),o.cacheFailedRequest(i)),e.browserStorage.cleanRequestByInteractionType(P.Redirect),i}}).apply(this,arguments)}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===wa.QUERY?window.location.search:window.location.hash);let r=td(t);if(r){try{!function cz(n,e,t){if(!n.state)throw L(Ga);const r=RD(e,n.state);if(!r)throw L(od);if(r.interactionType!==t)throw L(id)}(r,this.browserCrypto,P.Redirect)}catch(i){return i instanceof ke&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return function u2(n){n.location.hash="","function"==typeof n.history.replaceState&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const o=this.browserStorage.getTemporaryCache("urlHash",!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey("urlHash")),o&&(r=td(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t){var r=this;return y(function*(){const o=e.state;if(!o)throw L(Ga);const i=r.browserStorage.getCachedRequest(o);if(r.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw L(Do);const l=new es(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,e.accountId,r.nativeStorage,i.correlationId),{userRequestState:u}=Pn.parseRequestState(r.browserCrypto,o);return l.acquireToken({...i,state:u,prompt:void 0}).finally(()=>{r.browserStorage.cleanRequestByState(o)})}const s=r.browserStorage.getCachedAuthority(o);if(!s)throw L(za);const a=yield R(r.createAuthCodeClient.bind(r),p.StandardInteractionClientCreateAuthCodeClient,r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:t,requestAuthority:s});return nr.removeThrottle(r.browserStorage,r.config.auth.clientId,i),new GD(a,r.browserStorage,i,r.logger,r.performanceClient).handleCodeResponse(e,o)})()}logout(e){var t=this;return y(function*(){t.logger.verbose("logoutRedirect called");const r=t.initializeLogoutRequest(e),o=t.initializeServerTelemetryManager(961);try{t.eventHandler.emitEvent("msal:logoutStart",P.Redirect,e),yield t.clearCacheOnLogout(r.account);const i={apiId:961,timeout:t.config.system.redirectNavigationTimeout,noHistory:!1},a=(yield R(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:o,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0})).getLogoutUri(r);if(t.eventHandler.emitEvent("msal:logoutSuccess",P.Redirect,r),!e||"function"!=typeof e.onRedirectNavigate)return t.browserStorage.getInteractionInProgress()||t.browserStorage.setInteractionInProgress(!0),void(yield t.navigationClient.navigateExternal(a,i));if(!1!==e.onRedirectNavigate(a))return t.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),t.browserStorage.getInteractionInProgress()||t.browserStorage.setInteractionInProgress(!0),void(yield t.navigationClient.navigateExternal(a,i));t.browserStorage.setInteractionInProgress(!1),t.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(i){throw i instanceof ke&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),t.eventHandler.emitEvent("msal:logoutFailure",P.Redirect,null,i),t.eventHandler.emitEvent("msal:logoutEnd",P.Redirect),i}t.eventHandler.emitEvent("msal:logoutEnd",P.Redirect)})()}getRedirectStartPage(e){const t=e||window.location.href;return ue.getAbsoluteUrl(t,Rr())}}function hz(n,e,t,r,o){return My.apply(this,arguments)}function My(){return(My=y(function*(n,e,t,r,o){if(e.addQueueMeasurement(p.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),L(Hi);return o?R(pz,p.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Mo(gz,p.SilentHandlerLoadFrameSync,t,e,r)(n)})).apply(this,arguments)}function fz(n,e,t,r,o,i,s){return ky.apply(this,arguments)}function ky(){return(ky=y(function*(n,e,t,r,o,i,s){return r.addQueueMeasurement(p.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<cy&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${cy}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(L(ld))},e),u=window.setInterval(()=>{let d="";const h=n.contentWindow;try{d=h?h.location.href:""}catch{}if(!d||"about:blank"===d)return;let f="";h&&(f=s===wa.QUERY?h.location.search:h.location.hash),window.clearTimeout(l),window.clearInterval(u),a(f)},t)}).finally(()=>{Mo(mz,p.RemoveHiddenIframe,o,r,i)(n)})})).apply(this,arguments)}function pz(n,e,t,r){return t.addQueueMeasurement(p.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=zD();window.setTimeout(()=>{s?(s.src=n,o(s)):i("Unable to load iframe")},e)})}function gz(n){const e=zD();return e.src=n,e}function zD(){const n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function mz(n){document.body===n.parentNode&&document.body.removeChild(n)}class yz extends Xi{constructor(e,t,r,o,i,s,a,c,l,u,d){super(e,t,r,o,i,s,c,u,d),this.apiId=a,this.nativeStorage=l}acquireToken(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&t.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const r={...e};r.prompt?r.prompt!==at.NONE&&r.prompt!==at.NO_SESSION&&(t.logger.warning(`SilentIframeClient. Replacing invalid prompt ${r.prompt} with ${at.NONE}`),r.prompt=at.NONE):r.prompt=at.NONE;const o=yield R(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(r,P.Silent);Qb(o.authority);const i=t.initializeServerTelemetryManager(t.apiId);let s;try{return s=yield R(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,e.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),yield R(t.silentTokenHelper.bind(t),p.SilentIframeClientTokenHelper,t.logger,t.performanceClient,e.correlationId)(s,o)}catch(a){if(a instanceof ke&&(a.setCorrelationId(t.correlationId),i.cacheFailedRequest(a)),!(s&&a instanceof ke&&a.errorCode===Xt.INVALID_GRANT_ERROR))throw a;t.performanceClient.addFields({retryError:a.errorCode},t.correlationId);const c=yield R(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(r,P.Silent);return yield R(t.silentTokenHelper.bind(t),p.SilentIframeClientTokenHelper,t.logger,t.performanceClient,t.correlationId)(s,c)}})()}logout(){return Promise.reject(L(Vi))}silentTokenHelper(e,t){var r=this;return y(function*(){const o=t.correlationId;r.performanceClient.addQueueMeasurement(p.SilentIframeClientTokenHelper,o);const i=yield R(r.initializeAuthorizationCodeRequest.bind(r),p.StandardInteractionClientInitializeAuthorizationCodeRequest,r.logger,r.performanceClient,o)(t),s=yield R(e.getAuthCodeUrl.bind(e),p.GetAuthCodeUrl,r.logger,r.performanceClient,o)({...t,nativeBroker:or.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,t.authenticationScheme)}),a=new Ry(e,r.browserStorage,i,r.logger,r.performanceClient),c=yield R(hz,p.SilentHandlerInitiateAuthRequest,r.logger,r.performanceClient,o)(s,r.performanceClient,r.logger,o,r.config.system.navigateFrameWait),l=r.config.auth.OIDCOptions.serverResponseType,u=yield R(fz,p.SilentHandlerMonitorIframeForHash,r.logger,r.performanceClient,o)(c,r.config.system.iframeHashTimeout,r.config.system.pollIntervalMilliseconds,r.performanceClient,r.logger,o,l),d=Mo(jD,p.DeserializeResponse,r.logger,r.performanceClient,r.correlationId)(u,l,r.logger);if(d.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw L(Do);const h=new es(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,r.apiId,r.performanceClient,r.nativeMessageHandler,d.accountId,r.browserStorage,o),{userRequestState:f}=Pn.parseRequestState(r.browserCrypto,t.state);return R(h.acquireToken.bind(h),p.NativeInteractionClientAcquireToken,r.logger,r.performanceClient,o)({...t,state:f,prompt:t.prompt||at.NONE})}return R(a.handleCodeResponse.bind(a),p.HandleCodeResponse,r.logger,r.performanceClient,o)(d,t)})()}}class vz extends Xi{acquireToken(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.SilentRefreshClientAcquireToken,e.correlationId);const r=yield R(Sy,p.InitializeBaseRequest,t.logger,t.performanceClient,e.correlationId)(e,t.config,t.performanceClient,t.logger),o={...e,...r};e.redirectUri&&(o.redirectUri=t.getRedirectUri(e.redirectUri));const i=t.initializeServerTelemetryManager(61),s=yield t.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return R(s.acquireTokenByRefreshToken.bind(s),p.RefreshTokenClientAcquireTokenByRefreshToken,t.logger,t.performanceClient,e.correlationId)(o).catch(a=>{throw a.setCorrelationId(t.correlationId),i.cacheFailedRequest(a),a})})()}logout(){return Promise.reject(L(Vi))}createRefreshTokenClient(e){var t=this;return y(function*(){const r=yield R(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Dy(r,t.performanceClient)})()}}class Cz{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw L(Bi);const o=e.correlationId||Zn(),i=t.id_token?Ro(t.id_token,tr):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new St(St.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||Zn()):void 0,c=this.loadAccount(e,r.clientInfo||t.client_info||"",o,i,a),l=this.loadIdToken(t,c.homeAccountId,c.environment,c.realm,o),u=this.loadAccessToken(e,t,c.homeAccountId,c.environment,c.realm,r,o),d=this.loadRefreshToken(t,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:d},i,a)}loadAccount(e,t,r,o,i){if(this.logger.verbose("TokenCache - loading account"),e.account){const l=it.createFromAccountInfo(e.account);return this.storage.setAccount(l,r),l}if(!i||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),L(vd);const s=it.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=_y(this.storage,i,s,tr,r,o,t,i.hostnameAndPort,a,void 0,void 0,this.logger);return this.storage.setAccount(c,r),c}loadIdToken(e,t,r,o,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const s=Od(t,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(s,i),s}loadAccessToken(e,t,r,o,i,s,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(t.scope||e.scopes&&e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const c=t.scope?qe.fromString(t.scope):new qe(e.scopes),l=s.expiresOn||t.expires_in+(new Date).getTime()/1e3,u=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+(new Date).getTime()/1e3,d=Pd(r,o,t.access_token,this.config.auth.clientId,i,c.printScopes(),l,u,tr);return this.storage.setAccessTokenCredential(d,a),d}loadRefreshToken(e,t,r,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const i=oD(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(i,o),i}generateAuthenticationResult(e,t,r,o){let c,i="",s=[],a=null;t?.accessToken&&(i=t.accessToken.secret,s=qe.fromString(t.accessToken.target).asArray(),a=new Date(1e3*Number(t.accessToken.expiresOn)),c=new Date(1e3*Number(t.accessToken.extendedExpiresOn)));const l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}class _z extends LD{constructor(e){super(e),this.includeRedirectUri=!1}}class Ez extends Xi{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){var t=this;return y(function*(){if(!e.code)throw L(Cd);const r=yield R(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(e,P.Silent),o=t.initializeServerTelemetryManager(t.apiId);try{const i={...r,code:e.code},s=yield R(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=new _z(s);t.logger.verbose("Auth code client created");const c=new Ry(a,t.browserStorage,i,t.logger,t.performanceClient);return yield R(c.handleCodeResponseFromServer.bind(c),p.HandleCodeResponseFromServer,t.logger,t.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},r,!1)}catch(i){throw i instanceof ke&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),i}})()}logout(){return Promise.reject(L(Vi))}}function ir(n){const e=n?.idTokenClaims;return e?.tfp||e?.acr?"B2C":e?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===e?.tid?"MSA":"AAD":void 0}function jd(n,e){try{Km(n)}catch(t){throw e.end({success:!1},t),t}}class Gd{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Oj(this.logger,this.performanceClient):Nd,this.eventHandler=new rG(this.logger),this.browserStorage=this.isBrowserEnvironment?new gy(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function Hj(n){const e=n.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw we(ka)}return{canonicalAuthority:n.authority?AD(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}(this.config.auth),this.performanceClient):((n,e)=>new gy(this.config.auth.clientId,{cacheLocation:Pt.MemoryStorage,temporaryCacheLocation:Pt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},Nd,this.logger))(),this.nativeInternalStorage=new gy(this.config.auth.clientId,{cacheLocation:Pt.MemoryStorage,temporaryCacheLocation:Pt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new Cz(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(e,t){return y(function*(){const r=new Gd(e);return yield r.initialize(t),r})()}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){var t=this;return y(function*(){if(t.logger.trace("initialize called"),t.initialized)return void t.logger.info("initialize has already been called, exiting early.");if(!t.isBrowserEnvironment)return t.logger.info("in non-browser environment, exiting early."),t.initialized=!0,void t.eventHandler.emitEvent("msal:initializeEnd");const r=e?.correlationId||t.getRequestCorrelationId(),o=t.config.system.allowNativeBroker,i=t.performanceClient.startMeasurement(p.InitializeClientApplication,r);if(t.eventHandler.emitEvent("msal:initializeStart"),o)try{t.nativeExtensionProvider=yield or.createProvider(t.logger,t.config.system.nativeBrokerHandshakeTimeout,t.performanceClient)}catch(s){t.logger.verbose(s)}t.config.cache.claimsBasedCachingEnabled||(t.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield R(t.browserStorage.clearTokensAndKeysWithClaims.bind(t.browserStorage),p.ClearTokensAndKeysWithClaims,t.logger,t.performanceClient,r)(t.performanceClient,r)),t.initialized=!0,t.eventHandler.emitEvent("msal:initializeEnd"),i.end({allowNativeBroker:o,success:!0})})()}handleRedirectPromise(e){var t=this;return y(function*(){if(t.logger.verbose("handleRedirectPromise called"),qb(t.initialized),t.isBrowserEnvironment){const r=e||"";let o=t.redirectResponse.get(r);return typeof o>"u"?(o=t.handleRedirectPromiseInternal(e),t.redirectResponse.set(r,o),t.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):t.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),o}return t.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}handleRedirectPromiseInternal(e){var t=this;return y(function*(){const r=t.getAllAccounts(),o=t.browserStorage.getCachedNativeRequest(),i=o&&or.isNativeAvailable(t.config,t.logger,t.nativeExtensionProvider)&&t.nativeExtensionProvider&&!e,s=i?o?.correlationId:t.browserStorage.getTemporaryCache("request.correlationId",!0)||"",a=t.performanceClient.startMeasurement(p.AcquireTokenRedirect,s);let c;if(t.eventHandler.emitEvent("msal:handleRedirectStart",P.Redirect),i&&t.nativeExtensionProvider){t.logger.trace("handleRedirectPromise - acquiring token from native platform");const l=new es(t.config,t.browserStorage,t.browserCrypto,t.logger,t.eventHandler,t.navigationClient,865,t.performanceClient,t.nativeExtensionProvider,o.accountId,t.nativeInternalStorage,o.correlationId);c=R(l.handleRedirectPromise.bind(l),p.HandleNativeRedirectPromiseMeasurement,t.logger,t.performanceClient,a.event.correlationId)(t.performanceClient,a.event.correlationId)}else{t.logger.trace("handleRedirectPromise - acquiring token from web flow");const l=t.createRedirectClient(s);c=R(l.handleRedirectPromise.bind(l),p.HandleRedirectPromiseMeasurement,t.logger,t.performanceClient,a.event.correlationId)(e,a)}return c.then(l=>(l?(r.length<t.getAllAccounts().length?(t.eventHandler.emitEvent("msal:loginSuccess",P.Redirect,l),t.logger.verbose("handleRedirectResponse returned result, login success")):(t.eventHandler.emitEvent("msal:acquireTokenSuccess",P.Redirect,l),t.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0,accountType:ir(l.account)})):a.event.errorCode?a.end({success:!1}):a.discard(),t.eventHandler.emitEvent("msal:handleRedirectEnd",P.Redirect),l)).catch(l=>{const u=l;throw t.eventHandler.emitEvent(r.length>0?"msal:acquireTokenFailure":"msal:loginFailure",P.Redirect,null,u),t.eventHandler.emitEvent("msal:handleRedirectEnd",P.Redirect),a.end({success:!1},u),l})})()}acquireTokenRedirect(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);t.logger.verbose("acquireTokenRedirect called",r);const o=t.performanceClient.startMeasurement(p.AcquireTokenPreRedirect,r);o.add({accountType:ir(e.account),scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=a=>{const c="function"==typeof i?i(a):void 0;return!1!==c?o.end({success:!0}):o.discard(),c};else{const a=t.config.auth.onRedirectNavigate;t.config.auth.onRedirectNavigate=c=>{const l="function"==typeof a?a(c):void 0;return!1!==l?o.end({success:!0}):o.discard(),l}}const s=t.getAllAccounts().length>0;try{let a;return Wb(t.initialized,t.config),t.browserStorage.setInteractionInProgress(!0),t.eventHandler.emitEvent(s?"msal:acquireTokenStart":"msal:loginStart",P.Redirect,e),a=t.nativeExtensionProvider&&t.canUseNative(e)?new es(t.config,t.browserStorage,t.browserCrypto,t.logger,t.eventHandler,t.navigationClient,861,t.performanceClient,t.nativeExtensionProvider,t.getNativeAccountId(e),t.nativeInternalStorage,r).acquireTokenRedirect(e,o).catch(l=>{if(l instanceof rr&&Zi(l))return t.nativeExtensionProvider=void 0,t.createRedirectClient(r).acquireToken(e);if(l instanceof On)return t.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),t.createRedirectClient(r).acquireToken(e);throw t.browserStorage.setInteractionInProgress(!1),l}):t.createRedirectClient(r).acquireToken(e),yield a}catch(a){throw o.end({success:!1},a),t.eventHandler.emitEvent(s?"msal:acquireTokenFailure":"msal:loginFailure",P.Redirect,null,a),a}})()}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(p.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:ir(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),jd(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}const o=this.getAllAccounts();let i;return this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenStart":"msal:loginStart",P.Popup,e),i=this.canUseNative(e)?this.acquireTokenNative({...e,correlationId:t},862).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:ir(s.account)}),s)).catch(s=>{if(s instanceof rr&&Zi(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(s instanceof On)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):this.createPopupClient(t).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent("msal:loginSuccess",P.Popup,s):this.eventHandler.emitEvent("msal:acquireTokenSuccess",P.Popup,s),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:ir(s.account)}),s)).catch(s=>(this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenFailure":"msal:loginFailure",P.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e),o={...e,prompt:e.prompt,correlationId:r};let i;return t.ssoSilentMeasurement=t.performanceClient.startMeasurement(p.SsoSilent,r),t.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:ir(e.account)}),jd(t.initialized,t.ssoSilentMeasurement),t.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement),t.logger.verbose("ssoSilent called",r),t.eventHandler.emitEvent("msal:ssoSilentStart",P.Silent,o),i=t.canUseNative(o)?t.acquireTokenNative(o,863).catch(s=>{if(s instanceof rr&&Zi(s))return t.nativeExtensionProvider=void 0,t.createSilentIframeClient(o.correlationId).acquireToken(o);throw s}):t.createSilentIframeClient(o.correlationId).acquireToken(o),i.then(s=>(t.eventHandler.emitEvent("msal:ssoSilentSuccess",P.Silent,s),t.ssoSilentMeasurement?.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:ir(s.account)}),s)).catch(s=>{throw t.eventHandler.emitEvent("msal:ssoSilentFailure",P.Silent,null,s),t.ssoSilentMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);t.logger.trace("acquireTokenByCode called",r);const o=t.performanceClient.startMeasurement(p.AcquireTokenByCode,r);jd(t.initialized,o),t.eventHandler.emitEvent("msal:acquireTokenByCodeStart",P.Silent,e),o.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw L(Ed);if(e.code){const i=e.code;let s=t.hybridAuthCodeResponses.get(i);return s?(t.logger.verbose("Existing acquireTokenByCode request found",r),o.discard()):(t.logger.verbose("Initiating new acquireTokenByCode request",r),s=t.acquireTokenByCodeAsync({...e,correlationId:r}).then(a=>(t.eventHandler.emitEvent("msal:acquireTokenByCodeSuccess",P.Silent,a),t.hybridAuthCodeResponses.delete(i),o.end({success:!0,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:ir(a.account)}),a)).catch(a=>{throw t.hybridAuthCodeResponses.delete(i),t.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",P.Silent,null,a),o.end({success:!1},a),a}),t.hybridAuthCodeResponses.set(i,s)),yield s}if(e.nativeAccountId){if(t.canUseNative(e,e.nativeAccountId)){const i=yield t.acquireTokenNative({...e,correlationId:r},866,e.nativeAccountId).catch(s=>{throw s instanceof rr&&Zi(s)&&(t.nativeExtensionProvider=void 0),s});return o.end({accountType:ir(i.account),success:!0}),i}throw L(Id)}throw L(_d)}catch(i){throw t.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",P.Silent,null,i),o.end({success:!1},i),i}})()}acquireTokenByCodeAsync(e){var t=this;return y(function*(){return t.logger.trace("acquireTokenByCodeAsync called",e.correlationId),t.acquireTokenByCodeAsyncMeasurement=t.performanceClient.startMeasurement(p.AcquireTokenByCodeAsync,e.correlationId),t.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement),yield t.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>(t.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker}),i)).catch(i=>{throw t.acquireTokenByCodeAsyncMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(e,t){var r=this;return y(function*(){switch(r.performanceClient.addQueueMeasurement(p.AcquireTokenFromCache,e.correlationId),t){case 0:case 1:case 2:const o=r.createSilentCacheClient(e.correlationId);return R(o.acquireToken.bind(o),p.SilentCacheClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw S(kn)}})()}acquireTokenByRefreshToken(e,t){var r=this;return y(function*(){switch(r.performanceClient.addQueueMeasurement(p.AcquireTokenByRefreshToken,e.correlationId),t){case 0:case 2:case 3:case 4:const o=r.createSilentRefreshClient(e.correlationId);return R(o.acquireToken.bind(o),p.SilentRefreshClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw S(kn)}})()}acquireTokenBySilentIframe(e){var t=this;return y(function*(){t.performanceClient.addQueueMeasurement(p.AcquireTokenBySilentIframe,e.correlationId);const r=t.createSilentIframeClient(e.correlationId);return R(r.acquireToken.bind(r),p.SilentIframeClientAcquireToken,t.logger,t.performanceClient,e.correlationId)(e)})()}logout(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);return t.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),t.logoutRedirect({correlationId:r,...e})})()}logoutRedirect(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);return Wb(t.initialized,t.config),t.browserStorage.setInteractionInProgress(!0),t.createRedirectClient(r).logout(e)})()}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return Km(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}clearCache(e){var t=this;return y(function*(){if(!t.isBrowserEnvironment)return void t.logger.info("in non-browser environment, returning early.");const r=t.getRequestCorrelationId(e);return t.createSilentCacheClient(r).logout(e)})()}getAllAccounts(e){const t=this.getRequestCorrelationId();return function Yj(n,e,t,r,o){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r,o):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return function Jj(n,e,t,r){if(e.trace("getAccount called"),0===Object.keys(n).length)return e.warning("getAccount: No accountFilter provided"),null;const o=t.getAccountInfoFilteredBy(n,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return function Xj(n,e,t,r){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;const o=t.getAccountInfoFilteredBy({username:n},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return function Zj(n,e,t,r){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=t.getAccountInfoFilteredBy({homeAccountId:n},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return function eG(n,e,t,r){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const o=t.getAccountInfoFilteredBy({localAccountId:n},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();!function tG(n,e,t){e.setActiveAccount(n,t)}(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return function nG(n,e){return n.getActiveAccount(e)}(this.browserStorage,e)}hydrateCache(e,t){var r=this;return y(function*(){r.logger.verbose("hydrateCache called");const o=it.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return r.browserStorage.setAccount(o,e.correlationId),e.fromNativeBroker?(r.logger.verbose("Response was from native broker, storing in-memory"),r.nativeInternalStorage.hydrateCache(e,t)):r.browserStorage.hydrateCache(e,t)})()}acquireTokenNative(e,t,r){var o=this;return y(function*(){if(o.logger.trace("acquireTokenNative called"),!o.nativeExtensionProvider)throw L(Do);return new es(o.config,o.browserStorage,o.browserCrypto,o.logger,o.eventHandler,o.navigationClient,t,o.performanceClient,o.nativeExtensionProvider,r||o.getNativeAccountId(e),o.nativeInternalStorage,e.correlationId).acquireToken(e)})()}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!or.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case at.NONE:case at.CONSENT:case at.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!(!t&&!this.getNativeAccountId(e)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new lz(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new dz(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new yz(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,863,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new $D(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new vz(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new Ez(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,866,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Kb(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{e.key?.includes(st.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent("msal:activeAccountChanged");const t=e.newValue||e.oldValue;if(!t)return;const r=JSON.parse(t);if("object"!=typeof r||!it.isAccountEntity(r))return;const i=Ki.toObject(new it,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent("msal:accountAdded",void 0,i)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent("msal:accountRemoved",void 0,i))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?Zn():C.EMPTY_STRING}loginRedirect(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e);return t.logger.verbose("loginRedirect called",r),t.acquireTokenRedirect({correlationId:r,...e||Ob})})()}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||Ob})}acquireTokenSilent(e){var t=this;return y(function*(){const r=t.getRequestCorrelationId(e),o=t.performanceClient.startMeasurement(p.AcquireTokenSilent,r);o.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),jd(t.initialized,o),t.logger.verbose("acquireTokenSilent called",r);const i=e.account||t.getActiveAccount();if(!i)throw L(fd);o.add({accountType:ir(i)});const a=JSON.stringify({clientId:t.config.auth.clientId,authority:e.authority||C.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:i.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions}),c=t.activeSilentTokenRequests.get(a);if(typeof c>"u"){t.logger.verbose("acquireTokenSilent called for the first time, storing active request",r);const l=R(t.acquireTokenSilentAsync.bind(t),p.AcquireTokenSilentAsync,t.logger,t.performanceClient,r)({...e,correlationId:r},i).then(u=>(t.activeSilentTokenRequests.delete(a),o.end({success:!0,fromCache:u.fromCache,isNativeBroker:u.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),u)).catch(u=>{throw t.activeSilentTokenRequests.delete(a),o.end({success:!1},u),u});return t.activeSilentTokenRequests.set(a,l),{...yield l,state:e.state}}return t.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),o.discard(),{...yield c,state:e.state}})()}acquireTokenSilentAsync(e,t){var r=this;return y(function*(){const o=()=>r.trackPageVisibility(e.correlationId);r.performanceClient.addQueueMeasurement(p.AcquireTokenSilentAsync,e.correlationId),r.eventHandler.emitEvent("msal:acquireTokenStart",P.Silent,e),e.correlationId&&r.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",o);const i=yield R(YG,p.InitializeSilentRequest,r.logger,r.performanceClient,e.correlationId)(e,t,r.config,r.performanceClient,r.logger),s=e.cacheLookupPolicy||0;return r.acquireTokenSilentNoIframe(i,s).catch(function(){var c=y(function*(l){if(function Iz(n,e){const o=!(n instanceof On&&n.subError!==Qi)&&(n.errorCode===Xt.INVALID_GRANT_ERROR||n.errorCode===kn)||n.errorCode===Wi||n.errorCode===fy,i=Y$.includes(e);return o&&i}(l,s)){if(r.activeIframeRequest){if(5!==s){const[d,h]=r.activeIframeRequest;r.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${h}`,i.correlationId);const f=r.performanceClient.startMeasurement(p.AwaitConcurrentIframe,i.correlationId);f.add({awaitIframeCorrelationId:h});const g=yield d;if(f.end({success:g}),g)return r.logger.verbose(`Parallel iframe request with correlationId: ${h} succeeded. Retrying cache and/or RT redemption`,i.correlationId),r.acquireTokenSilentNoIframe(i,s);throw r.logger.info(`Iframe request with correlationId: ${h} failed. Interaction is required.`),l}return r.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),R(r.acquireTokenBySilentIframe.bind(r),p.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i)}{let d;return r.activeIframeRequest=[new Promise(h=>{d=h}),i.correlationId],r.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),R(r.acquireTokenBySilentIframe.bind(r),p.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i).then(h=>(d(!0),h)).catch(h=>{throw d(!1),h}).finally(()=>{r.activeIframeRequest=void 0})}}throw l});return function(l){return c.apply(this,arguments)}}()).then(c=>(r.eventHandler.emitEvent("msal:acquireTokenSuccess",P.Silent,c),e.correlationId&&r.performanceClient.addFields({fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker},e.correlationId),c)).catch(c=>{throw r.eventHandler.emitEvent("msal:acquireTokenFailure",P.Silent,null,c),c}).finally(()=>{document.removeEventListener("visibilitychange",o)})})()}acquireTokenSilentNoIframe(e,t){var r=this;return y(function*(){return or.isNativeAvailable(r.config,r.logger,r.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(r.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),r.acquireTokenNative(e,61).catch(function(){var o=y(function*(i){throw i instanceof rr&&Zi(i)?(r.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),r.nativeExtensionProvider=void 0,S(kn)):i});return function(i){return o.apply(this,arguments)}}())):(r.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),R(r.acquireTokenFromCache.bind(r),p.AcquireTokenFromCache,r.logger,r.performanceClient,e.correlationId)(e,t).catch(o=>{if(1===t)throw o;return r.eventHandler.emitEvent("msal:acquireTokenFromNetworkStart",P.Silent,e),R(r.acquireTokenByRefreshToken.bind(r),p.AcquireTokenByRefreshToken,r.logger,r.performanceClient,e.correlationId)(e,t)}))})()}}function Ny(){return(Ny=y(function*(n,e){const t=new ED(n);return yield t.initialize(),Gd.createController(t,e)})).apply(this,arguments)}class ec{static createPublicClientApplication(e){return y(function*(){const t=yield function wz(n,e){return Ny.apply(this,arguments)}(e);return new ec(e,t)})()}constructor(e,t){this.controller=t||new Gd(new ED(e))}initialize(e){var t=this;return y(function*(){return t.controller.initialize(e)})()}acquireTokenPopup(e){var t=this;return y(function*(){return t.controller.acquireTokenPopup(e)})()}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){var r=this;return y(function*(){return r.controller.hydrateCache(e,t)})()}clearCache(e){return this.controller.clearCache(e)}}const Tz={auth:{clientId:"3aeb54f6-b5e2-48cb-ab3c-acf50a0f0f42",authority:"https://login.microsoftonline.com/2de9b431-7882-473d-9a40-8cb84c068099",redirectUri:window.location.origin,postLogoutRedirectUri:window.location.origin+"/login"},cache:{cacheLocation:Pt.LocalStorage,storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(n,e,t)=>{t||console.log(e)}}}},Fy={tradehubApi:{endpoint:"http://localhost:5150/api",scopes:["api://7e6cae4c-dfd9-4c98-ae87-d249b059f19c/access_as_user"]}};function bz(n,e){1&n&&(b(0,"ul",11)(1,"li",12)(2,"a",13),ie(3,"i",14),O(4,"Products "),D()(),b(5,"li",12)(6,"a",15),ie(7,"i",16),O(8,"Add Product "),D()()())}function Dz(n,e){if(1&n){const t=po();b(0,"div",17)(1,"a",18),ie(2,"i",19),O(3),D(),b(4,"ul",20)(5,"li")(6,"a",21),ie(7,"i",22),O(8,"Profile "),D()(),b(9,"li")(10,"a",21),ie(11,"i",23),O(12,"Settings "),D()(),b(13,"li"),ie(14,"hr",24),D(),b(15,"li")(16,"a",25),$e("click",function(){return Pr(t),xr(Je().logout())}),ie(17,"i",26),O(18,"Logout "),D()()()()}if(2&n){const t=Je();B(3),dn("",t.username," ")}}function Rz(n,e){if(1&n){const t=po();b(0,"div",12)(1,"a",27),$e("click",function(){return Pr(t),xr(Je().login())}),ie(2,"i",28),O(3,"Login "),D()()}}let Mz=(()=>{const e=class{constructor(r){this.authService=r,this.isLoggedIn=!1,this.username=null}ngOnInit(){this.checkLoginStatus()}checkLoginStatus(){const r=this.authService.instance.getAllAccounts();if(this.isLoggedIn=r.length>0,this.isLoggedIn){const o=this.authService.instance.getActiveAccount();this.username=o?.name||o?.username||null}}login(){this.authService.loginPopup().subscribe()}logout(){this.authService.logoutPopup().subscribe({next:()=>{this.isLoggedIn=!1,this.username=null},error:r=>{console.error("Logout failed",r)}})}};let n=e;return e.\u0275fac=function(o){return new(o||e)(w(Xr))},e.\u0275cmp=oo({type:e,selectors:[["app-navbar"]],decls:13,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","shadow"],[1,"container"],["routerLink","/",1,"navbar-brand"],[1,"fas","fa-store","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],["class","navbar-nav me-auto",4,"ngIf"],[1,"navbar-nav"],["class","nav-item dropdown",4,"ngIf"],["class","nav-item",4,"ngIf"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","/products","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-boxes","me-1"],["routerLink","/products/create","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-plus-circle","me-1"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle"],[1,"fas","fa-user-circle","me-1"],[1,"dropdown-menu","dropdown-menu-end"],["href","#",1,"dropdown-item"],[1,"fas","fa-user","me-2"],[1,"fas","fa-cog","me-2"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-in-alt","me-1"]],template:function(o,i){1&o&&(b(0,"nav",0)(1,"div",1)(2,"a",2),ie(3,"i",3),b(4,"strong"),O(5,"TradeHub"),D()(),b(6,"button",4),ie(7,"span",5),D(),b(8,"div",6),Ce(9,bz,9,0,"ul",7),b(10,"div",8),Ce(11,Dz,19,1,"div",9),Ce(12,Rz,4,0,"div",10),D()()()()),2&o&&(B(9),he("ngIf",i.isLoggedIn),B(2),he("ngIf",i.isLoggedIn&&i.username),B(1),he("ngIf",!i.isLoggedIn))},dependencies:[Qs,Ea,yb]}),n})();function kz(n,e){1&n&&ie(0,"app-navbar")}let Nz=(()=>{const e=class{constructor(r,o){this.authService=r,this.msalBroadcastService=o,this.title="AngTradeClient",this.isLoggedIn=!1,this._destroying$=new nn}ngOnInit(){this.checkLoginStatus(),this.msalBroadcastService.msalSubject$.pipe(function Az(n){return tt((e,t)=>{Bt(n).subscribe(Qe(t,()=>t.complete(),zd)),!t.closed&&e.subscribe(t)})}(this._destroying$)).subscribe(r=>{"msal:loginSuccess"===r.eventType&&(this.authService.instance.setActiveAccount(r.payload.account),this.isLoggedIn=!0),"msal:logoutSuccess"===r.eventType&&(this.isLoggedIn=!1)})}checkLoginStatus(){const r=this.authService.instance.getAllAccounts();this.isLoggedIn=r.length>0}ngOnDestroy(){this._destroying$.next(),this._destroying$.complete()}};let n=e;return e.\u0275fac=function(o){return new(o||e)(w(Xr),w(Ya))},e.\u0275cmp=oo({type:e,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","mt-3"]],template:function(o,i){1&o&&(Ce(0,kz,1,0,"app-navbar",0),b(1,"div",1),ie(2,"router-outlet"),D()),2&o&&he("ngIf",i.isLoggedIn)},dependencies:[Qs,Qg,Mz],encapsulation:2}),n})(),Oz=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=sn({type:e,bootstrap:[Nz]}),e.\u0275inj=jt({providers:[{provide:ZS,useClass:_2,multi:!0},Xr,Ja,Ya],imports:[PU,lH,mV,Y2,E2.forRoot(new ec(Tz),{interactionType:P.Redirect,authRequest:{scopes:Fy.tradehubApi.scopes}},{interactionType:P.Redirect,protectedResourceMap:new Map([[Fy.tradehubApi.endpoint,Fy.tradehubApi.scopes]])})]}),n})();OU().bootstrapModule(Oz).catch(n=>console.error(n))}},Se=>{Se(Se.s=865)}]);